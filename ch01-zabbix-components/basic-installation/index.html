
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server
& frontend on Ubuntu or Rocky Linux, including security & repo configuration.
">
      
      
        <meta name="author" content="The Monitoring Penmasters">
      
      
        <link rel="canonical" href="https://thezabbixbook.com/ch01-zabbix-components/basic-installation/">
      
      
        <link rel="prev" href="../chapter/">
      
      
        <link rel="next" href="../ha-setup/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Basic Installation - Zabbix Book</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.af67bdb9.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Nunito"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css?v=8e9f1ef305a011bd82d366c3ef82d26bf85e8ea7">
    
      <link rel="stylesheet" href="../../stylesheets/linewrap.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    
    
    

    <meta property="og:title" content="Basic Installation">
    <meta property="og:description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server &amp; frontend on Ubuntu or Rocky Linux, including security &amp; repo configuration.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thezabbixbook.com/ch01-zabbix-components/basic-installation/">
    <meta property="og:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Basic Installation">
    <meta name="twitter:description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server &amp; frontend on Ubuntu or Rocky Linux, including security &amp; repo configuration.">
    <meta name="twitter:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="627">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basic-installation" class="md-skip">
          Pular para conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    
    
    
    
    <script>
        const gGMC_SELECT_VERSION = "Selecione a versão";
        const gGMC_TRANSLATE_CTA = "Support us and translate!";
        const gGMC_PAGE_LOCALE = "en";
        const gGMC_FILE_LOCALE = "en";
        const gGMC_TRANSLATE_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2 0 .37-.03.73-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.59 0 1.16-.06 1.72-.16A5.9 5.9 0 0 1 13 19c0-.29.03-.57.07-.85-.32.63-.67 1.24-1.07 1.81-.83-1.2-1.5-2.53-1.91-3.96h3.72a5.95 5.95 0 0 1 2.59-2.4c.06-.53.1-1.06.1-1.6M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m6.34 6H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25-9.56c1.84.63 3.37 1.9 4.33 3.56h-2.95a15.7 15.7 0 0 0-1.38-3.56M23 18v2h-3v3h-2v-3h-3v-2h3v-3h2v3z"/></svg>';
    </script>
    
    

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabeçalho">
    <a href="../.." title="Zabbix Book" class="md-header__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zabbix Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Selecione o idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../fr/ch01-zabbix-components/basic-installation/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../nl/ch01-zabbix-components/basic-installation/" hreflang="nl" class="md-select__link">
              Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../pt_BR/ch01-zabbix-components/basic-installation/" hreflang="pt_BR" class="md-select__link">
              Brazillian Portugese
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../ru/ch01-zabbix-components/basic-installation/" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Compartilhar" aria-label="Compartilhar" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando busca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/penmasters/zabbix-book" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegação" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Zabbix Book" class="md-nav__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Zabbix Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/penmasters/zabbix-book" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guidelines
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Book Tags
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Supporters-Contributors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supporters and contributors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch00-getting-started/initial-steps/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 01 : Zabbix components
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Chapter 01 : Zabbix components
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Zabbix components
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Basic Installation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Basic Installation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the MariaDB database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the MariaDB database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-mariadb-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Add the MariaDB repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      Install the MariaDB database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      Securing the MariaDB Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-zabbix-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Zabbix database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-the-zabbix-maria-db" class="md-nav__link">
    <span class="md-ellipsis">
      Populate the Zabbix Maria DB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-postgresql-database" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the PostgreSQL database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the PostgreSQL database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-postgresql-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Add the PostgreSQL repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-postgresql-databases" class="md-nav__link">
    <span class="md-ellipsis">
      Install the PostgreSQL databases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-the-postgresql-database" class="md-nav__link">
    <span class="md-ellipsis">
      Securing the PostgreSQL database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-zabbix-database-with-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Zabbix database with PostgreSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-the-zabbix-postgresql-db" class="md-nav__link">
    <span class="md-ellipsis">
      Populate the Zabbix PostgreSQL DB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-zabbix-server-for-mariadbmysql" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the Zabbix server for MariaDB/Mysql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Zabbix server for MariaDB/Mysql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-zabbix-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Adding the Zabbix repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-zabbix-server-for-mysqlmariadb" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Zabbix server for MySQL/MariaDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-zabbix-server-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the Zabbix server for PostgreSQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Zabbix server for PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-zabbix-repository_1" class="md-nav__link">
    <span class="md-ellipsis">
      Adding the Zabbix repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-zabbix-server-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Zabbix server for PostgreSQL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the frontend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-frontend-with-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the frontend with NGINX
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    <span class="md-ellipsis">
      Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-urls" class="md-nav__link">
    <span class="md-ellipsis">
      Useful URLs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ha-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HA Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch02-zabbix-installation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 02 : Installation
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch03-zabbix-proxies/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 03 : Proxies and Webcomponents
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch04-zabbix-collecting-data/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 04 : Collecting data 
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch05-zabbix-triggers/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 05 : Triggers
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch06-zabbix-templates/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 06 : Templates
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch07-zabbix-alerts/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 07 : Alerting
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch08-zabbix-lld/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 08 : LLD
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch09-zabbix-extending/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 09 : Extending Zabbix
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch10-zabbix-discovery/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 10 : Discovery
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch11-zabbix-visualisation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 11 : Visualisation
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch12-zabbix-api/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 12 : Zabbix API
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch13-advanced-security/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 13 : Advanced set up and security
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch14-zabbix-maintenance/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 14 : Maintenance
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch15-zabbix-real-world-examples/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Chapter 15 : Real world examples
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Print Site
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the MariaDB database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the MariaDB database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-mariadb-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Add the MariaDB repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      Install the MariaDB database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      Securing the MariaDB Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-zabbix-database" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Zabbix database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-the-zabbix-maria-db" class="md-nav__link">
    <span class="md-ellipsis">
      Populate the Zabbix Maria DB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-postgresql-database" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the PostgreSQL database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the PostgreSQL database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-the-postgresql-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Add the PostgreSQL repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-postgresql-databases" class="md-nav__link">
    <span class="md-ellipsis">
      Install the PostgreSQL databases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securing-the-postgresql-database" class="md-nav__link">
    <span class="md-ellipsis">
      Securing the PostgreSQL database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-zabbix-database-with-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Zabbix database with PostgreSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-the-zabbix-postgresql-db" class="md-nav__link">
    <span class="md-ellipsis">
      Populate the Zabbix PostgreSQL DB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-zabbix-server-for-mariadbmysql" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the Zabbix server for MariaDB/Mysql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Zabbix server for MariaDB/Mysql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-zabbix-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Adding the Zabbix repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-zabbix-server-for-mysqlmariadb" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Zabbix server for MySQL/MariaDB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-zabbix-server-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the Zabbix server for PostgreSQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Zabbix server for PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-zabbix-repository_1" class="md-nav__link">
    <span class="md-ellipsis">
      Adding the Zabbix repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-zabbix-server-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Zabbix server for PostgreSQL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the frontend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-frontend-with-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the frontend with NGINX
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    <span class="md-ellipsis">
      Questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-urls" class="md-nav__link">
    <span class="md-ellipsis">
      Useful URLs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                


    <a href="../../print_page/" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3"/></svg>
    </a>



                   
<nav class="md-tags">
  
  <span class="md-tag md-tag-icon">beginner</span>
  
</nav>


  
  
    
      
    
    <a href="https://github.com/penmasters/zabbix-book/raw/main/docs/ch01-zabbix-components/basic-installation.md" title="Exibir fonte desta página" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="basic-installation">Basic installation</h1>
<p>In this chapter, we will walk through the process of installing the Zabbix server.
There are many different ways to setup a Zabbix server. We will cover the most
common setups with MariaDB and PostgreSQL on Ubuntu and on Rocky Linux.</p>
<p>Before beginning the installation, it is important to understand the architecture
of Zabbix.
The Zabbix server is structured in a modular fashion, composed of three main components,
which we will discuss in detail.</p>
<ul>
<li>The Zabbix server</li>
<li>The Zabbix web server</li>
<li>The Zabbix database</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Creation of DB users</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="l l-Scalar l-Scalar-Plain">In our setup we will create 2 DB users `zabbix-web` and `zabbix-srv`. The</span><span class="w"> </span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="l l-Scalar l-Scalar-Plain">zabbix-web user will be used for the frontend to connect to our zabbix database.</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="l l-Scalar l-Scalar-Plain">The zabbix-srv user will be used by our zabbix server to connect to the database.</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="l l-Scalar l-Scalar-Plain">This allows us to limit the permissions for every user to only what is strictly</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="l l-Scalar l-Scalar-Plain">needed.</span>
</span></code></pre></div>
</div>
<p><img align="left" alt="overview" src="ch01-basic-installation-zabbixserver.png" /></p>
<p><em>1.1 Zabbix basic
split installation</em></p>
<p>All of these components can either be installed on a single server or distributed
across three separate servers. The core of the system is the Zabbix server, often
referred to as the "brain." This component is responsible for processing trigger
calculations and sending alerts. The database serves as the storage for the Zabbix
server's configuration and all the data it collects. The web server provides the
user interface (front-end) for interacting with the system. It is important to note
that the Zabbix API is part of the front-end component, not the Zabbix server itself.</p>
<p>These components must function together seamlessly, as illustrated in the diagram
above. The Zabbix server must read configurations and store monitoring data in the
database, while the front-end needs access to read and write configuration data.
Furthermore, the front-end must be able to check the status of the Zabbix server
and retrieve additional necessary information to ensure smooth operation.</p>
<p>For our setup, we will be using two virtual machines (VMs): one VM will host both
the Zabbix server and the Zabbix web front-end, while the second VM will host the
Zabbix database.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>It's perfect possible to install all components on 1 single VM or every component
on a separate VM.
Reason we split the DB as an example is because the database will probably be
the first component giving you performance headaches. It's also the component
that needs some extra attention when we split it so for this reason we have
chosen in this example to split the database from the rest of the setup.</p>
</details>
<details class="note" open="open">
<summary>Note</summary>
<p>A crucial consideration for those managing Zabbix installations is the database
back-end. Zabbix 7.0 marks the final release to offer support for Oracle Database.
Consequently, systems running Zabbix 7.0 or any prior version must undertake
a database migration to either PostgreSQL, MySQL, or a compatible fork such
as MariaDB before upgrading to a later Zabbix release. This migration is a
mandatory step to ensure continued functionality and compatibility with future
Zabbix versions.</p>
</details>
<p>We will cover the following topics:</p>
<ul>
<li>Install our Database based on MariaDB.</li>
<li>Install our Database based on PostgreSQL.</li>
<li>Installing the Zabbix server.</li>
<li>Install the frontend.</li>
</ul>
<h2 id="installing-the-mariadb-database">Installing the MariaDB database</h2>
<p>To begin the installation process for the MariaDB server, the first step involves
manually creating a repository configuration file. This file, mariadb.repo on Rocky,
must be placed in the /etc/yum.repos.d/ directory. The repository file will allow
your package manager to locate and install the necessary MariaDB components.
For Ubuntu we need to import the repository keys and create a file for example
'/etc/apt/sources.list.d/mariadb.sources'.</p>
<h3 id="add-the-mariadb-repository">Add the MariaDB repository</h3>
<p>To create the MariaDB repository file, execute the following command in your terminal:</p>
<div class="admonition info">
<p class="admonition-title">create mariadb repository</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /etc/yum.repos.d/mariadb.repo</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install apt-transport-https curl</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo mkdir -p /etc/apt/keyrings</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo curl -o /etc/apt/keyrings/mariadb-keyring.pgp &#39;https://mariadb.org/mariadb_release_signing_key.pgp&#39;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/apt/sources.list.d/mariadb.sources</span>
</span></code></pre></div></p>
</div>
<p>This will open a text editor where you can input the repository configuration details.
Once the repository is configured, you can proceed with the installation of MariaDB
using your package manager.</p>
<details class="tip" open="open">
<summary>Tip</summary>
<p>Always check Zabbix documentation for the latest supported versions.</p>
</details>
<p>The latest config can be found here:
<a href="https://mariadb.org/download/?t=repo-config">https://mariadb.org/download/?t=repo-config</a></p>
<p>Here's the configuration you need to add into the file:</p>
<div class="admonition info">
<p class="admonition-title">Mariadb repository</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># MariaDB 11.4 RedHatEnterpriseLinux repository list - created 2025-02-21 10:15 UTC</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p p-Indicator">[</span><span class="nv">mariadb</span><span class="p p-Indicator">]</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="l l-Scalar l-Scalar-Plain">name = MariaDB</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="l l-Scalar l-Scalar-Plain"># rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="l l-Scalar l-Scalar-Plain"># baseurl = https://rpm.mariadb.org/11.4/rhel/$releasever/$basearch</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="l l-Scalar l-Scalar-Plain">baseurl = https://mirror.bouwhuis.network/mariadb/yum/11.4/rhel/$releasever/$basearch</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="l l-Scalar l-Scalar-Plain"># gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="l l-Scalar l-Scalar-Plain">gpgkey = https://mirror.bouwhuis.network/mariadb/yum/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="l l-Scalar l-Scalar-Plain">gpgcheck = 1</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># MariaDB 11.4 repository list - created 2025-02-21 11:42 UTC</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">X-Repolib-Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MariaDB</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nt">Types</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deb</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># deb.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1"># URIs: https://deb.mariadb.org/11.4/ubuntu</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="nt">URIs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://mirror.bouwhuis.network/mariadb/repo/11.4/ubuntu</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="nt">Suites</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">noble</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nt">Components</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main main/debug</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="nt">Signed-By</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/apt/keyrings/mariadb-keyring.pgp</span>
</span></code></pre></div></p>
</div>
<p>After saving the file, ensure that everything is properly set up and that your
MariaDB version is compatible with your Zabbix version to avoid potential
integration issues.</p>
<p>Before proceeding with the MariaDB installation, it's a best practice to ensure
your operating system is up-to-date with the latest patches and security fixes.
This will help maintain system stability and compatibility with the software you're
about to install.</p>
<p>To update your OS, run the following command:</p>
<div class="admonition info">
<p class="admonition-title">Update OS</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf update</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update &amp;&amp; sudo apt upgrade</span>
</span></code></pre></div></p>
</div>
<p>This command will automatically fetch and install the latest updates available for
your system, applying security patches, performance improvements, and bug fixes.
Once the update process is complete, you can move forward with the MariaDB installation.</p>
<hr />
<h3 id="install-the-mariadb-database">Install the MariaDB database</h3>
<p>With the operating system updated and the MariaDB repository configured, you are
now ready to install the MariaDB server and client packages. This will provide the
necessary components to run and manage your database.</p>
<p>To install the MariaDB server and client, execute the following command:</p>
<div class="admonition info">
<p class="admonition-title">Install Mariadb</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install MariaDB-server</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install mariadb-server</span>
</span></code></pre></div></p>
</div>
<p>This command will download and install both the server and client packages, enabling
you to set up, configure, and interact with your MariaDB database. Once the
installation is complete, you can proceed to start and configure the MariaDB service.</p>
<p>Now that MariaDB is installed, we need to enable the service to start automatically
upon boot and start it immediately. Use the following command to accomplish this:</p>
<div class="admonition info">
<p class="admonition-title">Enable mariadb service</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable mariadb --now</span>
</span></code></pre></div></p>
</div>
<p>This command will both enable and start the MariaDB service. Once the service is
running, you can verify that the installation was successful by checking the
version of MariaDB using the following command:</p>
<div class="admonition info">
<p class="admonition-title">Check Mariadb version</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo mariadb -V</span>
</span></code></pre></div></p>
</div>
<p>The expected output should resemble this:</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="l l-Scalar l-Scalar-Plain">mariadb from 11.4.5-MariaDB, client 15.2 for Linux (aarch64) using EditLine wrapper</span>
</span></code></pre></div>
</div>
<p>To ensure that the MariaDB service is running properly, you can check its status
with the following command:</p>
<div class="admonition info">
<p class="admonition-title">Get mariadb status</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl status mariadb</span>
</span></code></pre></div></p>
</div>
<p>You should see an output similar to this, indicating that the MariaDB service
is active and running:</p>
<div class="admonition info">
<p class="admonition-title">mariadb service status example</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mariadb.service - MariaDB 11.4.5 database server</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">Loaded</span><span class="nt">: loaded (/usr/lib/systemd/system/mariadb.service; enabled; preset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled)</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">Drop-In</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/systemd/system/mariadb.service.d</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">└─migrated-from-my.cnf-settings.conf</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">Active</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">active (running) since Fri 2025-02-21 11:22:59 CET; 2min 8s ago</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">Docs</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">man:mariadbd(8)</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">https://mariadb.com/kb/en/library/systemd/</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">Process</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">23147 ExecStartPre=/bin/sh -c systemctl unset-environment _WSREP_START_POSITION (code=exited, status=0/SUCCESS)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">Process</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">23148 ExecStartPre=/bin/sh -c [ ! -e /usr/bin/galera_recovery ] &amp;&amp; VAR= ||   VAR=`/usr/bin/galera_recovery`; [ $? -eq 0 ] &amp;&amp; systemctl set-enviro&gt;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="nt">Process</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">23168 ExecStartPost=/bin/sh -c systemctl unset-environment \_WSREP_START_POSITION (code=exited, status=0/SUCCESS)</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="nt">Main PID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">23156 (mariadbd)</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="nt">Status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Taking</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">SQL</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">now...&quot;</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="nt">Tasks: 7 (limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30620)</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="nt">Memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">281.7M</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="nt">CPU</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">319ms</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="nt">CGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/system.slice/mariadb.service</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="l l-Scalar l-Scalar-Plain">└─23156 /usr/sbin/mariadbd</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] InnoDB</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] Plugin &#39;FEEDBACK&#39; is disabled.</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] Plugin &#39;wsrep-provider&#39; is disabled.</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] InnoDB</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Buffer pool(s) load completed at 250221 11:22:58</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] Server socket created on IP</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;0.0.0.0&#39;</span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] Server socket created on IP</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;::&#39;</span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] mariadbd</span><span class="nt">: Event Scheduler</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Loaded 0 events</span>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-02-21 11:22:58 0 [Note] /usr/sbin/mariadbd</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ready for connections.</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:58 localhost.localdomain mariadbd[23156]</span><span class="nt">: Version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;11.4.5-MariaDB&#39;</span><span class="w">  </span><span class="nt">socket</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/lib/mysql/mysql.sock&#39;</span><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3306  MariaDB Server</span>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="l l-Scalar l-Scalar-Plain">Feb 21 11:22:59 localhost.localdomain systemd[1]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Started MariaDB 11.4.5 database server.</span>
</span></code></pre></div>
</div>
<p>This confirms that your MariaDB server is up and running, ready for further configuration.</p>
<h3 id="securing-the-mariadb-database">Securing the MariaDB Database</h3>
<p>To enhance the security of your MariaDB server, it's essential to remove unnecessary
test databases, anonymous users, and set a root password. This can be done using
the mariadb-secure-installation script, which provides a step-by-step guide to
securing your database.</p>
<p>Run the following command:</p>
<div class="admonition info">
<p class="admonition-title">Secure Mariadb setup</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo mariadb-secure-installation</span>
</span></code></pre></div></p>
</div>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">NOTE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="l l-Scalar l-Scalar-Plain">In order to log into MariaDB to secure it, we&#39;ll need the current</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="l l-Scalar l-Scalar-Plain">password for the root user. If you&#39;ve just installed MariaDB, and</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="l l-Scalar l-Scalar-Plain">haven&#39;t set the root password yet, you should just press enter here.</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="nt">Enter current password for root (enter for none)</span><span class="p">:</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="l l-Scalar l-Scalar-Plain">OK, successfully used password, moving on...</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="l l-Scalar l-Scalar-Plain">Setting the root password or using the unix_socket ensures that nobody</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="l l-Scalar l-Scalar-Plain">can log into the MariaDB root user without the proper authorisation.</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="l l-Scalar l-Scalar-Plain">You already have your root account protected, so you can safely answer &#39;n&#39;.</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="l l-Scalar l-Scalar-Plain">Switch to unix_socket authentication [Y/n] n</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... skipping.</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="l l-Scalar l-Scalar-Plain">You already have your root account protected, so you can safely answer &#39;n&#39;.</span>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="l l-Scalar l-Scalar-Plain">Change the root password? [Y/n] y</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="nt">New password</span><span class="p">:</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="nt">Re-enter new password</span><span class="p">:</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="l l-Scalar l-Scalar-Plain">Password updated successfully!</span>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="l l-Scalar l-Scalar-Plain">Reloading privilege tables..</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="l l-Scalar l-Scalar-Plain">By default, a MariaDB installation has an anonymous user, allowing anyone</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="l l-Scalar l-Scalar-Plain">to log into MariaDB without having to have a user account created for</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="l l-Scalar l-Scalar-Plain">them.  This is intended only for testing, and to make the installation</span>
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a><span class="l l-Scalar l-Scalar-Plain">go a bit smoother.  You should remove them before moving into a</span>
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a><span class="l l-Scalar l-Scalar-Plain">production environment.</span>
</span><span id="__span-15-34"><a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
</span><span id="__span-15-35"><a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a><span class="l l-Scalar l-Scalar-Plain">Remove anonymous users? [Y/n] y</span>
</span><span id="__span-15-36"><a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-37"><a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>
</span><span id="__span-15-38"><a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a><span class="l l-Scalar l-Scalar-Plain">Normally, root should only be allowed to connect from &#39;localhost&#39;.  This</span>
</span><span id="__span-15-39"><a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a><span class="l l-Scalar l-Scalar-Plain">ensures that someone cannot guess at the root password from the network.</span>
</span><span id="__span-15-40"><a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>
</span><span id="__span-15-41"><a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a><span class="l l-Scalar l-Scalar-Plain">Disallow root login remotely? [Y/n] y</span>
</span><span id="__span-15-42"><a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-43"><a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>
</span><span id="__span-15-44"><a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a><span class="l l-Scalar l-Scalar-Plain">By default, MariaDB comes with a database named &#39;test&#39; that anyone can</span>
</span><span id="__span-15-45"><a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a><span class="l l-Scalar l-Scalar-Plain">access.  This is also intended only for testing, and should be removed</span>
</span><span id="__span-15-46"><a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a><span class="l l-Scalar l-Scalar-Plain">before moving into a production environment.</span>
</span><span id="__span-15-47"><a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a>
</span><span id="__span-15-48"><a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a><span class="l l-Scalar l-Scalar-Plain">Remove test database and access to it? [Y/n] y</span>
</span><span id="__span-15-49"><a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">- Dropping test database...</span>
</span><span id="__span-15-50"><a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-51"><a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">- Removing privileges on test database...</span>
</span><span id="__span-15-52"><a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-53"><a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a>
</span><span id="__span-15-54"><a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a><span class="l l-Scalar l-Scalar-Plain">Reloading the privilege tables will ensure that all changes made so far</span>
</span><span id="__span-15-55"><a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a><span class="l l-Scalar l-Scalar-Plain">will take effect immediately.</span>
</span><span id="__span-15-56"><a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a>
</span><span id="__span-15-57"><a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a><span class="l l-Scalar l-Scalar-Plain">Reload privilege tables now? [Y/n] y</span>
</span><span id="__span-15-58"><a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">... Success!</span>
</span><span id="__span-15-59"><a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a>
</span><span id="__span-15-60"><a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a><span class="l l-Scalar l-Scalar-Plain">Cleaning up...</span>
</span><span id="__span-15-61"><a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a>
</span><span id="__span-15-62"><a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a><span class="l l-Scalar l-Scalar-Plain">All done!  If you&#39;ve completed all of the above steps, your MariaDB</span>
</span><span id="__span-15-63"><a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a><span class="l l-Scalar l-Scalar-Plain">installation should now be secure.</span>
</span><span id="__span-15-64"><a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a>
</span><span id="__span-15-65"><a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a><span class="l l-Scalar l-Scalar-Plain">Thanks for using MariaDB!</span>
</span></code></pre></div>
</div>
<p>The mariadb-secure-installation script will guide you through several key steps:</p>
<ol>
<li>Set a root password if one isn't already set.</li>
<li>Remove anonymous users.</li>
<li>Disallow remote root logins.</li>
<li>Remove the test database.</li>
<li>Reload the privilege tables to ensure the changes take effect.</li>
</ol>
<p>Once complete, your MariaDB instance will be significantly more secure. You are
now ready to configure the database for Zabbix.</p>
<hr />
<h3 id="create-the-zabbix-database">Create the Zabbix database</h3>
<p>With MariaDB now set up and secured, we can move on to creating the database for
Zabbix. This database will store all the necessary data related to your Zabbix server,
including configuration information and monitoring data.</p>
<p>Follow these steps to create the Zabbix database:</p>
<p>Log in to the MariaDB shell as the root user:
You'll be prompted to enter the root password that you set during the mariadb-secure-installation
process.</p>
<div class="admonition info">
<p class="admonition-title">Enter Mariadb as user root</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="l l-Scalar l-Scalar-Plain">mariadb -uroot -p</span>
</span></code></pre></div></p>
</div>
<p>Once you're logged into the MariaDB shell, run the following command to create a
database for Zabbix:</p>
<div class="admonition info">
<p class="admonition-title">Create the database</p>
<p><code>MariaDB [(none)]&gt; CREATE DATABASE zabbix CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;</code></p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>utf8mb4 is a proper implementation of UTF-8 in MySQL/MariaDB, supporting all
 Unicode characters, including emojis. The older utf8 charset in MySQL/MariaDB
 only supports up to three bytes per character and is not a true UTF-8 implementation,
 which is why utf8mb4 is recommended.</p>
</details>
<p>This command creates a new database named zabbix with the UTF-8 character set,
which is required for Zabbix.</p>
<p>Create a dedicated user for Zabbix and grant the necessary privileges: Next, you
need to create a user that Zabbix will use to access the database. Replace password
with a strong password of your choice.</p>
<div class="admonition info">
<p class="admonition-title">Create users and grant privileges</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;zabbix-web&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;zabbix-srv&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="w"> </span><span class="n">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">zabbix</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;zabbix-srv&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">DELETE</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">zabbix</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;zabbix-web&#39;</span><span class="o">@</span><span class="s1">&#39;&lt;zabbix server ip&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>This creates new users for zabbix-web and zabbix-srv, grants them access to the
zabbix database, and ensures that the privileges are applied immediately.</p>
<p>In some cases, especially when setting up Zabbix with MariaDB, you might encounter
issues related to stored functions and triggers if binary logging is enabled.
To address this, you need to set the log_bin_trust_function_creators option to 1
in the MariaDB configuration file. This allows non-root users to create stored
functions and triggers without requiring SUPER privileges, which are restricted
when binary logging is enabled.</p>
<div class="admonition info">
<p class="admonition-title">Activate temporarily extra privileges for non root users</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">log_bin_trust_function_creators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">MariaDB</span><span class="w"> </span><span class="p">[(</span><span class="k">none</span><span class="p">)]</span><span class="o">&gt;</span><span class="w"> </span><span class="n">QUIT</span>
</span></code></pre></div>
</div>
<p>At this point, your Zabbix database is ready, and you can proceed with configuring
the Zabbix server to connect to the database.</p>
<details class="warning" open="open">
<summary>Warning</summary>
<p>In the Zabbix documentation, it is explicitly stated that deterministic
triggers need to be created during the schema import. On MySQL and MariaDB
systems, this requires setting GLOBAL log_bin_trust_function_creators = 1
if binary logging is enabled, and you lack superuser privileges.</p>
<p>If the log_bin_trust_function_creators option is not set in the MySQL
configuration file, it will block the creation of these triggers during
schema import. This is essential because, without superuser access,
non-root users cannot create triggers or stored functions unless this setting is applied.</p>
<p>To summarize:</p>
<ul>
<li>
<p>Binary logging enabled: If binary logging is enabled and the user does not
  have superuser privileges, the creation of necessary Zabbix triggers will
  fail unless log_bin_trust_function_creators = 1 is set.</p>
</li>
<li>
<p>Solution: Add log_bin_trust_function_creators = 1 to the [mysqld] section
  in your MySQL/MariaDB configuration file or temporarily set it at runtime
  with SET GLOBAL log_bin_trust_function_creators = 1 if you have sufficient
  permissions.</p>
</li>
</ul>
<p>This ensures that Zabbix can successfully create the required triggers during
schema import without encountering privilege-related errors.</p>
</details>
<p>If we want our Zabbix server to connect to our DB then we also need to open our firewall port.</p>
<div class="admonition info">
<p class="admonition-title">Add firewall rules</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --add-port=3306/tcp --permanent</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --reload</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo ufw allow 3306/tcp</span>
</span></code></pre></div></p>
</div>
<hr />
<h3 id="populate-the-zabbix-maria-db">Populate the Zabbix Maria DB</h3>
<p>With the users and permissions set up correctly, you can now populate the database
with the Zabbix schema created and other required elements. Follow these steps:</p>
<p>One of the first things we need to do is add the Zabbix repository to our machine.
This may sound weird but actually makes sense because we need to populate our DB
with our Zabbix schemas.</p>
<div class="admonition info">
<p class="admonition-title">Add Zabbix repo and install scripts</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="l l-Scalar l-Scalar-Plain">rpm -Uvh https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf clean all</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-sql-scripts</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-sql-scripts</span>
</span></code></pre></div></p>
</div>
<p>Now lets upload the data from zabbix (db structure, images, user, ... )
for this we make use of the user <code>zabbix-srv</code> and we upload it all in our DB <code>zabbix</code>.</p>
<div class="admonition info">
<p class="admonition-title">Populate the database</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo zcat /usr/share/zabbix/sql-scripts/mysql/server.sql.gz | mariadb --default-character-set=utf8mb4 -uroot -p zabbix</span>
</span></code></pre></div></p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>Depending on the speed of your hardware or virtual machine, the process may
take anywhere from a few seconds to several minutes. Please be patient and
avoid cancelling the operation; just wait for the prompt to appear.</p>
</details>
<p>Log back into your MySQL Database as root</p>
<div class="admonition info">
<p class="admonition-title">Enter mariadb as user root</p>
<p><code>mariadb -uroot -p</code></p>
</div>
<p>Once the import of the Zabbix schema is complete and you no longer need the
log_bin_trust_function_creators global parameter, it is a good practice to remove
it for security reasons.</p>
<p>To revert the change and set the global parameter back to 0, use the following
command in the MariaDB shell:</p>
<div class="admonition info">
<p class="admonition-title">Disable function log_bin_trust again</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">GLOBAL</span><span class="w"> </span><span class="n">log_bin_trust_function_creators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">001</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</span></code></pre></div>
</div>
<p>This command will disable the setting, ensuring that the servers security
posture remains robust.</p>
<p>This concludes our installation of the MariaDB</p>
<hr />
<h2 id="installing-the-postgresql-database">Installing the PostgreSQL database</h2>
<p>For our DB setup with PostgreSQL we need to add our PostgreSQL repository first
to the system. As of writing PostgreSQL 13-17 are supported but best is to have
a look before you install it as new versions may be supported and older maybe
unsupported both by Zabbix and PostgreSQL. Usually it's a good idea to go with
the latest version that is supported by Zabbix. Zabbix also supports the extension
TimescaleDB this is something we will talk later about. As you will see the setup
from PostgreSQL is very different from MySQL not only the installation but
also securing the DB.</p>
<p>The table of compatibility can be found <a href="https://docs.timescale.com/self-hosted/latest/upgrades/upgrade-pg/">https://docs.timescale.com/self-hosted/latest/upgrades/upgrade-pg/</a></p>
<hr />
<h3 id="add-the-postgresql-repository">Add the PostgreSQL repository</h3>
<p>So let us start first setting up our PostgreSQL repository with the following commands.</p>
<div class="admonition info">
<p class="admonition-title">Add PostgreSQL repo</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">Install the repository RPM</span><span class="p">:</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf install https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="nt">Disable the built-in PostgreSQL module</span><span class="p">:</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="l l-Scalar l-Scalar-Plain">dnf -qy module disable postgresql</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a># Import the repository signing key:
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>sudo apt install curl ca-certificates
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>sudo install -d /usr/share/postgresql-common/pgdg
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>sudo curl -o /usr/share/postgresql-common/pgdg/apt.postgresql.org.asc --fail https://www.postgresql.org/media/keys/ACCC4CF8.asc
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a># Create the repository configuration file:
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>sudo sh -c &#39;echo &quot;deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#39;
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a># Update the package lists:
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>sudo apt update
</span></code></pre></div></p>
</div>
<h3 id="install-the-postgresql-databases">Install the PostgreSQL databases</h3>
<div class="admonition info">
<p class="admonition-title">Install the Postgres server</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Install Postgres server:</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf install postgresql17-server</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="l l-Scalar l-Scalar-Plain"># Initialize the database and enable automatic start</span><span class="p p-Indicator">:</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="l l-Scalar l-Scalar-Plain">/usr/pgsql-17/bin/postgresql-17-setup initdb</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable postgresql-17 --now</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install postgresql-17</span>
</span></code></pre></div></p>
</div>
<p>To update your OS, run the following command:</p>
<div class="admonition info">
<p class="admonition-title">update the OS</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf update</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update &amp;&amp; sudo apt upgrade</span>
</span></code></pre></div></p>
</div>
<hr />
<h3 id="securing-the-postgresql-database">Securing the PostgreSQL database</h3>
<p>PostgreSQL handles access permissions differently from MySQL and MariaDB.
PostgreSQL relies on a file called pg_hba.conf to manage who can access the database,
from where, and what encryption method is used for authentication.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>Client authentication in PostgreSQL is configured through the pg_hba.conf
file, where "HBA" stands for Host-Based Authentication. This file specifies
which users can access the database, from which hosts, and how they are authenticated.
For further details, you can refer to the official PostgreSQL documentation."
<a href="https://www.postgresql.org/docs/current/auth-pg-hba-conf.html">https://www.postgresql.org/docs/current/auth-pg-hba-conf.html</a></p>
</details>
<p>Add the following lines, the order here is important.</p>
<div class="admonition info">
<p class="admonition-title">Edit the pg_hba file</p>
<p>Red hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /var/lib/pgsql/17/data/pg_hba.conf</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>sudo vi /etc/postgresql/17/main/pg_hba.conf
</span></code></pre></div></p>
</div>
<p>The result should look like :</p>
<div class="admonition info">
<p class="admonition-title">pg_hba example</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># &quot;local&quot; is for Unix domain socket connections only</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="l l-Scalar l-Scalar-Plain">local    zabbix     zabbix-srv                                                              scram-sha-256</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="l l-Scalar l-Scalar-Plain">local    all            all                                                                            peer</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="l l-Scalar l-Scalar-Plain"># IPv4 local connections</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="l l-Scalar l-Scalar-Plain">host     zabbix     zabbix-srv          &lt;ip from zabbix server/24&gt;     scram-sha-256</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="l l-Scalar l-Scalar-Plain">host     zabbix     zabbix-web        &lt;ip from zabbix server/24&gt;     scram-sha-256</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="l l-Scalar l-Scalar-Plain">host     all            all                         127.0.0.1/32                            scram-sha-256</span>
</span></code></pre></div>
</div>
<p>After we changed the pg_hba file don't forget to restart postgres else the settings
will not be applied. But before we restart let us also edit the file postgresql.conf
and allow our database to listen on our network interface for incoming connections
from the zabbix server. Postgresql will standard only allow connections from the socket.</p>
<div class="admonition info">
<p class="admonition-title">Edit postgresql.conf file</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /var/lib/pgsql/17/data/postgresql.conf</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/postgresql/17/main/postgresql.conf</span>
</span></code></pre></div></p>
</div>
<p>To configure PostgreSQL to listen on all network interfaces, you need to modify
the <code>postgresql.conf</code> file. Locate the following line:</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1">#listen_addresses = &#39;localhost&#39;</span>
</span></code></pre></div>
</div>
<p>and replace it with:</p>
<div class="admonition info">
<p><code>listen_addresses = '*'</code></p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>This will enable PostgreSQL to accept connections from any network interface,
not just the local machine. In production it's probably a good idea to limit
who can connect to the DB.</p>
</details>
<p>After making this change, restart the PostgreSQL service to apply the new settings:</p>
<div class="admonition info">
<p class="admonition-title">restart the DB server</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl restart postgresql-17</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart postgresql</span>
</span></code></pre></div></p>
</div>
<p>If the service fails to restart, review the pg_hba.conf file for any syntax errors,
as incorrect entries here may prevent PostgreSQL from starting.</p>
<p>Next, to prepare your PostgreSQL instance for Zabbix, you'll need to create the
necessary database tables. Begin by installing the Zabbix repository, as you did
for the Zabbix server. Then, install the appropriate Zabbix package that contains
the predefined tables, images, icons, and other database elements needed for the
Zabbix application.</p>
<hr />
<h3 id="create-the-zabbix-database-with-postgresql">Create the Zabbix database with PostgreSQL</h3>
<p>To begin, add the Zabbix repository to your system by running the following commands:</p>
<div class="admonition info">
<p class="admonition-title">Add zabbix schema repos package</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-sql-scripts</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-sql-scripts</span>
</span></code></pre></div></p>
</div>
<p>With the necessary packages installed, you are now ready to create the Zabbix users
for both the server and frontend.</p>
<p>First, switch to the <code>postgres</code> user and create the Zabbix server database user:</p>
<div class="admonition info">
<p class="admonition-title">create server users</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="n">sudo</span><span class="w"> </span><span class="n">su</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">postgres</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="k">createuser</span><span class="w"> </span><span class="c1">--pwprompt zabbix-srv</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="n">Enter</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">role</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">server</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="n">Enter</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">again</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">server</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span></code></pre></div>
</div>
<p>Next, create the Zabbix frontend user, which will be used to connect to the database:</p>
<div class="admonition info">
<p class="admonition-title">Create front-end user</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">createuser</span><span class="w"> </span><span class="c1">--pwprompt zabbix-web</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="n">Enter</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">role</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">frontend</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="n">Enter</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">again</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">frontend</span><span class="o">-</span><span class="n">password</span><span class="o">&gt;</span>
</span></code></pre></div>
</div>
<p>After creating the users, you need to prepare the database schema. As the root
or your regular user, unzip the necessary schema files by running the following command:</p>
<div class="admonition info">
<p class="admonition-title">Unzip the DB patch</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="l l-Scalar l-Scalar-Plain">gzip -d /usr/share/zabbix/sql-scripts/postgresql/server.sql.gz</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo gzip -d /usr/share/zabbix/sql-scripts/postgresql/server.sql.gz</span>
</span></code></pre></div></p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>Zabbix seems to like to change the locations of the script to populate the
DB every version or in between versions. If you encounter an error take a
look at the Zabbix documentation there is a good chance that some location was
changed.</p>
</details>
<p>This will extract the database schema required for the Zabbix server.</p>
<p>Now that the users are created, the next step is to create the Zabbix database.
First, switch to the <code>postgres</code> user and execute the following command to create
the database with the owner set to zabbix-srv:</p>
<div class="admonition info">
<p class="admonition-title">Create DB</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="l l-Scalar l-Scalar-Plain">su - postgres</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="l l-Scalar l-Scalar-Plain">createdb -E Unicode -O zabbix-srv zabbix</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="l l-Scalar l-Scalar-Plain">exit</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo su - postgres</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="l l-Scalar l-Scalar-Plain">createdb -E Unicode -O zabbix-srv zabbix</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="l l-Scalar l-Scalar-Plain">exit</span>
</span></code></pre></div></p>
</div>
<p>Once the database is created, you should verify the connection and ensure that
the correct user session is active. To do this, log into the zabbix database using
the zabbix-srv user:</p>
<div class="admonition info">
<p class="admonition-title">Login as user zabbix-srv</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="l l-Scalar l-Scalar-Plain">psql -d zabbix -U zabbix-srv</span>
</span></code></pre></div>
</div>
<p>After logging in, run the following SQL query to confirm that both the <code>session_user</code>
and <code>current_user</code> are set to <code>zabbix-srv</code>:</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="l l-Scalar l-Scalar-Plain">zabbix=&gt; SELECT session_user, current_user;</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">session_user | current_user</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="l l-Scalar l-Scalar-Plain">--------------+--------------</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zabbix-srv   | zabbix-srv</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="l l-Scalar l-Scalar-Plain">(1 row)</span>
</span></code></pre></div>
</div>
<p>If the output matches, you are successfully connected to the database with the correct
user.</p>
<p>PostgreSQL indeed differs significantly from MySQL or MariaDB in several aspects,
and one of the key features that sets it apart is its use of schemas. Unlike MySQL,
where databases are more standalone, PostgreSQL's schema system provides a structured,
multi-user environment within a single database.</p>
<p>Schemas act as logical containers within a database, enabling multiple users or
applications to access and manage data independently without conflicts. This feature
is especially valuable in environments where several users or applications need to
interact with the same database concurrently. Each user or application can have
its own schema, preventing accidental interference with each other's data.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>PostgreSQL comes with a default schema, typically called public, but it's in
general best practice to create custom schemas to better organize and separate
database objects, especially in complex or multi-user environments.</p>
<p>For more in-depth information, I recommend checking out the detailed guide at
this URI, <a href="https://hevodata.com/learn/postgresql-schema/#schema">https://hevodata.com/learn/postgresql-schema/#schema</a>
which explains the benefits and use cases for schemas in PostgreSQL.</p>
</details>
<p>To finalize the database setup for Zabbix, we need to configure schema permissions
for both the <code>zabbix-srv</code> and <code>zabbix-web</code> users.</p>
<p>First, we create a custom schema named <code>zabbix_server</code> and assign ownership to
the <code>zabbix-srv</code> user:</p>
<div class="admonition info">
<p class="admonition-title">create the db schema</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">AUTHORIZATION</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-srv&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Next, we set the <code>search path</code> to <code>zabbix_server</code> schema so that it's the default
for the current session:</p>
<div class="admonition info">
<p class="admonition-title">Set search path</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">search_path</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix_server&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>To confirm the schema setup, you can list the existing schemas:</p>
<div class="admonition info">
<p class="admonition-title">verify schema access</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dn</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="go">          List of schemas</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="go">     Name      |       Owner</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="go">---------------+-------------------</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="go"> public        | pg_database_owner</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="go"> zabbix_server | zabbix-srv</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a><span class="go">(2 rows)</span>
</span></code></pre></div>
</div>
<p>At this point, the <code>zabbix-srv</code> user has full access to the schema, but the <code>zabbix-web</code>
user still needs appropriate permissions to connect and interact with the database.
First, we grant <code>USAGE</code> privileges on the schema to allow <code>zabbix-web</code> to connect:</p>
<div class="admonition info">
<p class="admonition-title">Grant access to schema for user zabbix-web</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="gp">zabbix=#</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="n">USAGE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<hr />
<h3 id="populate-the-zabbix-postgresql-db">Populate the Zabbix PostgreSQL DB</h3>
<p>Now, the <code>zabbix-web</code> user has appropriate access to interact with the schema
while maintaining security by limiting permissions to essential operations.</p>
<p>With the users and permissions set up correctly, you can now populate the database
with the Zabbix schema created and other required elements. Follow these steps:</p>
<ul>
<li>Execute the SQL file to populate the database. Run the following command in the
  <code>psql</code> shell:</li>
</ul>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Make sure you did previous steps carefully so that you have selected the correct
search_path.</p>
</details>
<div class="admonition info">
<p class="admonition-title">upload the DB schema to db zabbix</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="k">sql</span><span class="w"> </span><span class="n">zabbix</span><span class="o">=#</span><span class="w"> </span><span class="err">\</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="k">share</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="k">sql</span><span class="o">-</span><span class="n">scripts</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">server</span><span class="p">.</span><span class="k">sql</span>
</span></code></pre></div>
</div>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Depending on your hardware or VM performance, this process can take anywhere
from a few seconds to several minutes. Please be patient and avoid cancelling
the operation.</p>
</details>
<ul>
<li>Monitor the progress as the script runs. You will see output similar to:</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Output example</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="k">share</span><span class="o">/</span><span class="n">zabbix</span><span class="o">/</span><span class="k">sql</span><span class="o">-</span><span class="n">scripts</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="n">server</span><span class="p">.</span><span class="k">sql</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a><span class="p">...</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a><span class="p">...</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a><span class="p">...</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a><span class="k">INSERT</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">10444</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a><span class="k">DELETE</span><span class="w"> </span><span class="mi">90352</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="k">COMMIT</span>
</span></code></pre></div>
</div>
<p>Once the script completes and you return to the <code>zabbix=#</code> prompt, the database
should be successfully populated with all the required tables, schemas,
images, and other elements needed for Zabbix.</p>
<p>However, <code>zabbix-web</code> still cannot perform any operations on the tables or sequences.
To allow basic data interaction without giving too many privileges, grant the
following permissions:</p>
<ul>
<li>For tables: SELECT, INSERT, UPDATE, and DELETE.</li>
<li>For sequences: SELECT and UPDATE.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Grant rights on the schema to user zabbix-web</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="gp">zabbix=#</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="gp">zabbix=#</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">SEQUENCES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Verify if the rights are correct on the schema :</p>
<div class="admonition info">
<p class="admonition-title">Example schema rights</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dn+</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="go">                                           List of schemas</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="go">     Name      |       Owner       |           Access privileges            |      Description</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="go">---------------+-------------------+----------------------------------------+------------------------</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="go"> public        | pg_database_owner | pg_database_owner=UC/pg_database_owner+| standard public schema</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="go">               |                   | =U/pg_database_owner                   |</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="go"> zabbix_server | zabbix-srv        | &quot;zabbix-srv&quot;=UC/&quot;zabbix-srv&quot;          +|</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="go">               |                   | &quot;zabbix-web&quot;=U/&quot;zabbix-srv&quot;            |</span>
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>If you encounter the following error during the SQL import:
<code>vbnet psql:/usr/share/zabbix/sql-scripts/postgresql/server.sql:7: ERROR: no
    schema has been selected to create in</code> It indicates that the search_path setting
might not have been correctly applied. This setting is crucial because it specifies
the schema where the tables and other objects should be created. By correctly
setting the search path, you ensure that the SQL script will create tables
and other objects in the intended schema.</p>
</details>
<p>To ensure that the Zabbix tables were created successfully and have the correct
permissions, you can verify the table list and their ownership using the <code>psql</code> command:</p>
<ul>
<li>List the Tables: Use the following command to list all tables in the <code>zabbix_server</code> schema:</li>
</ul>
<div class="admonition info">
<p class="admonition-title">List tables</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="k">sql</span><span class="w"> </span><span class="n">zabbix</span><span class="o">=#</span><span class="w"> </span><span class="err">\</span><span class="n">dt</span>
</span></code></pre></div>
</div>
<p>You should see a list of tables with their schema, name, type, and owner.
For example:</p>
<div class="admonition info">
<p class="admonition-title">List table with relations</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">dt</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">                        </span><span class="n">List</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">relations</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">    </span><span class="k">Schema</span><span class="w">     </span><span class="o">|</span><span class="w">            </span><span class="n">Name</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">  </span><span class="o">|</span><span class="w">   </span><span class="k">Owner</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="c1">---------------+----------------------------+-------+------------</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">acknowledges</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">actions</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">alerts</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">auditlog</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">autoreg_host</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">changelog</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">conditions</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="p">...</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="p">...</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="p">...</span>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">valuemap</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">valuemap_mapping</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">widget</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">widget_field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">zabbix</span><span class="o">-</span><span class="n">srv</span>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a><span class="p">(</span><span class="mi">203</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span>
</span></code></pre></div>
</div>
<ul>
<li>Verify Permissions: Confirm that the zabbix-srv user owns the tables and has
  the necessary permissions. You can check permissions for specific tables using
  the \dp command:</li>
</ul>
<div class="admonition info">
<div class="language-sql highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="k">sql</span><span class="w"> </span><span class="n">zabbix</span><span class="o">=#</span><span class="w"> </span><span class="err">\</span><span class="n">dp</span><span class="w"> </span><span class="n">zabbix_server</span><span class="p">.</span><span class="o">*</span>
</span></code></pre></div>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="w">                                                     </span><span class="k">Access</span><span class="w"> </span><span class="k">privileges</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">    </span><span class="k">Schema</span><span class="w">     </span><span class="o">|</span><span class="w">            </span><span class="n">Name</span><span class="w">            </span><span class="o">|</span><span class="w">   </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="k">Access</span><span class="w"> </span><span class="k">privileges</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="k">Column</span><span class="w"> </span><span class="k">privileges</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Policies</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="c1">---------------+----------------------------+----------+------------------------------------+-------------------+----------</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">acknowledges</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">               </span><span class="o">|</span><span class="w">                            </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-web&quot;</span><span class="o">=</span><span class="n">arwd</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w">     </span><span class="o">|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">actions</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">               </span><span class="o">|</span><span class="w">                            </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-web&quot;</span><span class="o">=</span><span class="n">arwd</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w">     </span><span class="o">|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">alerts</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">               </span><span class="o">|</span><span class="w">                            </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-web&quot;</span><span class="o">=</span><span class="n">arwd</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w">     </span><span class="o">|</span><span class="w">                   </span><span class="o">|</span>
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">auditlog</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="k">table</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">=</span><span class="n">arwdDxtm</span><span class="o">/</span><span class="ss">&quot;zabbix-srv&quot;</span><span class="o">+|</span><span class="w">                   </span><span class="o">|</span>
</span></code></pre></div>
</div>
<p>This will display the access privileges for all tables in the <code>zabbix_server</code>
schema. Ensure that <code>zabbix-srv</code> has the required privileges.</p>
<p>If everything looks correct, your tables are properly created and the <code>zabbix-srv</code>
user has the appropriate ownership and permissions. If you need to adjust any
permissions, you can do so using the GRANT commands as needed.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>If you prefer not to set the search path manually each time you log in as the
<code>zabbix-srv</code> user, you can configure PostgreSQL to automatically use the desired
search path. Run the following SQL command to set the default search path for
the <code>zabbix-srv</code> role:</p>
<p>sql zabbix=&gt; ALTER ROLE "zabbix-srv" SET search_path = "$user", public, zabbix_server;</p>
<p>This command ensures that every time the <code>zabbix-srv</code> user connects to the
database, the <code>search_path</code> is automatically set to include <code>$user</code>, <code>public</code>, and <code>zabbix_server</code>.</p>
</details>
<p>If you are ready you can exit the database and return as user root.</p>
<div class="admonition info">
<p class="admonition-title">Exit the database</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="err">\</span><span class="n">q</span>
</span></code></pre></div>
</div>
<p>If we want our Zabbix server to be able to connect to our DB then we also need to
open our firewall port.</p>
<div class="admonition info">
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --add-port=5432/tcp --permanent</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --reload</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo ufw allow 5432/tcp</span>
</span></code></pre></div></p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>Make sure your DB is listening on the correct IP and not on 127.0.0.1.
You could add the following files to your config file. This would allow MariaDB
to listen on all interfaces. Best to limit it only to the needed IP.</p>
<p>/etc/mysql/mariadb.cnf</p>
<p>[mariadb]
log_error=/var/log/mysql/mariadb.err
log_warnings=3
bind-address = 0.0.0.0</p>
</details>
<p>This concludes our installation of the PostgreSQL database.</p>
<hr />
<h2 id="installing-the-zabbix-server-for-mariadbmysql">Installing the Zabbix server for MariaDB/Mysql</h2>
<p>Before proceeding with the installation of your Zabbix server, ensure that the server
is properly configured, as outlined in the previous section <a href="../../ch00-getting-started/Requirements/">System Requirements</a></p>
<p>Another critical step at this stage if you use Red Hat based systems is disabling
SELinux, which can interfere with the installation and operation of Zabbix.
We will revisit SELinux at the end of this chapter once our installation is finished.</p>
<p>To check the current status of SELinux, you can use the following command: `sestatus``</p>
<div class="admonition info">
<p class="admonition-title">Selinux status</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="nt">SELinux status</span><span class="p">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div></p>
</div>
<p>As shown, the system is currently in enforcing mode. To temporarily disable SELinux,
you can run the following command: <code>setenforce 0</code></p>
<div class="admonition info">
<p class="admonition-title">Disable SeLinux</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="l l-Scalar l-Scalar-Plain">setenforce 0</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>SELinux status:                 enabled
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>SELinuxfs mount:                /sys/fs/selinux
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>SELinux root directory:         /etc/selinux
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a>Loaded policy name:             targeted
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>Current mode:                   permissive
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>Mode from config file:          enforcing
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>Policy MLS status:              enabled
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a>Policy deny_unknown status:     allowed
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>Memory protection checking:     actual (secure)
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>Max kernel policy version:      33
</span></code></pre></div></p>
</div>
<p>Now, as you can see, the mode is switched to permissive. However, this change
is not persistent across reboots. To make it permanent, you need to modify the
SELinux configuration file located at <code>/etc/selinux/config</code>. Open the file and
replace enforcing with <code>permissive</code>.</p>
<p>Alternatively, you can achieve the same result more easily by running the
following command:</p>
<div class="admonition info">
<p class="admonition-title">Disable SeLinux permanent</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="l l-Scalar l-Scalar-Plain">sed -i &#39;s/SELINUX=enforcing/SELINUX=permissive/g&#39; /etc/selinux/config</span>
</span></code></pre></div></p>
</div>
<p>This line will alter the configuration file for you. So when we run <code>sestatus</code>
again we will see that we are in <code>permissive</code> mode and that our configuration
file is also in permissive mode.</p>
<div class="admonition info">
<p class="admonition-title">Verify selinux status again</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="nt">SELinux status</span><span class="p">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div></p>
</div>
<hr />
<h3 id="adding-the-zabbix-repository">Adding the Zabbix repository</h3>
<p>From the Zabbix Download page <a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a>,
select the appropriate Zabbix version you wish to install. In this case, we will
be using Zabbix 8.0 LTS. Additionally, ensure you choose the correct OS distribution
for your environment, which will be Rocky Linux 9 or Ubuntu 24.04 in our case.</p>
<p>We will be installing the Zabbix Server along with NGINX as the web server for
the front-end. Make sure to download the relevant packages for your chosen configuration.</p>
<p><img alt="Zabbix Download" src="ch01-basic-installation-zabbixdownload.png" /></p>
<p><em>1.2 Zabbix
download</em></p>
<p>If you make use of a RHEL based system like Rocky then the first step is to disable
the Zabbix packages provided by the EPEL repository, if it's installed on your system.
To do this, edit the <code>/etc/yum.repos.d/epel.repo</code> file and add the following statement
to disable the EPEL repository by default:</p>
<div class="admonition info">
<p class="admonition-title">exclude packages</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="p p-Indicator">[</span><span class="nv">epel</span><span class="p p-Indicator">]</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="nn">...</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="l l-Scalar l-Scalar-Plain">excludepkgs=zabbix*</span>
</span></code></pre></div></p>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>It's considered bad practice to keep the EPEL repository enabled all the time,
as it may cause conflicts by unintentionally overwriting or installing unwanted
packages. Instead, it's safer to enable the repository only when needed, by using
the following command during installations: dnf install --enablerepo=epel <package-name>
This ensures that EPEL is only enabled when explicitly required.</p>
</details>
<p>Next, we will install the Zabbix repository on our operating system. After adding
the Zabbix repository, it is recommended to perform a repository cleanup to remove
old cache files and ensure the repository metadata is up to date. You can do this
by running:</p>
<div class="admonition info">
<p class="admonition-title">Add the zabbix repo</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="l l-Scalar l-Scalar-Plain">rpm -Uvh https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf clean all</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span></code></pre></div></p>
</div>
<p>This will refresh the repository metadata and prepare the system for Zabbix installation.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>A repository in Linux is a configuration that allows you to access and install
software packages. You can think of it like an "app store" where you find and
download software from a trusted source, in this case, the Zabbix repository.
Many repositories are available, but it's important to only add those you trust.
The safest practice is to stick to the repositories provided by your operating
system and only add additional ones when you're sure they are both trusted and necessary.</p>
<p>For our installation, the Zabbix repository is provided by the vendor itself,
making it a trusted source. Another popular and safe repository for
Red Hat-based systems is EPEL (Extra Packages for Enterprise Linux), which is
commonly used in enterprise environments.
However, always exercise caution when adding new repositories to ensure
system security and stability.</p>
</details>
<hr />
<h3 id="configuring-the-zabbix-server-for-mysqlmariadb">Configuring the Zabbix server for MySQL/MariaDB</h3>
<p>Now that we've added the Zabbix repository with the necessary software, we are
ready to install both the Zabbix server and the web server. Keep in mind that the
web server doesn't need to be installed on the same machine as the Zabbix server;
they can be hosted on separate systems if desired.</p>
<p>To install the Zabbix server and the web server components for MySQL/MariaDB,
run the following command:</p>
<div class="admonition info">
<p class="admonition-title">Install the zabbix server</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-server-mysql</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-server-mysql</span>
</span></code></pre></div></p>
</div>
<p>After successfully installing the Zabbix server and frontend packages, we need to
configure the Zabbix server to connect to the database. This requires modifying the
Zabbix server configuration file. Open the <code>/etc/zabbix/zabbix_server.conf</code> file
and update the following lines to match your database configuration:</p>
<div class="admonition info">
<p class="admonition-title">Edit zabbix server config</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/zabbix/zabbix_server.conf</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;database-host&gt;</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=&lt;database-name&gt;</span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=&lt;database-user&gt;</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;database-password&gt;</span>
</span></code></pre></div></p>
</div>
<p>Replace <code>&lt;database-host&gt;</code>, <code>&lt;database-name&gt;</code>, <code>&lt;database-user&gt;</code>, and <code>&lt;database-password&gt;</code>
with the appropriate values for your setup. This ensures that the Zabbix server
can communicate with your database.</p>
<p>Ensure that there is no # (comment symbol) in front of the configuration parameters,
as Zabbix will treat lines beginning with # as comments, ignoring them during execution.
Additionally, double-check for duplicate configuration lines; if there are multiple
lines with the same parameter, Zabbix will use the value from the last occurrence.</p>
<p>For our setup, the configuration will look like this:</p>
<div class="admonition info">
<p class="admonition-title">Example config</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;ip or dns of your MariaDB server&gt;</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=zabbix</span>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=zabbix-srv</span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;your super secret password&gt;</span>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a><span class="l l-Scalar l-Scalar-Plain">DBPort=3306</span>
</span></code></pre></div>
</div>
<p>In this example:</p>
<ul>
<li>DBHost refers to the host where your database is running (use localhost if it's
  on the same machine).</li>
<li>DBName is the name of the Zabbix database.</li>
<li>DBUser is the database user.</li>
<li>DBPassword is the password for the database user.</li>
</ul>
<p>Make sure the settings reflect your environment's database configuration.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>The Zabbix server configuration file offers an option to include additional
configuration files for custom parameters. For a production environment, it's
often best to avoid altering the original configuration file directly. Instead,
you can create and include a separate configuration file for any additional or
modified parameters. This approach ensures that your original configuration
file remains untouched, which is particularly useful when performing upgrades
or managing configurations with tools like Ansible, Puppet, or SaltStack.</p>
</details>
<p>To enable this feature, remove the # from the line:</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="c1"># Include=/usr/local/etc/zabbix_server.conf.d/*.conf</span>
</span></code></pre></div>
</div>
<p>Ensure the path <code>/usr/local/etc/zabbix_server.conf.d/</code> exists and
create a custom configuration file in this directory.
This file should be readable by the <code>zabbix</code> user. By doing so, you can add
or modify parameters without modifying the default configuration file,
making system management and upgrades smoother.</p>
<p>With the Zabbix server configuration updated to connect to your database, you
can now start and enable the Zabbix server service. Run the following command
to enable the Zabbix server and ensure it starts automatically on boot:</p>
<details class="note" open="open">
<summary>Note</summary>
<p>Before restarting the Zabbix server after modifying its configuration, it is
considered best practice to validate the configuration to prevent potential
issues. Running a configuration check ensures that any errors are detected
beforehand, avoiding downtime caused by an invalid configuration. This can
be accomplished using the following command: <code>zabbix-server -T</code></p>
</details>
<div class="admonition info">
<p class="admonition-title">enable and start zabbix-server service</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl enable zabbix-server --now</span>
</span></code></pre></div></p>
</div>
<p>This command will start the Zabbix server service immediately and configure it
to launch on system startup. To verify that the Zabbix server is running correctly,
check the log file for any messages. You can view the latest entries in the
<code>Zabbix server</code> log file using:</p>
<div class="admonition info">
<p class="admonition-title">Check the log file</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="l l-Scalar l-Scalar-Plain">tail /var/log/zabbix/zabbix_server.log</span>
</span></code></pre></div>
</div>
<p>Look for messages indicating that the server has started successfully. If there
are any issues, the log file will provide details to help with troubleshooting.</p>
<div class="admonition info">
<p class="admonition-title">Example output</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.529 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ****** Enabled features ******</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="nt">12074:20250225:145333.530 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a><span class="nt">12074:20250225:145333.530 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a><span class="nt">12074:20250225:145333.530 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="nt">12074:20250225:145333.530 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-8"><a id="__codelineno-82-8" name="__codelineno-82-8" href="#__codelineno-82-8"></a><span class="nt">12074:20250225:145333.530 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-9"><a id="__codelineno-82-9" name="__codelineno-82-9" href="#__codelineno-82-9"></a><span class="nt">12074:20250225:145333.530 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-10"><a id="__codelineno-82-10" name="__codelineno-82-10" href="#__codelineno-82-10"></a><span class="nt">12074:20250225:145333.530 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-11"><a id="__codelineno-82-11" name="__codelineno-82-11" href="#__codelineno-82-11"></a><span class="nt">12074:20250225:145333.530 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-82-12"><a id="__codelineno-82-12" name="__codelineno-82-12" href="#__codelineno-82-12"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ******************************</span>
</span><span id="__span-82-13"><a id="__codelineno-82-13" name="__codelineno-82-13" href="#__codelineno-82-13"></a><span class="nt">12074:20250225:145333.530 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-82-14"><a id="__codelineno-82-14" name="__codelineno-82-14" href="#__codelineno-82-14"></a><span class="nt">12074:20250225:145333.545 current database version (mandatory/optional)</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000/07020000</span>
</span><span id="__span-82-15"><a id="__codelineno-82-15" name="__codelineno-82-15" href="#__codelineno-82-15"></a><span class="nt">12074:20250225:145333.545 required mandatory version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000</span>
</span><span id="__span-82-16"><a id="__codelineno-82-16" name="__codelineno-82-16" href="#__codelineno-82-16"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.557 starting HA manager</span>
</span><span id="__span-82-17"><a id="__codelineno-82-17" name="__codelineno-82-17" href="#__codelineno-82-17"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.566 HA manager started in active mode</span>
</span><span id="__span-82-18"><a id="__codelineno-82-18" name="__codelineno-82-18" href="#__codelineno-82-18"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#0 started [main process]</span>
</span><span id="__span-82-19"><a id="__codelineno-82-19" name="__codelineno-82-19" href="#__codelineno-82-19"></a><span class="l l-Scalar l-Scalar-Plain">12076:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#1 started [service manager #1]</span>
</span><span id="__span-82-20"><a id="__codelineno-82-20" name="__codelineno-82-20" href="#__codelineno-82-20"></a><span class="l l-Scalar l-Scalar-Plain">12077:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#2 started [configuration syncer #1]</span>
</span><span id="__span-82-21"><a id="__codelineno-82-21" name="__codelineno-82-21" href="#__codelineno-82-21"></a><span class="l l-Scalar l-Scalar-Plain">12078:20250225:145333.718 server</span><span class="w"> </span><span class="c1">#3 started [alert manager #1]</span>
</span><span id="__span-82-22"><a id="__codelineno-82-22" name="__codelineno-82-22" href="#__codelineno-82-22"></a><span class="l l-Scalar l-Scalar-Plain">12079:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#4 started [alerter #1]</span>
</span><span id="__span-82-23"><a id="__codelineno-82-23" name="__codelineno-82-23" href="#__codelineno-82-23"></a><span class="l l-Scalar l-Scalar-Plain">12080:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#5 started [alerter #2]</span>
</span><span id="__span-82-24"><a id="__codelineno-82-24" name="__codelineno-82-24" href="#__codelineno-82-24"></a><span class="l l-Scalar l-Scalar-Plain">12081:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#6 started [alerter #3]</span>
</span><span id="__span-82-25"><a id="__codelineno-82-25" name="__codelineno-82-25" href="#__codelineno-82-25"></a><span class="l l-Scalar l-Scalar-Plain">12082:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#7 started [preprocessing manager #1]</span>
</span><span id="__span-82-26"><a id="__codelineno-82-26" name="__codelineno-82-26" href="#__codelineno-82-26"></a><span class="l l-Scalar l-Scalar-Plain">12083:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#8 started [lld manager #1]</span>
</span></code></pre></div>
</div>
<p>If there was an error and the server was not able to connect to the database you
would see something like this in the server log file :</p>
<div class="admonition info">
<p class="admonition-title">Example log with errors</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ****** Enabled features ******</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="nt">12068:20250225:145309.018 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="nt">12068:20250225:145309.018 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a><span class="nt">12068:20250225:145309.018 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="nt">12068:20250225:145309.018 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="nt">12068:20250225:145309.018 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a><span class="nt">12068:20250225:145309.018 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-10"><a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a><span class="nt">12068:20250225:145309.018 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-11"><a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a><span class="nt">12068:20250225:145309.018 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-83-12"><a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ******************************</span>
</span><span id="__span-83-13"><a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a><span class="nt">12068:20250225:145309.018 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-83-14"><a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 [Z3005] query failed</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1146</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Table &#39;zabbix.users&#39; doesn&#39;t exist [select userid from users limit 1]</span>
</span><span id="__span-83-15"><a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 cannot use database &quot;zabbix&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database is not a Zabbix database</span>
</span></code></pre></div>
</div>
<p>Let's check the Zabbix server service to see if it's enabled so that it survives
a reboot</p>
<div class="admonition info">
<p class="admonition-title">check status of zabbix-server service</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl status zabbix-server</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>zabbix-server.service - Zabbix Server
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>Loaded: loaded (/usr/lib/systemd/system/zabbix-server.service; enabled; preset: disabled)
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>Active: active (running) since Tue 2025-02-25 14:53:33 CET; 26min ago
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>Main PID: 12074 (zabbix_server)
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>Tasks: 77 (limit: 24744)
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>Memory: 71.5M
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a>CPU: 18.535s
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a>CGroup: /system.slice/zabbix-server.service
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a>├─12074 /usr/sbin/zabbix_server -c /etc/zabbix/zabbix_server.conf
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a>├─12075 &quot;/usr/sbin/zabbix_server: ha manager&quot;
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a>├─12076 &quot;/usr/sbin/zabbix_server: service manager #1 [processed 0 events, updated 0 event tags, deleted 0 problems, synced 0 service updates, idle 5.027667 sec during 5.042628 sec]&quot;
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a>├─12077 &quot;/usr/sbin/zabbix_server: configuration syncer [synced configuration in 0.051345 sec, idle 10 sec]&quot;
</span><span id="__span-85-13"><a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a>├─12078 &quot;/usr/sbin/zabbix_server: alert manager #1 [sent 0, failed 0 alerts, idle 5.030391 sec during 5.031944 sec]&quot;
</span><span id="__span-85-14"><a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a>├─12079 &quot;/usr/sbin/zabbix_server: alerter #1 started&quot;
</span><span id="__span-85-15"><a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a>├─12080 &quot;/usr/sbin/zabbix_server: alerter #2 started&quot;
</span><span id="__span-85-16"><a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a>├─12081 &quot;/usr/sbin/zabbix_server: alerter #3 started&quot;
</span><span id="__span-85-17"><a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a>├─12082 &quot;/usr/sbin/zabbix_server: preprocessing manager #1 [queued 0, processed 0 values, idle 5.023818 sec during 5.024830 sec]&quot;
</span><span id="__span-85-18"><a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a>├─12083 &quot;/usr/sbin/zabbix_server: lld manager #1 [processed 0 LLD rules, idle 5.017278sec during 5.017574 sec]&quot;
</span><span id="__span-85-19"><a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a>├─12084 &quot;/usr/sbin/zabbix_server: lld worker #1 [processed 1 LLD rules, idle 21.031209 sec during 21.063879 sec]&quot;
</span><span id="__span-85-20"><a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a>├─12085 &quot;/usr/sbin/zabbix_server: lld worker #2 [processed 1 LLD rules, idle 43.195541 sec during 43.227934 sec]&quot;
</span><span id="__span-85-21"><a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a>├─12086 &quot;/usr/sbin/zabbix_server: housekeeper [startup idle for 30 minutes]&quot;
</span><span id="__span-85-22"><a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a>├─12087 &quot;/usr/sbin/zabbix_server: timer #1 [updated 0 hosts, suppressed 0 events in 0.017595 sec, idle 59 sec]&quot;
</span><span id="__span-85-23"><a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a>├─12088 &quot;/usr/sbin/zabbix_server: http poller #1 [got 0 values in 0.000071 sec, idle 5 sec]&quot;
</span><span id="__span-85-24"><a id="__codelineno-85-24" name="__codelineno-85-24" href="#__codelineno-85-24"></a>├─12089 &quot;/usr/sbin/zabbix_server: browser poller #1 [got 0 values in 0.000066 sec, idle 5 sec]&quot;
</span><span id="__span-85-25"><a id="__codelineno-85-25" name="__codelineno-85-25" href="#__codelineno-85-25"></a>├─12090 &quot;/usr/sbin/zabbix_server: discovery manager #1 [processing 0 rules, 0 unsaved checks]&quot;
</span><span id="__span-85-26"><a id="__codelineno-85-26" name="__codelineno-85-26" href="#__codelineno-85-26"></a>├─12091 &quot;/usr/sbin/zabbix_server: history syncer #1 [processed 4 values, 3 triggers in 0.027382 sec, idle 1 sec]&quot;
</span><span id="__span-85-27"><a id="__codelineno-85-27" name="__codelineno-85-27" href="#__codelineno-85-27"></a>├─12092 &quot;/usr/sbin/zabbix_server: history syncer #2 [processed 0 values, 0 triggers in 0.000077 sec, idle 1 sec]&quot;
</span><span id="__span-85-28"><a id="__codelineno-85-28" name="__codelineno-85-28" href="#__codelineno-85-28"></a>├─12093 &quot;/usr/sbin/zabbix_server: history syncer #3 [processed 0 values, 0 triggers in 0.000076 sec, idle 1 sec]&quot;
</span><span id="__span-85-29"><a id="__codelineno-85-29" name="__codelineno-85-29" href="#__codelineno-85-29"></a>├─12094 &quot;/usr/sbin/zabbix_server: history syncer #4 [processed 0 values, 0 triggers in 0.000020 sec, idle 1 sec]&quot;
</span><span id="__span-85-30"><a id="__codelineno-85-30" name="__codelineno-85-30" href="#__codelineno-85-30"></a>├─12095 &quot;/usr/sbin/zabbix_server: escalator #1 [processed 0 escalations in 0.011627 sec, idle 3 sec]&quot;
</span><span id="__span-85-31"><a id="__codelineno-85-31" name="__codelineno-85-31" href="#__codelineno-85-31"></a>├─12096 &quot;/usr/sbin/zabbix_server: proxy poller #1 [exchanged data with 0 proxies in 0.000081 sec, idle 5 sec]&quot;
</span><span id="__span-85-32"><a id="__codelineno-85-32" name="__codelineno-85-32" href="#__codelineno-85-32"></a>├─12097 &quot;/usr/sbin/zabbix_server: self-monitoring [processed data in 0.000068 sec, idle 1 sec]&quot;
</span></code></pre></div></p>
</div>
<p>This concludes our chapter on installing and configuring the Zabbix server with Mariadb.</p>
<hr />
<h2 id="installing-the-zabbix-server-for-postgresql">Installing the Zabbix server for PostgreSQL</h2>
<p>Before proceeding with the installation of your Zabbix server, ensure that the server
is properly configured, as outlined in the previous section <a href="../../ch00-getting-started/Requirements/">System Requirements</a></p>
<p>Another critical step at this stage if you use Red Hat based systems is disabling
SELinux, which can interfere with the installation and operation of Zabbix.
We will revisit SELinux at the end of this chapter once our installation is finished.</p>
<p>To check the current status of SELinux, you can use the following command: `sestatus``</p>
<div class="admonition info">
<p class="admonition-title">check the selinux status</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="l l-Scalar l-Scalar-Plain">SELinux status</span><span class="p p-Indicator">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-86-5"><a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-86-6"><a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-86-7"><a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-86-8"><a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">enforcing</span>
</span><span id="__span-86-9"><a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-86-10"><a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-86-11"><a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-86-12"><a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div>
</div>
<p>As shown, the system is currently in enforcing mode. To temporarily disable SELinux,
you can run the following command: <code>setenforce 0</code></p>
<div class="admonition info">
<p class="admonition-title">change selinux to permissive</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="l l-Scalar l-Scalar-Plain">setenforce 0</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>SELinux status:                 enabled
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>SELinuxfs mount:                /sys/fs/selinux
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>SELinux root directory:         /etc/selinux
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>Loaded policy name:             targeted
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>Current mode:                   permissive
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>Mode from config file:          enforcing
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>Policy MLS status:              enabled
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>Policy deny_unknown status:     allowed
</span><span id="__span-88-9"><a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>Memory protection checking:     actual (secure)
</span><span id="__span-88-10"><a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>Max kernel policy version:      33
</span></code></pre></div></p>
</div>
<p>Now, as you can see, the mode is switched to permissive. However, this change
is not persistent across reboots. To make it permanent, you need to modify the
SELinux configuration file located at <code>/etc/selinux/config</code>. Open the file and
replace enforcing with <code>permissive</code>.</p>
<p>Alternatively, you can achieve the same result more easily by running the
following command:</p>
<div class="admonition info">
<p class="admonition-title">Adapt selinux config permanently</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="l l-Scalar l-Scalar-Plain">sed -i &#39;s/SELINUX=enforcing/SELINUX=permissive/g&#39; /etc/selinux/config</span>
</span></code></pre></div></p>
</div>
<p>This line will alter the configuration file for you. So when we run <code>sestatus</code>
again we will see that we are in <code>permissive</code> mode and that our configuration
file is also in permissive mode.</p>
<div class="admonition info">
<p class="admonition-title">check if everything is disabled</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="l l-Scalar l-Scalar-Plain">sestatus</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="l l-Scalar l-Scalar-Plain">SELinux status</span><span class="p p-Indicator">:</span><span class="w">                 </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-90-4"><a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="nt">SELinuxfs mount</span><span class="p">:</span><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">/sys/fs/selinux</span>
</span><span id="__span-90-5"><a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="nt">SELinux root directory</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">/etc/selinux</span>
</span><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a><span class="nt">Loaded policy name</span><span class="p">:</span><span class="w">             </span><span class="l l-Scalar l-Scalar-Plain">targeted</span>
</span><span id="__span-90-7"><a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a><span class="nt">Current mode</span><span class="p">:</span><span class="w">                   </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-90-8"><a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a><span class="nt">Mode from config file</span><span class="p">:</span><span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">permissive</span>
</span><span id="__span-90-9"><a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a><span class="nt">Policy MLS status</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">enabled</span>
</span><span id="__span-90-10"><a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a><span class="nt">Policy deny_unknown status</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">allowed</span>
</span><span id="__span-90-11"><a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a><span class="nt">Memory protection checking</span><span class="p">:</span><span class="w">     </span><span class="l l-Scalar l-Scalar-Plain">actual (secure)</span>
</span><span id="__span-90-12"><a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a><span class="nt">Max kernel policy version</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">33</span>
</span></code></pre></div>
</div>
<hr />
<h3 id="adding-the-zabbix-repository_1">Adding the Zabbix repository</h3>
<p>From the Zabbix Download page <a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a>,
select the appropriate Zabbix version you wish to install. In this case, we will
be using Zabbix 8.0 LTS. Additionally, ensure you choose the correct OS distribution
for your environment, which will be Rocky Linux 9 or Ubuntu 24.04 in our case.</p>
<p>We will be installing the Zabbix Server along with NGINX as the web server for
the front-end. Make sure to download the relevant packages for your chosen configuration.</p>
<p><img alt="zabbix-download" src="ch01-basic-installation-zabbixdownload.png" /></p>
<p><em>1.3 Zabbix
download</em></p>
<p>If you make use of a RHEL based system like Rocky then the first step is to disable
the Zabbix packages provided by the EPEL repository, if it's installed on your system.
To do this, edit the <code>/etc/yum.repos.d/epel.repo</code> file and add the following statement
to disable the EPEL repository by default:</p>
<div class="admonition info">
<p class="admonition-title">Add exclude to epelrepo for zabbix</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="p p-Indicator">[</span><span class="nv">epel</span><span class="p p-Indicator">]</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="nn">...</span>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="l l-Scalar l-Scalar-Plain">excludepkgs=zabbix*</span>
</span></code></pre></div></p>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>It's considered bad practice to keep the EPEL repository enabled all the time,
as it may cause conflicts by unintentionally overwriting or installing unwanted
packages. Instead, it's safer to enable the repository only when needed, by using
the following command during installations: dnf install --enablerepo=epel <package-name>
This ensures that EPEL is only enabled when explicitly required.</p>
</details>
<p>Next, we will install the Zabbix repository on our operating system. After adding
the Zabbix repository, it is recommended to perform a repository cleanup to remove
old cache files and ensure the repository metadata is up to date. You can do this
by running:</p>
<div class="admonition info">
<p class="admonition-title">add the repo</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="l l-Scalar l-Scalar-Plain">rpm -Uvh https://repo.zabbix.com/zabbix/7.2/release/rocky/9/noarch/zabbix-release-latest-7.2.el9.noarch.rpm</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="l l-Scalar l-Scalar-Plain">dnf clean all</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo wget https://repo.zabbix.com/zabbix/7.2/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo dpkg -i zabbix-release_latest_7.2+ubuntu24.04_all.deb</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt update</span>
</span></code></pre></div></p>
</div>
<p>This will refresh the repository metadata and prepare the system for Zabbix installation.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>A repository in Linux is a configuration that allows you to access and install
software packages. You can think of it like an "app store" where you find and
download software from a trusted source, in this case, the Zabbix repository.
Many repositories are available, but it's important to only add those you trust.
The safest practice is to stick to the repositories provided by your operating
system and only add additional ones when you're sure they are both trusted and
necessary.</p>
<p>For our installation, the Zabbix repository is provided by the vendor itself,
making it a trusted source. Another popular and safe repository for
Red Hat-based systems is EPEL (Extra Packages for Enterprise Linux), which is
commonly used in enterprise environments.
However, always exercise caution when adding new repositories to ensure
system security and stability.</p>
</details>
<hr />
<h3 id="configuring-the-zabbix-server-for-postgresql">Configuring the Zabbix server for PostgreSQL</h3>
<p>We are ready to install both the Zabbix server and the web server. Keep in mind that
the web server doesn't need to be installed on the same machine as the Zabbix
server; they can be hosted on separate systems if desired.</p>
<p>To install the Zabbix server and the web server components for PostgreSQL,
run the following command:</p>
<div class="admonition info">
<p class="admonition-title">install zabbix server</p>
<p>Red Hat</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install zabbix-server-pgsql</span>
</span></code></pre></div>
<p>Ubuntu</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install zabbix-server-pgsql</span>
</span></code></pre></div>
</div>
<p>After successfully installing the Zabbix server packages, we need to
configure the Zabbix server to connect to the database. This requires modifying the
Zabbix server configuration file. Open the <code>/etc/zabbix/zabbix_server.conf</code> file
and update the following lines to match your database configuration:</p>
<div class="admonition info">
<p class="admonition-title">Edit zabbix server config</p>
<p>Red Hat and Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="c1">#sudo vi /etc/zabbix/zabbix_server.conf</span>
</span></code></pre></div></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;database-host&gt;</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=&lt;database-name&gt;</span>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="l l-Scalar l-Scalar-Plain">DBSchema=&lt;database-schema&gt;</span>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=&lt;database-user&gt;</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;database-password&gt;</span>
</span></code></pre></div>
</div>
<p>Replace <code>database-host</code>, <code>database-name</code>, <code>database-user</code>,<code>database-schema</code> and
<code>database-password</code> with the appropriate values for your setup. This ensures that
the Zabbix server can communicate with your database.</p>
<p>Ensure that there is no # (comment symbol) in front of the configuration parameters,
as Zabbix will treat lines beginning with # as comments, ignoring them during execution.
Additionally, double-check for duplicate configuration lines; if there are multiple
lines with the same parameter, Zabbix will use the value from the last occurrence.</p>
<p>For our setup, the configuration will look like this:</p>
<div class="admonition info">
<p class="admonition-title">Example config</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="l l-Scalar l-Scalar-Plain">DBHost=&lt;ip or dns of your PostgreSQL server&gt;</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="l l-Scalar l-Scalar-Plain">DBName=zabbix</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="l l-Scalar l-Scalar-Plain">DBSchema=zabbix_server</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="l l-Scalar l-Scalar-Plain">DBUser=zabbix-srv</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="l l-Scalar l-Scalar-Plain">DBPassword=&lt;your super secret password&gt;</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="l l-Scalar l-Scalar-Plain">DBPort=5432</span>
</span></code></pre></div>
</div>
<p>In this example:</p>
<ul>
<li>DBHost refers to the host where your database is running (use localhost if it's
  on the same machine).</li>
<li>DBName is the name of the Zabbix database.</li>
<li>DBUser is the database user.</li>
<li>DBPassword is the password for the database user.</li>
</ul>
<p>Make sure the settings reflect your environment's database configuration.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>The Zabbix server configuration file offers an option to include additional
configuration files for custom parameters. For a production environment, it's
often best to avoid altering the original configuration file directly. Instead,
you can create and include a separate configuration file for any additional or
modified parameters. This approach ensures that your original configuration
file remains untouched, which is particularly useful when performing upgrades
or managing configurations with tools like Ansible, Puppet, or SaltStack.</p>
</details>
<p>To enable this feature, remove the # from the line:</p>
<div class="admonition info">
<p><code># Include=/usr/local/etc/zabbix_server.conf.d/*.conf</code></p>
</div>
<p>Ensure the path <code>/usr/local/etc/zabbix_server.conf.d/</code> exists and
create a custom configuration file in this directory.
This file should be readable by the <code>zabbix</code> user. By doing so, you can add
or modify parameters without modifying the default configuration file,
making system management and upgrades smoother.</p>
<p>With the Zabbix server configuration updated to connect to your database, you
can now start and enable the Zabbix server service. Run the following command
to enable the Zabbix server and ensure it starts automatically on boot:</p>
<div class="admonition info">
<p class="admonition-title">enable zabbix server service and start</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable zabbix-server --now</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl enable zabbix-server --now</span>
</span></code></pre></div></p>
</div>
<p>This command will start the Zabbix server service immediately and configure it
to launch on system startup. To verify that the Zabbix server is running correctly,
check the log file for any messages. You can view the latest entries in the
<code>Zabbix server</code> log file using:</p>
<div class="admonition info">
<p class="admonition-title">check the zabbix log file</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="l l-Scalar l-Scalar-Plain">tail /var/log/zabbix/zabbix_server.log</span>
</span></code></pre></div>
</div>
<p>Look for messages indicating that the server has started successfully. If there
are any issues, the log file will provide details to help with troubleshooting.</p>
<div class="admonition info">
<p class="admonition-title">Example log output</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.529 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ****** Enabled features ******</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="nt">12074:20250225:145333.530 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a><span class="nt">12074:20250225:145333.530 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a><span class="nt">12074:20250225:145333.530 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-7"><a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a><span class="nt">12074:20250225:145333.530 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-8"><a id="__codelineno-102-8" name="__codelineno-102-8" href="#__codelineno-102-8"></a><span class="nt">12074:20250225:145333.530 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-9"><a id="__codelineno-102-9" name="__codelineno-102-9" href="#__codelineno-102-9"></a><span class="nt">12074:20250225:145333.530 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-10"><a id="__codelineno-102-10" name="__codelineno-102-10" href="#__codelineno-102-10"></a><span class="nt">12074:20250225:145333.530 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-11"><a id="__codelineno-102-11" name="__codelineno-102-11" href="#__codelineno-102-11"></a><span class="nt">12074:20250225:145333.530 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-102-12"><a id="__codelineno-102-12" name="__codelineno-102-12" href="#__codelineno-102-12"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.530 ******************************</span>
</span><span id="__span-102-13"><a id="__codelineno-102-13" name="__codelineno-102-13" href="#__codelineno-102-13"></a><span class="nt">12074:20250225:145333.530 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-102-14"><a id="__codelineno-102-14" name="__codelineno-102-14" href="#__codelineno-102-14"></a><span class="nt">12074:20250225:145333.545 current database version (mandatory/optional)</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000/07020000</span>
</span><span id="__span-102-15"><a id="__codelineno-102-15" name="__codelineno-102-15" href="#__codelineno-102-15"></a><span class="nt">12074:20250225:145333.545 required mandatory version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">07020000</span>
</span><span id="__span-102-16"><a id="__codelineno-102-16" name="__codelineno-102-16" href="#__codelineno-102-16"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.557 starting HA manager</span>
</span><span id="__span-102-17"><a id="__codelineno-102-17" name="__codelineno-102-17" href="#__codelineno-102-17"></a><span class="l l-Scalar l-Scalar-Plain">12075:20250225:145333.566 HA manager started in active mode</span>
</span><span id="__span-102-18"><a id="__codelineno-102-18" name="__codelineno-102-18" href="#__codelineno-102-18"></a><span class="l l-Scalar l-Scalar-Plain">12074:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#0 started [main process]</span>
</span><span id="__span-102-19"><a id="__codelineno-102-19" name="__codelineno-102-19" href="#__codelineno-102-19"></a><span class="l l-Scalar l-Scalar-Plain">12076:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#1 started [service manager #1]</span>
</span><span id="__span-102-20"><a id="__codelineno-102-20" name="__codelineno-102-20" href="#__codelineno-102-20"></a><span class="l l-Scalar l-Scalar-Plain">12077:20250225:145333.567 server</span><span class="w"> </span><span class="c1">#2 started [configuration syncer #1]</span>
</span><span id="__span-102-21"><a id="__codelineno-102-21" name="__codelineno-102-21" href="#__codelineno-102-21"></a><span class="l l-Scalar l-Scalar-Plain">12078:20250225:145333.718 server</span><span class="w"> </span><span class="c1">#3 started [alert manager #1]</span>
</span><span id="__span-102-22"><a id="__codelineno-102-22" name="__codelineno-102-22" href="#__codelineno-102-22"></a><span class="l l-Scalar l-Scalar-Plain">12079:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#4 started [alerter #1]</span>
</span><span id="__span-102-23"><a id="__codelineno-102-23" name="__codelineno-102-23" href="#__codelineno-102-23"></a><span class="l l-Scalar l-Scalar-Plain">12080:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#5 started [alerter #2]</span>
</span><span id="__span-102-24"><a id="__codelineno-102-24" name="__codelineno-102-24" href="#__codelineno-102-24"></a><span class="l l-Scalar l-Scalar-Plain">12081:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#6 started [alerter #3]</span>
</span><span id="__span-102-25"><a id="__codelineno-102-25" name="__codelineno-102-25" href="#__codelineno-102-25"></a><span class="l l-Scalar l-Scalar-Plain">12082:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#7 started [preprocessing manager #1]</span>
</span><span id="__span-102-26"><a id="__codelineno-102-26" name="__codelineno-102-26" href="#__codelineno-102-26"></a><span class="l l-Scalar l-Scalar-Plain">12083:20250225:145333.719 server</span><span class="w"> </span><span class="c1">#8 started [lld manager #1]</span>
</span></code></pre></div>
</div>
<p>If there was an error and the server was not able to connect to the database you
would see something like this in the server log file :</p>
<div class="admonition info">
<p class="admonition-title">Example of an error in the log</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ****** Enabled features ******</span>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 SNMP monitoring</span><span class="p p-Indicator">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="nt">12068:20250225:145309.018 IPMI monitoring</span><span class="p">:</span><span class="w">           </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a><span class="nt">12068:20250225:145309.018 Web monitoring</span><span class="p">:</span><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a><span class="nt">12068:20250225:145309.018 VMware monitoring</span><span class="p">:</span><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a><span class="nt">12068:20250225:145309.018 SMTP authentication</span><span class="p">:</span><span class="w">       </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a><span class="nt">12068:20250225:145309.018 ODBC</span><span class="p">:</span><span class="w">                      </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a><span class="nt">12068:20250225:145309.018 SSH support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a><span class="nt">12068:20250225:145309.018 IPv6 support</span><span class="p">:</span><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a><span class="nt">12068:20250225:145309.018 TLS support</span><span class="p">:</span><span class="w">               </span><span class="l l-Scalar l-Scalar-Plain">YES</span>
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.018 ******************************</span>
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a><span class="nt">12068:20250225:145309.018 using configuration file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-103-14"><a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 [Z3005] query failed</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1146</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Table &#39;zabbix.users&#39; doesn&#39;t exist [select userid from users limit 1]</span>
</span><span id="__span-103-15"><a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a><span class="l l-Scalar l-Scalar-Plain">12068:20250225:145309.027 cannot use database &quot;zabbix&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">database is not a Zabbix database</span>
</span></code></pre></div>
</div>
<p>Let's check the Zabbix server service to see if it's enabled so that it survives a reboot</p>
<div class="admonition info">
<p class="admonition-title">check server status</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">systemctl status zabbix-server</span>
</span></code></pre></div>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="l l-Scalar l-Scalar-Plain">● zabbix-server.service - Zabbix Server</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Loaded</span><span class="nt">: loaded (/usr/lib/systemd/system/zabbix-server.service; enabled; preset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">disabled)</span>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Active</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">active (running) since Tue 2025-02-25 14:53:33 CET; 26min ago</span>
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Main PID</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">12074 (zabbix_server)</span>
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">Tasks</span><span class="nt">: 77 (limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24744)</span>
</span><span id="__span-105-6"><a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">Memory</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">71.5M</span>
</span><span id="__span-105-7"><a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">CPU</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">18.535s</span>
</span><span id="__span-105-8"><a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">CGroup</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/system.slice/zabbix-server.service</span>
</span><span id="__span-105-9"><a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12074 /usr/sbin/zabbix_server -c /etc/zabbix/zabbix_server.conf</span>
</span><span id="__span-105-10"><a id="__codelineno-105-10" name="__codelineno-105-10" href="#__codelineno-105-10"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12075 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ha manager&quot;</span>
</span><span id="__span-105-11"><a id="__codelineno-105-11" name="__codelineno-105-11" href="#__codelineno-105-11"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12076 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service manager</span><span class="w"> </span><span class="c1">#1 [processed 0 events, updated 0 event tags, deleted 0 problems, synced 0 service updates, idle 5.027667 sec during 5.042628 sec]&quot;</span>
</span><span id="__span-105-12"><a id="__codelineno-105-12" name="__codelineno-105-12" href="#__codelineno-105-12"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12077 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">configuration syncer [synced configuration in 0.051345 sec, idle 10 sec]&quot;</span>
</span><span id="__span-105-13"><a id="__codelineno-105-13" name="__codelineno-105-13" href="#__codelineno-105-13"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12078 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alert manager</span><span class="w"> </span><span class="c1">#1 [sent 0, failed 0 alerts, idle 5.030391 sec during 5.031944 sec]&quot;</span>
</span><span id="__span-105-14"><a id="__codelineno-105-14" name="__codelineno-105-14" href="#__codelineno-105-14"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12079 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alerter</span><span class="w"> </span><span class="c1">#1 started&quot;</span>
</span><span id="__span-105-15"><a id="__codelineno-105-15" name="__codelineno-105-15" href="#__codelineno-105-15"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12080 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alerter</span><span class="w"> </span><span class="c1">#2 started&quot;</span>
</span><span id="__span-105-16"><a id="__codelineno-105-16" name="__codelineno-105-16" href="#__codelineno-105-16"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12081 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alerter</span><span class="w"> </span><span class="c1">#3 started&quot;</span>
</span><span id="__span-105-17"><a id="__codelineno-105-17" name="__codelineno-105-17" href="#__codelineno-105-17"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12082 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">preprocessing manager</span><span class="w"> </span><span class="c1">#1 [queued 0, processed 0 values, idle 5.023818 sec during 5.024830 sec]&quot;</span>
</span><span id="__span-105-18"><a id="__codelineno-105-18" name="__codelineno-105-18" href="#__codelineno-105-18"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12083 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lld manager</span><span class="w"> </span><span class="c1">#1 [processed 0 LLD rules, idle 5.017278sec during 5.017574 sec]&quot;</span>
</span><span id="__span-105-19"><a id="__codelineno-105-19" name="__codelineno-105-19" href="#__codelineno-105-19"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12084 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lld worker</span><span class="w"> </span><span class="c1">#1 [processed 1 LLD rules, idle 21.031209 sec during 21.063879 sec]&quot;</span>
</span><span id="__span-105-20"><a id="__codelineno-105-20" name="__codelineno-105-20" href="#__codelineno-105-20"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12085 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lld worker</span><span class="w"> </span><span class="c1">#2 [processed 1 LLD rules, idle 43.195541 sec during 43.227934 sec]&quot;</span>
</span><span id="__span-105-21"><a id="__codelineno-105-21" name="__codelineno-105-21" href="#__codelineno-105-21"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12086 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">housekeeper [startup idle for 30 minutes]&quot;</span>
</span><span id="__span-105-22"><a id="__codelineno-105-22" name="__codelineno-105-22" href="#__codelineno-105-22"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12087 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">timer</span><span class="w"> </span><span class="c1">#1 [updated 0 hosts, suppressed 0 events in 0.017595 sec, idle 59 sec]&quot;</span>
</span><span id="__span-105-23"><a id="__codelineno-105-23" name="__codelineno-105-23" href="#__codelineno-105-23"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12088 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http poller</span><span class="w"> </span><span class="c1">#1 [got 0 values in 0.000071 sec, idle 5 sec]&quot;</span>
</span><span id="__span-105-24"><a id="__codelineno-105-24" name="__codelineno-105-24" href="#__codelineno-105-24"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12089 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">browser poller</span><span class="w"> </span><span class="c1">#1 [got 0 values in 0.000066 sec, idle 5 sec]&quot;</span>
</span><span id="__span-105-25"><a id="__codelineno-105-25" name="__codelineno-105-25" href="#__codelineno-105-25"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12090 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">discovery manager</span><span class="w"> </span><span class="c1">#1 [processing 0 rules, 0 unsaved checks]&quot;</span>
</span><span id="__span-105-26"><a id="__codelineno-105-26" name="__codelineno-105-26" href="#__codelineno-105-26"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12091 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#1 [processed 4 values, 3 triggers in 0.027382 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-27"><a id="__codelineno-105-27" name="__codelineno-105-27" href="#__codelineno-105-27"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12092 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#2 [processed 0 values, 0 triggers in 0.000077 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-28"><a id="__codelineno-105-28" name="__codelineno-105-28" href="#__codelineno-105-28"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12093 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#3 [processed 0 values, 0 triggers in 0.000076 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-29"><a id="__codelineno-105-29" name="__codelineno-105-29" href="#__codelineno-105-29"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12094 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">history syncer</span><span class="w"> </span><span class="c1">#4 [processed 0 values, 0 triggers in 0.000020 sec, idle 1 sec]&quot;</span>
</span><span id="__span-105-30"><a id="__codelineno-105-30" name="__codelineno-105-30" href="#__codelineno-105-30"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12095 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">escalator</span><span class="w"> </span><span class="c1">#1 [processed 0 escalations in 0.011627 sec, idle 3 sec]&quot;</span>
</span><span id="__span-105-31"><a id="__codelineno-105-31" name="__codelineno-105-31" href="#__codelineno-105-31"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12096 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">proxy poller</span><span class="w"> </span><span class="c1">#1 [exchanged data with 0 proxies in 0.000081 sec, idle 5 sec]&quot;</span>
</span><span id="__span-105-32"><a id="__codelineno-105-32" name="__codelineno-105-32" href="#__codelineno-105-32"></a><span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">├─12097 &quot;/usr/sbin/zabbix_server</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self-monitoring [processed data in 0.000068 sec, idle 1 sec]&quot;</span>
</span></code></pre></div></p>
</div>
<p>This concludes our chapter on installing and configuring the Zabbix server with PostgreSQL.</p>
<hr />
<h2 id="installing-the-frontend">Installing the frontend</h2>
<p>Before configuring the front-end, you need to install the necessary packages. If
the Zabbix front-end is hosted on the same server as the Zabbix server, you can
install the packages on the same server as is in our case. It's also perfectly
possible to install the front-end on another server. In that case you only need
to specify the correct IP addresses and open the correct firewall ports.</p>
<hr />
<h3 id="installing-the-frontend-with-nginx">Installing the frontend with NGINX</h3>
<div class="admonition info">
<p class="admonition-title">install frontend packages</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="c1"># dnf install zabbix-nginx-conf zabbix-web-mysql</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a><span class="l l-Scalar l-Scalar-Plain">or if you used PostgreSQL</span>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a><span class="l l-Scalar l-Scalar-Plain"># dnf install zabbix-nginx-conf zabbix-web-pgsql</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="c1"># sudo apt install zabbix-frontend-php php8.3-mysql zabbix-nginx-conf</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="l l-Scalar l-Scalar-Plain">or if you use PostgreSQL</span>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="l l-Scalar l-Scalar-Plain"># sudo apt install zabbix-frontend-php php8.3-pgsql zabbix-nginx-conf</span>
</span></code></pre></div></p>
</div>
<p>This command will install the front-end packages along with the required dependencies
for Nginx. If you are installing the front-end on a different server, make sure to
execute this command on that specific machine.</p>
<p>If you don't remember how to add the repository, have a look at the topic <a href="#adding-the-zabbix-repository">Adding the zabbix repository</a></p>
<p>First thing we have to do is alter the Nginx configuration file so that we don't
use the standard config.</p>
<div class="admonition info">
<p class="admonition-title">edit nginx config for Red Hat</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /etc/nginx/nginx.conf</span>
</span></code></pre></div>
</div>
<p>In this configuration file look for the following block that starts with :</p>
<div class="admonition info">
<p class="admonition-title">original config</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a><span class="l l-Scalar l-Scalar-Plain">listen 80;</span>
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a><span class="l l-Scalar l-Scalar-Plain">listen [::]:80;</span>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="l l-Scalar l-Scalar-Plain">server*name *;</span>
</span><span id="__span-109-5"><a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a><span class="l l-Scalar l-Scalar-Plain">root /usr/share/nginx/html;</span>
</span><span id="__span-109-6"><a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a>
</span><span id="__span-109-7"><a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain"># Load configuration files for the default server block.</span>
</span><span id="__span-109-8"><a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">include /etc/nginx/default.d/*.conf;</span>
</span></code></pre></div>
</div>
<p>Then, comment out the following server block within the configuration file:</p>
<div class="admonition info">
<p class="admonition-title">config after edit</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a><span class="l l-Scalar l-Scalar-Plain"># listen 80;</span>
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a><span class="l l-Scalar l-Scalar-Plain"># listen [::]:80;</span>
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a><span class="l l-Scalar l-Scalar-Plain"># server*name *;</span>
</span><span id="__span-110-5"><a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a><span class="l l-Scalar l-Scalar-Plain"># root /usr/share/nginx/html;</span>
</span></code></pre></div>
</div>
<p>The Zabbix configuration file must now be modified to reflect the current environment.
Open the following file for editing:</p>
<div class="admonition info">
<p class="admonition-title">edit zabbix config for nginx</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="l l-Scalar l-Scalar-Plain">vi /etc/nginx/conf.d/zabbix.conf</span>
</span></code></pre></div>
</div>
<p>And alter the following lines:</p>
<div class="admonition info">
<p class="admonition-title">original config</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a><span class="l l-Scalar l-Scalar-Plain">listen 8080;</span>
</span><span id="__span-112-3"><a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a><span class="l l-Scalar l-Scalar-Plain">server_name example.com;</span>
</span><span id="__span-112-4"><a id="__codelineno-112-4" name="__codelineno-112-4" href="#__codelineno-112-4"></a>
</span><span id="__span-112-5"><a id="__codelineno-112-5" name="__codelineno-112-5" href="#__codelineno-112-5"></a><span class="l l-Scalar l-Scalar-Plain">root    /usr/share/zabbix;</span>
</span><span id="__span-112-6"><a id="__codelineno-112-6" name="__codelineno-112-6" href="#__codelineno-112-6"></a>
</span><span id="__span-112-7"><a id="__codelineno-112-7" name="__codelineno-112-7" href="#__codelineno-112-7"></a><span class="l l-Scalar l-Scalar-Plain">index   index.php;</span>
</span></code></pre></div>
</div>
<p>Replace the first 2 lines with the correct port and domain for your front-end in
case you don't have a domain you can replace <code>servername</code> with <code>_;</code> like in the
example below:</p>
<div class="admonition info">
<p class="admonition-title">config after the edit</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span><span class="w"> </span><span class="c1"># listen 8080; # server*name example.com;</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a><span class="l l-Scalar l-Scalar-Plain">listen 80;</span>
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a><span class="l l-Scalar l-Scalar-Plain">server_name *;</span>
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a>
</span><span id="__span-113-5"><a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">root    /usr/share/zabbix;</span>
</span><span id="__span-113-6"><a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a>
</span><span id="__span-113-7"><a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a><span class="w">         </span><span class="l l-Scalar l-Scalar-Plain">index   index.php;</span>
</span></code></pre></div>
</div>
<p>The web server and PHP-FPM service are now ready for activation and persistent
startup. Execute the following commands to enable and start them immediately:</p>
<div class="admonition info">
<p class="admonition-title">edit nginx config for ubuntu</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo vi /etc/zabbix/nginx.conf</span>
</span></code></pre></div>
</div>
<p>replace the Following lines:</p>
<div class="admonition info">
<p class="admonition-title">original config</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a><span class="l l-Scalar l-Scalar-Plain">#        listen          8080;</span>
</span><span id="__span-115-3"><a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a><span class="l l-Scalar l-Scalar-Plain">#        server_name     example.com;</span>
</span></code></pre></div>
</div>
<p>with :</p>
<div class="admonition info">
<p class="admonition-title">config after edit</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="l l-Scalar l-Scalar-Plain">server {</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="l l-Scalar l-Scalar-Plain">listen xxx.xxx.xxx.xxx:80;</span>
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="l l-Scalar l-Scalar-Plain">server_name &quot;&quot;;</span>
</span></code></pre></div>
</div>
<p>where xxx.xxx.xxx.xxx is your IP or DNS name.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>server_name is normally replaced with the fqdn name of your machine. If you
have no fqdn you can keep it open like in this example.</p>
</details>
<div class="admonition info">
<p class="admonition-title">restart the front-end services</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable php-fpm --now</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a><span class="l l-Scalar l-Scalar-Plain">systemctl enable nginx --now</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl enable nginx php8.3-fpm</span>
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart nginx php8.3-fpm</span>
</span></code></pre></div></p>
</div>
<p>Let's verify if the service is properly started and enabled so that it survives
our reboot next time.</p>
<div class="admonition info">
<p class="admonition-title">check if the service is running</p>
<p><div class="language-yaml highlight"><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="l l-Scalar l-Scalar-Plain">systemctl status nginx</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>● nginx.service - The nginx HTTP and reverse proxy server
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>      Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: disabled)
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>     Drop-In: /usr/lib/systemd/system/nginx.service.d
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a>              └─php-fpm.conf
</span><span id="__span-120-5"><a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>      Active: active (running) since Mon 2023-11-20 11:42:18 CET; 30min ago
</span><span id="__span-120-6"><a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>    Main PID: 1206 (nginx)
</span><span id="__span-120-7"><a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>       Tasks: 2 (limit: 12344)
</span><span id="__span-120-8"><a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a>      Memory: 4.8M
</span><span id="__span-120-9"><a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a>         CPU: 38ms
</span><span id="__span-120-10"><a id="__codelineno-120-10" name="__codelineno-120-10" href="#__codelineno-120-10"></a>      CGroup: /system.slice/nginx.service
</span><span id="__span-120-11"><a id="__codelineno-120-11" name="__codelineno-120-11" href="#__codelineno-120-11"></a>              ├─1206 &quot;nginx: master process /usr/sbin/nginx&quot;
</span><span id="__span-120-12"><a id="__codelineno-120-12" name="__codelineno-120-12" href="#__codelineno-120-12"></a>              └─1207 &quot;nginx: worker process&quot;
</span><span id="__span-120-13"><a id="__codelineno-120-13" name="__codelineno-120-13" href="#__codelineno-120-13"></a>
</span><span id="__span-120-14"><a id="__codelineno-120-14" name="__codelineno-120-14" href="#__codelineno-120-14"></a>Nov 20 11:42:18 zabbix-srv systemd[1]: Starting The nginx HTTP and reverse proxy server...
</span><span id="__span-120-15"><a id="__codelineno-120-15" name="__codelineno-120-15" href="#__codelineno-120-15"></a>Nov 20 11:42:18 zabbix-srv nginx[1204]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span><span id="__span-120-16"><a id="__codelineno-120-16" name="__codelineno-120-16" href="#__codelineno-120-16"></a>Nov 20 11:42:18 zabbix-srv nginx[1204]: nginx: configuration file /etc/nginx/nginx.conf test is successful
</span><span id="__span-120-17"><a id="__codelineno-120-17" name="__codelineno-120-17" href="#__codelineno-120-17"></a>Nov 20 11:42:18 zabbix-srv systemd[1]: Started The nginx HTTP and reverse proxy server.
</span></code></pre></div></p>
</div>
<p>With the service operational and configured for automatic startup, the final preparatory
step involves adjusting the firewall to permit inbound HTTP traffic. Execute the
following commands:</p>
<div class="admonition info">
<p class="admonition-title">configure the firewall</p>
<p>Red Hat</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --add-service=http --permanent</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a><span class="l l-Scalar l-Scalar-Plain">firewall-cmd --reload</span>
</span></code></pre></div>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo ufw allow 80/tcp</span>
</span></code></pre></div></p>
</div>
<p>Open your browser and go to the url or ip of your front-end :</p>
<div class="admonition info">
<p class="admonition-title">front-end configuration</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="l l-Scalar l-Scalar-Plain">http://&lt;ip or dns of the zabbix frontend server&gt;/</span>
</span></code></pre></div>
</div>
<p>If all goes well you should be greeted with a Zabbix welcome page. In case you
have an error check the configuration again or have a look at the nginx log file:</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/log/nginx/error.log</span>
</span></code></pre></div>
</div>
<p>or run the following command :</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="l l-Scalar l-Scalar-Plain">journalctl -xe</span>
</span></code></pre></div>
</div>
<p>This should help you in locating the errors you made.</p>
<p>Upon accessing the appropriate URL, a page resembling the one illustrated below
should appear:</p>
<p><img align="left" alt="overview" src="ch01-basic-installation-setup.png" /></p>
<p><em>1.4 Zabbix
welcome</em></p>
<p>The Zabbix frontend presents a limited array of available localizations, as shown.</p>
<p><img align="left" alt="overview language" src="ch01-basic-installation-setuplanguage.png" /></p>
<p><em>!.5 Zabbix welcome language
choice</em></p>
<p>What if we want to install Chinese as language or another language from the list?
Run the next command to get a list of all locales available for your OS.</p>
<div class="admonition info">
<p class="admonition-title">install language packs</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf list glibc-langpack-*</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="l l-Scalar l-Scalar-Plain">apt-cache search language-pack</span>
</span></code></pre></div></p>
</div>
<p>Users on Ubuntu will probably notice following error `"Locale for language "en_US"
is not found on the web server."``</p>
<div class="admonition info">
<p class="admonition-title">This can be solved easy with the following commands.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>sudo locale-gen en_US.UTF-8
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>sudo update-locale
</span><span id="__span-128-3"><a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>sudo systemctl restart nginx php8.3-fpm
</span></code></pre></div>
</div>
<p>This will give you on Red Hat based systems a list like:</p>
<div class="admonition info">
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="l l-Scalar l-Scalar-Plain">Installed Packages</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a><span class="l l-Scalar l-Scalar-Plain">glibc-langpack-en.x86_64</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a><span class="l l-Scalar l-Scalar-Plain">Available Packages</span>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a><span class="l l-Scalar l-Scalar-Plain">glibc-langpack-aa.x86_64</span>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a><span class="nn">---</span>
</span><span id="__span-129-6"><a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a><span class="l l-Scalar l-Scalar-Plain">glibc-langpack-zu.x86_64</span>
</span></code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">on Ubuntu it will look like :</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kab - translation updates for language Kabyle</span>
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kab-base - translations for language Kabyle</span>
</span><span id="__span-130-3"><a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kn - translation updates for language Kannada</span>
</span><span id="__span-130-4"><a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-kn-base - translations for language Kannada</span>
</span><span id="__span-130-5"><a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a><span class="nn">---</span>
</span><span id="__span-130-6"><a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ko - translation updates for language Korean</span>
</span><span id="__span-130-7"><a id="__codelineno-130-7" name="__codelineno-130-7" href="#__codelineno-130-7"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ko-base - translations for language Korean</span>
</span><span id="__span-130-8"><a id="__codelineno-130-8" name="__codelineno-130-8" href="#__codelineno-130-8"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ku - translation updates for language Kurdish</span>
</span><span id="__span-130-9"><a id="__codelineno-130-9" name="__codelineno-130-9" href="#__codelineno-130-9"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-ku-base - translations for language Kurdish</span>
</span><span id="__span-130-10"><a id="__codelineno-130-10" name="__codelineno-130-10" href="#__codelineno-130-10"></a><span class="l l-Scalar l-Scalar-Plain">language-pack-lt - translation updates for language Lithuanian</span>
</span></code></pre></div>
</div>
<p>Let's search for our Chinese locale to see if it is available. As you can see
the code starts with zh.</p>
<div class="admonition info">
<p class="admonition-title">search for language pack</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf list glibc-langpack-* | grep zh</span>
</span></code></pre></div></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>glibc-langpack-zh.x86_64
</span><span id="__span-132-2"><a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>glibc-langpack-lzh.x86_64
</span></code></pre></div>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>sudo apt-cache search language-pack | grep -i zh
</span></code></pre></div></p>
</div>
<p>The command outputs two lines; however, given the identified language code,
'zh_CN,' only the first package requires installation.</p>
<div class="admonition info">
<p class="admonition-title">install the package</p>
<p>Red Hat
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a><span class="l l-Scalar l-Scalar-Plain">dnf install glibc-langpack-zh.x86_64</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a><span class="l l-Scalar l-Scalar-Plain">sudo apt install language-pack-zh-hans</span>
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a><span class="l l-Scalar l-Scalar-Plain">sudo systemctl restart nginx php8.3-fpm</span>
</span></code></pre></div></p>
</div>
<p>When we return now to our front-end we are able to select the Chinese language,
after a reload of our browser.</p>
<p><img align="left" alt="select language" src="ch01-basic-installation-selectlanguage.png" /></p>
<p><em>1.6 Zabbix select
language</em></p>
<details class="note" open="open">
<summary>Note</summary>
<p>If your preferred language is not available in the Zabbix front-end, don't
worry it simply means that the translation is either incomplete or not yet
available. Zabbix is an open-source project that relies on community contributions
for translations, so you can help improve it by contributing your own translations.</p>
</details>
<p>Visit the translation page at <a href="https://translate.zabbix.com/">https://translate.zabbix.com/</a>
to assist with the translation efforts. Once your translation is complete and reviewed,
it will be included in the next minor patch version of Zabbix.
Your contributions help make Zabbix more accessible and improve the overall
user experience for everyone.</p>
<p>When you're satisfied with the available translations, click <code>Next</code>. You will
then be taken to a screen to verify that all prerequisites are satisfied. If any
prerequisites are not fulfilled, address those issues first. However, if everything
is in order, you should be able to proceed by clicking <code>Next</code>.</p>
<p><img align="left" alt="pre-requisites" src="ch01-basic-installation-prerequisites.png" /></p>
<p><em>1.7 Zabbix
pre-requisites</em></p>
<p>On the next page, you'll configure the database connection parameters:</p>
<ol>
<li><code>Select the Database Type</code>: Choose either MySQL or PostgreSQL depending on your
   setup.</li>
<li><code>Enter the Database Host</code>: Provide the IP address or DNS name of your database
   server. Use port 3306 for MariaDB/MySQL or 5432 for PostgreSQL.</li>
<li><code>Enter the Database Name</code>: Specify the name of your database. In our case, it
   is zabbix. If you are using PostgreSQL, you will also need to provide the schema
   name, which is zabbix_server in our case.</li>
<li><code>Enter the Database User</code>: Input the database user created for the web front-end,
   remember in our basic installation guide we created 2 users zabbix-web and zabbix-srv.
   One for the frontend and the other one for our zabbix server so here we will use 
   the user <code>zabbix-web</code>. Enter the corresponding password for this user.</li>
</ol>
<p>Ensure that the <code>Database TLS encryption</code> option is not selected, and then click
<code>Next step</code> to proceed.</p>
<p><img align="left" alt="dbconnection" src="ch01-basic-installation-dbconnection.png" /></p>
<p><em>1.8 Zabbix
connections</em></p>
<p>You're almost finished with the setup! The final steps involve:</p>
<ol>
<li><code>Assigning an Instance Name</code>: Choose a descriptive name for your Zabbix instance.</li>
<li><code>Selecting the Timezone</code>: Choose the timezone that matches your location or your preferred time zone for the Zabbix interface.</li>
<li><code>Setting the Default Time Format</code>: Select the default time format you prefer to use.</li>
<li><strong>Encrypt connections from Web interface</strong>: I marked this box but you should
   not. This box is to encrypt communications between Zabbix frontend and your
   browser. We will cover this later.
   Once these settings are configured, you can complete the setup and proceed with any final configuration steps as needed.</li>
</ol>
<details class="note" open="open">
<summary>Note</summary>
<p>It's a good practice to set your Zabbix server to the UTC timezone, especially
when managing systems across multiple timezones. Using UTC helps ensure consistency
in time-sensitive actions and events, as the server’s timezone is often used for
calculating and displaying time-related information.</p>
</details>
<p><img align="left" alt="settings" src="ch01-basic-installation-settings.png" /></p>
<p><em>1.9 Zabbix
summary</em></p>
<p>After clicking <code>Next step</code> again, you'll be taken to a page confirming that the
configuration was successful. Click <code>Finish</code> to complete the setup process.</p>
<p><img align="left" alt="settings" src="ch01-basic-installation-final.png" /></p>
<p><em>1.10 Zabbix
install</em></p>
<p>We are now ready to login :</p>
<p><img alt="settings" src="ch01-basic-installation-login.png" /></p>
<p><em>1.11 Zabbix
login</em></p>
<ul>
<li>Login : Admin</li>
<li>Password : zabbix</li>
</ul>
<p>This concludes our topic on setting up the Zabbix server. If you're interested in
securing your front-end, I recommend checking out the topic Securing Zabbix for
additional guidance and best practices.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>If you are not able to safe your configuration at the end make sure SeLinux
is disabled. It is possible that it will block access to certain files or even
the database.</p>
</details>
<h2 id="conclusion">Conclusion</h2>
<p>With this, we conclude our journey through setting up Zabbix and configuring it
with MySQL or PostgreSQL on RHEL-based systems and Ubuntu. We have walked through
the essential steps of preparing the environment, installing the necessary components,
and ensuring a fully functional Zabbix server. From database selection to web frontend
configuration with Nginx, each decision has been aimed at creating a robust and
efficient monitoring solution.</p>
<p>At this stage, your Zabbix instance is operational, providing the foundation for
advanced monitoring and alerting. In the upcoming chapters, we will delve into
fine-tuning Zabbix, optimizing performance, and exploring key features that transform
it into a powerful observability platform.</p>
<p>Now that your Zabbix environment is up and running, let’s take it to the next level.</p>
<h2 id="questions">Questions</h2>
<ol>
<li>Should I choose MySQL or PostgreSQL as the database back-end? Why?</li>
<li>What version of Zabbix should I install for compatibility and stability?</li>
<li>What port does my DB use ?</li>
<li>What Zabbix logs should I check for troubleshooting common issues?</li>
</ol>
<h2 id="useful-urls">Useful URLs</h2>
<ul>
<li><a href="https://www.postgresql.org/docs/current/ddl-priv.html">https://www.postgresql.org/docs/current/ddl-priv.html</a></li>
<li><a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual">https://www.zabbix.com/documentation/current/en/manual</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/installation/requirements">https://www.zabbix.com/documentation/current/en/manual/installation/requirements</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/installation/install_from_packages">https://www.zabbix.com/documentation/current/en/manual/installation/install_from_packages</a></li>
</ul>







  
  






                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Voltar para o topo
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Stichting The Monitoring Penmasters
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.prune", "navigation.path", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.view", "content.tags"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": {"index": "tags.md"}, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": null}</script>
    
    
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../js/print-site.js"></script>
      
        <script src="../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../javascripts/tags-data-attr.js?v=8e9f1ef305a011bd82d366c3ef82d26bf85e8ea7"></script>
      
    
    
        
		
		
    

  </body>
</html>