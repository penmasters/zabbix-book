
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server
& frontend on Ubuntu or Rocky Linux, including security & repo configuration.
">
      
      
        <meta name="author" content="The Monitoring Penmasters">
      
      
        <link rel="canonical" href="https://thezabbixbook.com/fr/ch01-zabbix-components/basic-installation/">
      
      
      
      
        
          <link rel="alternate" href="./" hreflang="fr">
        
          <link rel="alternate" href="../../../nl/ch01-zabbix-components/basic-installation/" hreflang="nl">
        
          <link rel="alternate" href="../../../pt_BR/ch01-zabbix-components/basic-installation/" hreflang="pt_BR">
        
          <link rel="alternate" href="../../../ru/ch01-zabbix-components/basic-installation/" hreflang="ru">
        
          <link rel="alternate" href="/" hreflang="en">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Installation de base - Zabbix Book</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css?v=514f4d1ef40cb7c1bed03bcbf9a447d4f11fa141">
    
      <link rel="stylesheet" href="../../../stylesheets/linewrap.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    
    

    <meta property="og:title" content="Installation de base">
    <meta property="og:description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server &amp; frontend on Ubuntu or Rocky Linux, including security &amp; repo configuration.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thezabbixbook.com/fr/ch01-zabbix-components/basic-installation/">
    <meta property="og:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Installation de base">
    <meta name="twitter:description" content="Step‑by‑step guide to install Zabbix with MariaDB or PostgreSQL, setup server &amp; frontend on Ubuntu or Rocky Linux, including security &amp; repo configuration.">
    <meta name="twitter:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="627">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation-de-base" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    
    
    
    
    <script>
        const gGMC_SELECT_VERSION = "Sélectionner la version";
        const gGMC_TRANSLATE_CTA = "Soutenez-nous et traduisez !";
        const gGMC_PAGE_LOCALE = "fr";
        const gGMC_FILE_LOCALE = "fr";
        const gGMC_TRANSLATE_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2 0 .37-.03.73-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.59 0 1.16-.06 1.72-.16A5.9 5.9 0 0 1 13 19c0-.29.03-.57.07-.85-.32.63-.67 1.24-1.07 1.81-.83-1.2-1.5-2.53-1.91-3.96h3.72a5.95 5.95 0 0 1 2.59-2.4c.06-.53.1-1.06.1-1.6M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m6.34 6H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25-9.56c1.84.63 3.37 1.9 4.33 3.56h-2.95a15.7 15.7 0 0 0-1.38-3.56M23 18v2h-3v3h-2v-3h-3v-2h3v-3h2v3z"/></svg>';
    </script>
    
    

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../" title="Zabbix Book" class="md-header__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zabbix Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation de base
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sélectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../nl/ch01-zabbix-components/basic-installation/" hreflang="nl" class="md-select__link">
              Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../pt_BR/ch01-zabbix-components/basic-installation/" hreflang="pt_BR" class="md-select__link">
              Brazillian Portugese
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/ch01-zabbix-components/basic-installation/" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Partager" aria-label="Partager" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/penmasters/zabbix-book" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Zabbix Book" class="md-nav__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Zabbix Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/penmasters/zabbix-book" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Book Tags
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Supporters-Contributors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supporters and contributors
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch00-getting-started/initial-steps/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 01 : Zabbix components and installation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch02-zabbix-installation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 02 : Zabbix Frontend
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch03-zabbix-proxies/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 03 : Proxies and Webcomponents
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch04-zabbix-collecting-data/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 04 : Collecting data 
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch05-zabbix-triggers/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 05 : Triggers
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch06-zabbix-templates/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 06 : Templates
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch07-zabbix-alerts/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 07 : Alerting
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch08-zabbix-lld/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 08 : LLD
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch09-zabbix-extending/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 09 : Extending Zabbix
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch10-zabbix-discovery/network-host-discovery/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 10 : Discovery
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch11-zabbix-visualisation/graphs/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 11 : Visualisation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch12-zabbix-api/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 12 : Zabbix API
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch13-advanced-security/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 13 : Advanced set up and security
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch14-zabbix-maintenance/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 14 : Maintenance
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch15-zabbix-real-world-examples/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 15 : Real world examples
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Print Site
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installing-the-zabbix-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing the Zabbix database
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the Zabbix database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choosing-a-database-backend-for-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choosing a Database Backend for Zabbix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choosing-the-source-for-database-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choosing the Source for Database Installation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing the MariaDB Database
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing the MariaDB Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-mariadb-server-and-client-from-os-vendor-provided-packages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing MariaDB Server and Client from OS Vendor-Provided Packages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-mariadb-server-and-client-from-official-mariadb-repositories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing MariaDB Server and Client from Official MariaDB Repositories
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing MariaDB Server and Client from Official MariaDB Repositories">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-mariadb-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding the MariaDB Repository
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-mariadb-server-and-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing MariaDB Server and Client
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-mariadb-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Starting the MariaDB Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securiser-la-base-de-donnees-mariadb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sécuriser la base de données MariaDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-zabbix-database-instance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the Zabbix database instance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installation-de-la-base-de-donnees-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation de la base de données PostgreSQL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation de la base de données PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-postgresql-server-and-client-from-os-vendor-provided-packages" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing PostgreSQL Server and Client from OS Vendor-Provided Packages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-postgresql-from-official-postgresql-repositories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing PostgreSQL from Official PostgreSQL Repositories
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing PostgreSQL from Official PostgreSQL Repositories">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-postgresql-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding the PostgreSQL Repository
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-the-postgresql-server-and-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing the PostgreSQL Server and Client
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-postgresql-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Starting the PostgreSQL Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#securisation-de-la-base-de-donnees-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sécurisation de la base de données PostgreSQL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-the-zabbix-database-instance_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the Zabbix database instance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-server-for-zabbix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Preparing the server for Zabbix
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparing the server for Zabbix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-selinux-on-rhel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disable SELinux on RHEL
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-zabbix-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install the Zabbix repository
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install the Zabbix repository">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#red-hat-specific-remarks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Red Hat specific remarks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensuse-specific-remarks" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSUSE specific remarks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-the-zabbix-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding the Zabbix repository
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-and-configuration-of-zabbix-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation and configuration of Zabbix server
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation and configuration of Zabbix server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#populate-the-zabbix-database-instance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Populate the Zabbix database instance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Populate the Zabbix database instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#populate-mariadbmysql-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Populate MariaDB/MySQL Database
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#populate-the-postgresql-database" class="md-nav__link">
    <span class="md-ellipsis">
      
        Populate the PostgreSQL Database
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-firewall-to-allow-zabbix-trapper-connections" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure firewall to allow Zabbix trapper connections
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-zabbix-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Starting the Zabbix server
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-du-frontend" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installation du frontend
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation du frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-the-frontend-with-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing the frontend with NGINX
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Questions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#url-utiles" class="md-nav__link">
    <span class="md-ellipsis">
      
        URL utiles
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


              
              <article class="md-content__inner md-typeset">
                


    <a href="../../../print_page/" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3"/></svg>
    </a>



                  







<nav class="md-tags">
  
    
    <span class="md-tag md-tag-icon" data-tag="beginner">
      Débutant
    </span>
  
</nav>



  
  
    
      
    
    <a href="https://github.com/penmasters/zabbix-book/raw/main/docs/fr/ch01-zabbix-components/basic-installation.md" title="Consulter la source de cette page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="installation-de-base">Installation de base</h1>
<p>In this chapter, we will walk through the process of installing the Zabbix
server. There are many different ways to setup a Zabbix server. We will cover
the most common setups with MariaDB and PostgreSQL on RHEL- and SLES-based
distro's and Ubuntu.</p>
<p>Avant de commencer l'installation, il est important de comprendre l'architecture
de Zabbix. Le serveur Zabbix est structuré de manière modulaire et se compose de
trois éléments principaux, que nous allons examiner en détail.</p>
<ul>
<li>Le serveur Zabbix</li>
<li>Le serveur web Zabbix (frontend)</li>
<li>La base de données Zabbix</li>
</ul>
<div class="admonition abstract">
<p class="admonition-title">Creation of DB users</p>
<p>In our setup we will create 2 DB users <code>zabbix-web</code> and <code>zabbix-srv</code>. The 
zabbix-web user will be used for the frontend to connect to our zabbix database.
The zabbix-srv user will be used by our zabbix server to connect to the database.
This allows us to limit the permissions for every user to only what is strictly
needed.</p>
</div>
<p><img align="left" alt="overview" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-zabbixserver.png" /></p>
<p><em>1.1 Installation Zabbix de base</em></p>
<p>Tous ces composants peuvent être installés sur un seul serveur ou répartis sur
trois serveurs distincts. Le cœur du système est le serveur Zabbix, souvent
appelé « cerveau ». Ce composant est responsable du traitement des calculs des
déclencheurs et de l'envoi des alertes. La base de données sert à stocker la
configuration du serveur Zabbix et toutes les données qu'il recueille. Le
serveur web fournit l'interface utilisateur (front-end) permettant d'interagir
avec le système. Il est important de noter que l'API Zabbix fait partie du
composant frontal, et non du serveur Zabbix lui-même.</p>
<p>Ces composants doivent fonctionner ensemble de manière transparente, comme
l'illustre le diagramme ci-dessus. Le serveur Zabbix doit lire les
configurations et stocker les données de surveillance dans la base de données,
tandis que le frontal doit avoir accès à la lecture et à l'écriture des données
de configuration. En outre, le frontal doit pouvoir vérifier l'état du serveur
Zabbix et récupérer d'autres informations nécessaires pour assurer un
fonctionnement sans soucis.</p>
<p>Pour notre installation, nous utiliserons deux machines virtuelles (VM) : une VM
hébergera le serveur Zabbix et l'interface web Zabbix (frontend) , tandis que la
seconde VM hébergera la base de données Zabbix.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>It is perfectly possible to install all components on one single VM or every component
on a separate VM.
The reason why we split the DB in our example is because the database will probably be
the first component giving you performance headaches. It is also the component
that needs some extra attention when we split it from the other components,
so for this reason we have chosen in this example to split the database 
from the rest of the setup.</p>
</details>
<p>Les sujets suivants seront abordés :</p>
<ul>
<li>Installer notre base de données MariaDB.</li>
<li>Installer notre base de données PostgreSQL.</li>
<li>Installation du serveur Zabbix.</li>
<li>Installer le serveur web Zabbix (frontend).</li>
</ul>
<hr />
<h2 id="installing-the-zabbix-database">Installing the Zabbix database</h2>
<h3 id="choosing-a-database-backend-for-zabbix">Choosing a Database Backend for Zabbix</h3>
<p>A critical decision when managing Zabbix installations is selecting the database
backend. Zabbix supports several database options: MySQL/Percona, MariaDB,
PostgreSQL (including TimescaleDB), and Oracle (up to Zabbix 7.0).</p>
<details class="warning" open="open">
<summary>Oracle Database deprecation</summary>
<p>Zabbix 7.0 marks the final release to offer support for Oracle Database.
Consequently, systems running Zabbix 7.0 or any prior version must undertake
a database migration to either PostgreSQL, MySQL, or a compatible fork such
as MariaDB before upgrading to a later Zabbix release. This migration is a
mandatory step to ensure continued functionality and compatibility with future
Zabbix versions.</p>
</details>
<p>All supported databases perform similarly under typical Zabbix workloads, and
Zabbix treats them equally in terms of functionality. As such, the choice
primarily depends on your or your team’s familiarity with a particular database
system. One notable exception is TimescaleDB, a PostgreSQL extension optimized
for time-series data. This makes it especially well-suited for monitoring
applications like Zabbix, which handle large volumes of timestamped data.</p>
<p>In large-scale environments with high-frequency data collection, TimescaleDB can
deliver significant performance benefits, including improved query speeds and
built-in compression to reduce storage requirements. However, these advantages
come with added complexity during installation and a few restrictions on
historical data retention.</p>
<details class="tip" open="open">
<summary>TimescaleDB installation</summary>
<p>Given its advanced nature, TimescaleDB is not essential for most Zabbix users.
As such, its installation is beyond the scope of this chapter. If you plan to
use TimescaleDB, refer to <a href="../../ch13-advanced-security/partitioning-postgresql-database/">Partitioning PostgreSQL with TimescaleDB</a>
for detailed guidance after installing PostgreSQL.</p>
</details>
<hr />
<h3 id="choosing-the-source-for-database-installation">Choosing the Source for Database Installation</h3>
<p>In this chapter we will focus on installing MariaDB and PostgreSQL, as they are
the most commonly used databases with Zabbix. For MySQL or Percona
installations, except for the package installation commands, the steps are very
similar to MariaDB.</p>
<p>When installing MariaDB or PostgreSQL you must determine the source from which
you will want to install the database server. Two primary options are available:</p>
<ol>
<li><strong>Vendor-Provided Packages</strong></li>
</ol>
<dl>
<dd>
<p>These are included in the software repositories of most Linux distributions
and are maintained by the distribution vendor.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Simplified installation:</strong> Packages are readily available via the
  distribution’s package manager.</li>
<li><strong>Vendor support:</strong> For enterprise distributions (e.g., RHEL, SLES),
  active subscriptions include official support.</li>
<li><strong>Compatibility:</strong> Guaranteed integration with other system packages and
  dependencies.</li>
<li><strong>Distribution-specific optimizations:</strong> Includes tailored configurations
    (e.g., logrotate, bash completion,...).</li>
<li><strong>Long-term maintenance:</strong> Security and bug fixes are backported by the
    vendor for the duration of the distribution’s support lifecycle.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Version lock-in:</strong> Major distribution upgrades may automatically introduce
    newer database versions, potentially requiring compatibility checks with
    Zabbix.</li>
<li><strong>Vendor modifications:</strong> Default configurations, log directories, and data
    paths may be altered to align with distribution-specific standards.</li>
</ul>
</dd>
</dl>
<ol start="2">
<li><strong>Official MariaDB/PostgreSQL Repositories</strong></li>
</ol>
<dl>
<dd>
<p>These repositories provide packages directly from MariaDB/PostgreSQL and offer
access to the latest stable releases.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Up-to-date versions:</strong> Immediate access to the latest features, security
  patches, and bug fixes. However, make sure Zabbix is compatible with the
  chosen version.</li>
<li><strong>Enterprise support:</strong> Option to purchase MariaDB Enterprise or Enterprise DB
  respectively, which includes professional support and additional features.</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Manual version management:</strong> Users must proactively monitor and upgrade 
  to new major versions to ensure continued security and bug fix coverage.</li>
</ul>
</dd>
</dl>
<details class="warning" open="open">
<summary>Database version compatibility</summary>
<p>Whether you plan to use the OS vendor-provided packages or the official 
database-vendor packages, ensure that the database version is supported
by your Zabbix version to avoid potential integration issues. 
Check the <a href="https://www.zabbix.com/documentation/current/en/manual/installation/requirements#required-software">Zabbix documentation</a>
for the latest supported versions.</p>
</details>
<p>Before installing the database software, ensure that the server(s) meet the
configuration requirements outlined in the previous section: <a href="../../ch00-getting-started/Requirements/">System
Requirements</a>.</p>
<hr />
<h3 id="installing-the-mariadb-database">Installing the MariaDB Database</h3>
<p>In this section we will install the MariaDB server and -client packages. This
will provide the necessary components to run and manage MariaDB as your Zabbix
database backend.</p>
<p>If you prefer to use PostgreSQL as your database backend, you can skip this
section and proceed to the <a href="#installing-the-postgresql-database"><em>Installing the PostgreSQL
Database</em></a> section.</p>
<p>???+ tip "MySQL/Percona" If you prefer to use MySQL or Percona instead of
MariaDB, the installation and configuration steps are very similar. Generally,
you would replace <code>mariadb</code> with <code>mysql</code> in the package names and commands.</p>
<h4 id="installing-mariadb-server-and-client-from-os-vendor-provided-packages">Installing MariaDB Server and Client from OS Vendor-Provided Packages</h4>
<p>To install the distribution default MariaDB server and client, execute the
following command:</p>
<div class="admonition info">
<p class="admonition-title">Install distribution version of Mariadb</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>mariadb-server
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>zypper<span class="w"> </span>install<span class="w"> </span>mariadb<span class="w"> </span>mariadb-client
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>mariadb-server
</span></code></pre></div></p>
</div>
<p>This command will download and install both the server and client packages,
enabling you to set up, configure, and interact with your MariaDB database. Once
the installation is complete, you can proceed to the <a href="#starting-the-mariadb-database"><em>Starting the MariaDB
database</em></a> section.</p>
<hr />
<h4 id="installing-mariadb-server-and-client-from-official-mariadb-repositories">Installing MariaDB Server and Client from Official MariaDB Repositories</h4>
<p>If you prefer to install MariaDB from the official MariaDB repositories instead
of the OS vendor-provided packages, the first step is to add the MariaDB
repository to your system.</p>
<hr />
<h5 id="adding-the-mariadb-repository">Adding the MariaDB Repository</h5>
<p>Pour créer le fichier de dépôt MariaDB, exécutez la commande suivante dans votre
terminal :</p>
<div class="admonition info">
<p class="admonition-title">Define the MariaDB repository</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>vi<span class="w"> </span>/etc/yum.repos.d/mariadb.repo
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/zypp/repos.d/mariadb.repo
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>apt-transport-https<span class="w"> </span>curl
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/apt/keyrings
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>sudo<span class="w"> </span>curl<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/mariadb-keyring.pgp<span class="w"> </span><span class="s1">&#39;https://mariadb.org/mariadb_release_signing_key.pgp&#39;</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/apt/sources.list.d/mariadb.sources
</span></code></pre></div></p>
</div>
<p>Cela ouvrira un éditeur de texte dans lequel vous pourrez saisir les détails de
la configuration du dépôt. Une fois le dépôt configuré, vous pouvez procéder à
l'installation de MariaDB en utilisant votre gestionnaire de paquets.</p>
<p>The latest config can be found here:
<a href="https://mariadb.org/download/?t=repo-config">https://mariadb.org/download/?t=repo-config</a></p>
<p>Here's an example configuration for MariaDB 11.4 repositories:</p>
<div class="admonition example">
<p class="admonition-title">Mariadb repository configuration</p>
<p>Red Hat
<div class="language-ini highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># MariaDB 11.4 RedHatEnterpriseLinux repository list - created 2025-02-21 10:15 UTC</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">[mariadb]</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">MariaDB</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1"># rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1"># baseurl = https://rpm.mariadb.org/11.4/rhel/$releasever/$basearch</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="na">baseurl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://mirror.bouwhuis.network/mariadb/yum/11.4/rhel/$releasever/$basearch</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="c1"># gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="na">gpgkey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://mirror.bouwhuis.network/mariadb/yum/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="na">gpgcheck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
</span></code></pre></div></p>
<p>SUSE
<div class="language-ini highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># MariaDB 11.4 openSUSE repository list - created 2025-12-29 14:34 UTC</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">[mariadb]</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">MariaDB</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="c1"># rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c1"># baseurl = https://rpm.mariadb.org/11.4/opensuse/$releasever/$basearch</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1"># baseurl = https://rpm.mariadb.org/11.4/opensuse/$releasever/$basearch</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="na">baseurl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://mirror.bouwhuis.network/mariadb/yum/11.4/opensuse/$releasever/$basearch</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="c1"># gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="na">gpgkey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://mirror.bouwhuis.network/mariadb/yum/RPM-GPG-KEY-MariaDB</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="na">gpgcheck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># MariaDB 11.4 repository list - created 2025-02-21 11:42 UTC</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1"># https://mariadb.org/download/</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nt">X-Repolib-Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MariaDB</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nt">Types</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deb</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="c1"># deb.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="c1"># URIs: https://deb.mariadb.org/11.4/ubuntu</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="nt">URIs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://mirror.bouwhuis.network/mariadb/repo/11.4/ubuntu</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="nt">Suites</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">noble</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="nt">Components</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main main/debug</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="nt">Signed-By</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/apt/keyrings/mariadb-keyring.pgp</span>
</span></code></pre></div></p>
</div>
<p>After saving the file, ensure that everything is properly set up and that your
preferred MariaDB version is compatible with your Zabbix version to avoid
potential integration issues.</p>
<hr />
<h5 id="installing-mariadb-server-and-client">Installing MariaDB Server and Client</h5>
<p>With the MariaDB repository configured, you are now ready to install the MariaDB
server and client packages. This will provide the necessary components to run
and manage your database.</p>
<p>Pour installer le serveur et le client MariaDB, exécutez la commande suivante :</p>
<div class="admonition info">
<p class="admonition-title">Install MariaDB from official repository</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>MariaDB-server
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>rpm<span class="w"> </span>--import<span class="w"> </span>https://mirror.bouwhuis.network/mariadb/yum/RPM-GPG-KEY-MariaDB
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>sudo<span class="w"> </span>zypper<span class="w"> </span>install<span class="w"> </span>MariaDB-server<span class="w"> </span>MariaDB-client
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>mariadb-server
</span></code></pre></div></p>
</div>
<p>This command will download and install both the server and client packages,
enabling you to set up, configure, and interact with your MariaDB database. Once
the installation is complete, you can proceed to the <a href="#starting-the-mariadb-database"><em>Starting the MariaDB
database</em></a> section.</p>
<hr />
<h4 id="starting-the-mariadb-database">Starting the MariaDB Database</h4>
<p>Maintenant que MariaDB est installé, nous devons activer le service pour qu'il
démarre automatiquement au démarrage et le démarrer immédiatement. Pour ce
faire, utilisez la commande suivante :</p>
<div class="admonition info">
<p class="admonition-title">Enable MariaDB service</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>mariadb<span class="w"> </span>--now
</span></code></pre></div>
</div>
<p>This command will both enable and start the MariaDB service and since this will
be the first time the service is started, it will initialize the database
directory. With the MariaDB service now up and running, you can verify that the
installation was successful by checking the version of MariaDB using the
following command:</p>
<div class="admonition info">
<p class="admonition-title">Vérifier la version de Mariadb</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>mariadb<span class="w"> </span>-V
</span></code></pre></div>
</div>
<p>The expected output should resemble this:</p>
<details class="example" open="open">
<summary>MariaDB version example</summary>
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="gp">localhost:~ $ </span>mariadb<span class="w"> </span>-V
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="go">mariadb  Ver 15.1 Distrib 10.11.14-MariaDB, for Linux (x86_64) using  EditLine wrapper</span>
</span></code></pre></div>
</details>
<p>Pour vous assurer que le service MariaDB fonctionne correctement, vous pouvez
vérifier son état à l'aide de la commande suivante :</p>
<div class="admonition info">
<p class="admonition-title">Obtenir l'état de Mariadb</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>mariadb
</span></code></pre></div>
</div>
<p>Vous devriez voir une sortie similaire à celle-ci, indiquant que le service
MariaDB est actif et fonctionne :</p>
<details class="example" open="open">
<summary>Mariadb service status example</summary>
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="gp">localhost:~ $ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>mariadb
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="go">● mariadb.service - MariaDB database server</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="go">     Loaded: loaded (/usr/lib/systemd/system/mariadb.service; enabled; preset: disabled)</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="go">     Active: active (running) since Wed 2025-12-03 00:16:04 CET; 5s ago</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="go">       Docs: man:mysqld(8)</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="go">             https://mariadb.com/kb/en/library/systemd/</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="go">    Process: 11148 ExecStartPre=/usr/lib/mysql/mysql-systemd-helper install (code=exited, status=0/SUCCESS)</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="go">    Process: 11155 ExecStartPre=/usr/lib/mysql/mysql-systemd-helper upgrade (code=exited, status=0/SUCCESS)</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="go">   Main PID: 11162 (mysqld)</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="go">     Status: &quot;Taking your SQL requests now...&quot;</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="go">      Tasks: 18 (limit: 4670)</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="go">        CPU: 340ms</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="go">     CGroup: /system.slice/mariadb.service</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="go">             └─11162 /usr/sbin/mysqld --defaults-file=/etc/my.cnf --user=mysql --socket=/run/mysql/mysql.sock</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: [Note] Plugin &#39;FEEDBACK&#39; is disabled.</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: [Note] Server socket created on IP: &#39;127.0.0.1&#39;, port: &#39;3306&#39;.</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: [Note] /usr/sbin/mysqld: ready for connections.</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: Version: &#39;10.11.14-MariaDB&#39;  socket: &#39;/run/mysql/mysql.sock&#39;  port: 3306  MariaDB package</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: [Note] InnoDB: Buffer pool(s) load completed at 251203  0:16:04</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="go">Dec 03 00:16:04 localhost.localdomain systemd[1]: Started MariaDB database server.</span>
</span></code></pre></div>
</details>
<p>Ceci confirme que votre serveur MariaDB est opérationnel et prêt à être
configuré.</p>
<hr />
<h4 id="securiser-la-base-de-donnees-mariadb">Sécuriser la base de données MariaDB</h4>
<p>Pour améliorer la sécurité de votre serveur MariaDB, il est essentiel de
supprimer les bases de données de test inutiles, les utilisateurs anonymes, et
de définir un mot de passe root. Cela peut être fait en utilisant le script
mariadb-secure-installation, qui fournit un guide étape par étape pour sécuriser
votre base de données.</p>
<p>Exécutez la commande suivante :</p>
<div class="admonition info">
<p class="admonition-title">Installation sécurisée de Mariadb</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>sudo<span class="w"> </span>mariadb-secure-installation
</span></code></pre></div>
</div>
<p>Le script mariadb-secure-installation vous guidera à travers plusieurs étapes
clés :</p>
<ol>
<li>Définir un mot de passe root si ce n'est pas déjà fait.</li>
<li>Supprimer les utilisateurs anonymes.</li>
<li>Interdire les connexions root à distance.</li>
<li>Supprimer la base de données de test.</li>
<li>Recharger les tables de privilèges pour s'assurer que les modifications sont
   prises en compte.</li>
</ol>
<p>Once complete, your MariaDB instance will be significantly more secure.</p>
<div class="admonition example">
<p class="admonition-title">mariadb-secure-installation example output</p>
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="gp">localhost:~ $ </span>sudo<span class="w"> </span>mariadb-secure-installation
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="go">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="go">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="go">In order to log into MariaDB to secure it, we&#39;ll need the current</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="go">password for the root user. If you&#39;ve just installed MariaDB, and</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="go">haven&#39;t set the root password yet, you should just press enter here.</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="go">Enter current password for root (enter for none):</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="go">OK, successfully used password, moving on...</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="go">Setting the root password or using the unix_socket ensures that nobody</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="go">can log into the MariaDB root user without the proper authorisation.</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="go">You already have your root account protected, so you can safely answer &#39;n&#39;.</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="go">Switch to unix_socket authentication [Y/n] n</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="go"> ... skipping.</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="go">You already have your root account protected, so you can safely answer &#39;n&#39;.</span>
</span><span id="__span-18-21"><a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>
</span><span id="__span-18-22"><a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a><span class="go">Change the root password? [Y/n] y</span>
</span><span id="__span-18-23"><a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a><span class="go">New password:</span>
</span><span id="__span-18-24"><a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a><span class="go">Re-enter new password:</span>
</span><span id="__span-18-25"><a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a><span class="go">Password updated successfully!</span>
</span><span id="__span-18-26"><a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a><span class="go">Reloading privilege tables..</span>
</span><span id="__span-18-27"><a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a><span class="go"> ... Success!</span>
</span><span id="__span-18-28"><a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>
</span><span id="__span-18-29"><a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>
</span><span id="__span-18-30"><a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a><span class="go">By default, a MariaDB installation has an anonymous user, allowing anyone</span>
</span><span id="__span-18-31"><a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a><span class="go">to log into MariaDB without having to have a user account created for</span>
</span><span id="__span-18-32"><a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a><span class="go">them.  This is intended only for testing, and to make the installation</span>
</span><span id="__span-18-33"><a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a><span class="go">go a bit smoother.  You should remove them before moving into a</span>
</span><span id="__span-18-34"><a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a><span class="go">production environment.</span>
</span><span id="__span-18-35"><a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>
</span><span id="__span-18-36"><a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a><span class="go">Remove anonymous users? [Y/n] y</span>
</span><span id="__span-18-37"><a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a><span class="go"> ... Success!</span>
</span><span id="__span-18-38"><a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>
</span><span id="__span-18-39"><a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a><span class="go">Normally, root should only be allowed to connect from &#39;localhost&#39;.  This</span>
</span><span id="__span-18-40"><a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a><span class="go">ensures that someone cannot guess at the root password from the network.</span>
</span><span id="__span-18-41"><a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>
</span><span id="__span-18-42"><a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a><span class="go">Disallow root login remotely? [Y/n] y</span>
</span><span id="__span-18-43"><a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a><span class="go"> ... Success!</span>
</span><span id="__span-18-44"><a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>
</span><span id="__span-18-45"><a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a><span class="go">By default, MariaDB comes with a database named &#39;test&#39; that anyone can</span>
</span><span id="__span-18-46"><a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a><span class="go">access.  This is also intended only for testing, and should be removed</span>
</span><span id="__span-18-47"><a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a><span class="go">before moving into a production environment.</span>
</span><span id="__span-18-48"><a id="__codelineno-18-48" name="__codelineno-18-48" href="#__codelineno-18-48"></a>
</span><span id="__span-18-49"><a id="__codelineno-18-49" name="__codelineno-18-49" href="#__codelineno-18-49"></a><span class="go">Remove test database and access to it? [Y/n] y</span>
</span><span id="__span-18-50"><a id="__codelineno-18-50" name="__codelineno-18-50" href="#__codelineno-18-50"></a><span class="go"> - Dropping test database...</span>
</span><span id="__span-18-51"><a id="__codelineno-18-51" name="__codelineno-18-51" href="#__codelineno-18-51"></a><span class="go"> ... Success!</span>
</span><span id="__span-18-52"><a id="__codelineno-18-52" name="__codelineno-18-52" href="#__codelineno-18-52"></a><span class="go"> - Removing privileges on test database...</span>
</span><span id="__span-18-53"><a id="__codelineno-18-53" name="__codelineno-18-53" href="#__codelineno-18-53"></a><span class="go"> ... Success!</span>
</span><span id="__span-18-54"><a id="__codelineno-18-54" name="__codelineno-18-54" href="#__codelineno-18-54"></a>
</span><span id="__span-18-55"><a id="__codelineno-18-55" name="__codelineno-18-55" href="#__codelineno-18-55"></a><span class="go">Reloading the privilege tables will ensure that all changes made so far</span>
</span><span id="__span-18-56"><a id="__codelineno-18-56" name="__codelineno-18-56" href="#__codelineno-18-56"></a><span class="go">will take effect immediately.</span>
</span><span id="__span-18-57"><a id="__codelineno-18-57" name="__codelineno-18-57" href="#__codelineno-18-57"></a>
</span><span id="__span-18-58"><a id="__codelineno-18-58" name="__codelineno-18-58" href="#__codelineno-18-58"></a><span class="go">Reload privilege tables now? [Y/n] y</span>
</span><span id="__span-18-59"><a id="__codelineno-18-59" name="__codelineno-18-59" href="#__codelineno-18-59"></a><span class="go"> ... Success!</span>
</span><span id="__span-18-60"><a id="__codelineno-18-60" name="__codelineno-18-60" href="#__codelineno-18-60"></a>
</span><span id="__span-18-61"><a id="__codelineno-18-61" name="__codelineno-18-61" href="#__codelineno-18-61"></a><span class="go">Cleaning up...</span>
</span><span id="__span-18-62"><a id="__codelineno-18-62" name="__codelineno-18-62" href="#__codelineno-18-62"></a>
</span><span id="__span-18-63"><a id="__codelineno-18-63" name="__codelineno-18-63" href="#__codelineno-18-63"></a><span class="go">All done!  If you&#39;ve completed all of the above steps, your MariaDB</span>
</span><span id="__span-18-64"><a id="__codelineno-18-64" name="__codelineno-18-64" href="#__codelineno-18-64"></a><span class="go">installation should now be secure.</span>
</span><span id="__span-18-65"><a id="__codelineno-18-65" name="__codelineno-18-65" href="#__codelineno-18-65"></a>
</span><span id="__span-18-66"><a id="__codelineno-18-66" name="__codelineno-18-66" href="#__codelineno-18-66"></a><span class="go">Thanks for using MariaDB!</span>
</span></code></pre></div>
</div>
<p>You are now ready to configure the database for Zabbix.</p>
<hr />
<h4 id="creating-the-zabbix-database-instance">Creating the Zabbix database instance</h4>
<p>MariaDB étant maintenant configuré et sécurisé, nous pouvons passer à la
création de la base de données pour Zabbix. Cette base de données stockera
toutes les données nécessaires relatives à votre serveur Zabbix, y compris les
informations de configuration et les données de surveillance.</p>
<p>Suivez ces étapes pour créer la base de données Zabbix :</p>
<dl>
<dt>Connectez-vous à l'interpréteur de commandes MariaDB en tant qu'utilisateur root</dt>
<dd>Il vous sera demandé d'entrer le mot de passe root que vous avez défini lors
de l'installation de mariadb-secure-installation.</dd>
</dl>
<div class="admonition info">
<p class="admonition-title">Entrez dans Mariadb en tant qu'utilisateur root</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>mariadb<span class="w"> </span>-uroot<span class="w"> </span>-p
</span></code></pre></div>
</div>
<p>Une fois que vous êtes connecté au shell MariaDB, exécutez la commande suivante
pour créer une base de données pour Zabbix :</p>
<div class="admonition info">
<p class="admonition-title">Créer la base de données</p>
<div class="language-mysql highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="k">none</span><span class="p">)</span><span class="err">]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">zabbix</span><span class="w"> </span><span class="k">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">utf8mb4</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8mb4_bin</span><span class="p">;</span>
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>What is utf8mb4</summary>
<p>utf8mb4 is a proper implementation of UTF-8 in MySQL/MariaDB, supporting all
 Unicode characters, including emojis. The older utf8 charset in MySQL/MariaDB
 only supports up to three bytes per character and is not a true UTF-8 implementation,
 which is why utf8mb4 is recommended.</p>
</details>
<p>This command creates a new database named <code>zabbix</code> with the UTF-8 character set,
which is required for Zabbix.</p>
<p>Create a dedicated user for Zabbix and grant the necessary privileges: Next, you
need to create a user that Zabbix will use to access the database. Replace
<code>&lt;password&gt;</code> with a strong password of your choice.</p>
<div class="admonition info">
<p class="admonition-title">Créer des utilisateurs et accorder des privilèges</p>
<div class="language-mysql highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">MariaDB</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="k">none</span><span class="p">)</span><span class="err">]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;zabbix-web&#39;</span><span class="nv">@&#39;&lt;zabbix frontend ip&gt;&#39;</span><span class="w"> </span><span class="k">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">MariaDB</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="k">none</span><span class="p">)</span><span class="err">]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;zabbix-srv&#39;</span><span class="nv">@&#39;&lt;zabbix server ip&gt;&#39;</span><span class="w"> </span><span class="k">IDENTIFIED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;&lt;password&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="n">MariaDB</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="k">none</span><span class="p">)</span><span class="err">]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">zabbix</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;zabbix-srv&#39;</span><span class="nv">@&#39;&lt;zabbix server ip&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="n">MariaDB</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="k">none</span><span class="p">)</span><span class="err">]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">DELETE</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">zabbix</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;zabbix-web&#39;</span><span class="nv">@&#39;&lt;zabbix server ip&gt;&#39;</span><span class="p">;</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="n">MariaDB</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="k">none</span><span class="p">)</span><span class="err">]</span><span class="o">&gt;</span><span class="w"> </span><span class="k">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</span></code></pre></div>
<ul>
<li>Replace <code>&lt;zabbix server ip&gt;</code> with the actual IP address of your server
  where the Zabbix server  will be installed.</li>
<li>Replace <code>&lt;zabbix frontend ip&gt;</code> with the actual IP address of your server
  where the Zabbix frontend will be installed.</li>
</ul>
<p>If both components are installed on the same server, use the same IP address.</p>
<details class="tip" open="open">
<summary>Tip</summary>
<p>If your Zabbix server, frontend and database are on the same machine, you can replace
<code>&lt;zabbix server ip&gt;</code> and <code>&lt;zabbix frontend ip&gt;</code> with <code>localhost</code> or <code>127.0.0.1</code>.</p>
</details>
</div>
<p>This creates new users <code>zabbix-web</code> and <code>zabbix-srv</code>, grants them access to the
Zabbix database, and ensures that the privileges are applied immediately.</p>
<p>At this point, your Zabbix database is ready, but before it can actually be used
by Zabbix, we still need to populate the database with the necessary tables and
initial data, but that will be covered in the next section when we install the
Zabbix server.</p>
<p>If you intent to install Zabbix server on a different machine than the one
hosting the database you will need to open the host firewall to allow incoming
connections to the database server. By default, MariaDB listens on port 3306.</p>
<div class="admonition info">
<p class="admonition-title">Add firewall rules</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>mysql<span class="w"> </span>--permanent
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">3306</span>/tcp
</span></code></pre></div></p>
</div>
<p>This concludes our installation of the MariaDB. You can now proceed to
<a href="#preparing-the-server-for-zabbix">Preparing the Zabbix server</a>.</p>
<hr />
<h3 id="installation-de-la-base-de-donnees-postgresql">Installation de la base de données PostgreSQL</h3>
<p>Alternatively to MariaDB/MySQL, you can choose to use PostgreSQL as the database
backend for Zabbix. Similar to MariaDB, PostgreSQL can be installed using either
the OS vendor-provided packages or the official PostgreSQL repositories.</p>
<p>If you already have installed MariaDB in the previous section, you can skip this
section.</p>
<p>As of writing PostgreSQL 13-17 are supported by Zabbix. Check the Zabbix
documentation for an up-to-date list of supported versions for your Zabbix
version. Usually it's a good idea to go with the latest version that is
supported by Zabbix.</p>
<details class="tip" open="open">
<summary>TimescaleDB extension</summary>
<p>Zabbix also supports the extension TimescaleDB but due to its advanced nature, 
we won't cover it in this chapter. Refer to <a href="../../ch13-advanced-security/partitioning-postgresql-database/"><em>Partitioning PostgreSQL with TimescaleDB</em></a>
for detailed instructions on that topic. </p>
<p>Do note that if you want to use TimescaleDB RPM packages provided
by Timescale, you will need to install PostgreSQL from the official
PostgreSQL repositories instead of the OS vendor-provided packages.
If you choose to install PostgreSQL from the OS vendor-provided packages,
you will need to compile and install the TimescaleDB extension from source.</p>
</details>
<hr />
<h4 id="installing-postgresql-server-and-client-from-os-vendor-provided-packages">Installing PostgreSQL Server and Client from OS Vendor-Provided Packages</h4>
<p>To install the distribution default PostgreSQL server, execute the following
commands:</p>
<div class="admonition info">
<p class="admonition-title">Installer le serveur PostgreSQL</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>postgresql-server<span class="w"> </span>postgresql-client<span class="w"> </span>postgresql-contrib
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>zypper<span class="w"> </span>install<span class="w"> </span>postgresql-server<span class="w"> </span>postgresql<span class="w"> </span>postgresql-contrib
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>postgresql<span class="w"> </span>postgresql-client<span class="w"> </span>postgresql-contrib
</span></code></pre></div></p>
</div>
<p>This command will download and install both the server and client packages,
enabling you to set up, configure, and interact with your PostgreSQL database.</p>
<div class="admonition warning">
<p class="admonition-title">Database initialization required on Red Hat</p>
<p>Due to policies for Red Hat family distributions, the PostgreSQL service
does not initialize an empty database required for PostgreSQL to function.
So for Red Hat we need to initialize an empty database before continuing:</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>postgresql-setup<span class="w"> </span>--initdb<span class="w"> </span>--unit<span class="w"> </span>postgresql
</span></code></pre></div></p>
<p>On SUSE and Ubuntu the OS provided SystemD service will automatically initialize
an empty database on first startup.</p>
</div>
<p>Once the installation is complete, you can proceed to the <a href="#starting-the-postgresql-database"><em>Starting the
PostgreSQL Database</em></a> section.</p>
<hr />
<h4 id="installing-postgresql-from-official-postgresql-repositories">Installing PostgreSQL from Official PostgreSQL Repositories</h4>
<p>If you prefer to install PostgreSQL from the official PostgreSQL repositories
instead of the OS vendor-provided packages, the first step is to add the
PostgreSQL repository to your system.</p>
<hr />
<h5 id="adding-the-postgresql-repository">Adding the PostgreSQL Repository</h5>
<p>Set up the PostgreSQL repository with the following commands:</p>
<p>Check
<a href="https://www.postgresql.org/download/linux/">https://www.postgresql.org/download/linux/</a>
for more information.</p>
<div class="admonition info">
<p class="admonition-title">Ajouter le dépôt PostgreSQL</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1"># Install the repository RPM:</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>dnf<span class="w"> </span>install<span class="w"> </span>https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="c1"># Disable the built-in PostgreSQL module:</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>dnf<span class="w"> </span>-qy<span class="w"> </span>module<span class="w"> </span>disable<span class="w"> </span>postgresql
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># Import the repository signing key:</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>rpm<span class="w"> </span>--import<span class="w"> </span>https://zypp.postgresql.org/keys/PGDG-RPM-GPG-KEY-SLES16
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="c1"># Install the repository RPM:</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>zypper<span class="w"> </span>install<span class="w"> </span>https://download.postgresql.org/pub/repos/zypp/reporpms/SLES-16-x86_64/pgdg-suse-repo-latest.noarch.rpm
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="c1"># Update the package lists:</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>zypper<span class="w"> </span>refresh
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">openSUSE Leap</p>
<p>Since the official PostgreSQL packages are specifically built for use on 
SUSE Linux Enterprise Server (SLES), you will get an error trying to install the
repository on openSUSE Leap. We can however safely ignore this problem by
choosing to "break the package by ignoring some of its dependencies" as
long as you match the SLES version with your openSUSE version:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>Problem: 1: nothing provides &#39;sles-release&#39; needed by the to be installed pgdg-suse-repo-42.0-48PGDG.noarch
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a> Solution 1: do not install pgdg-suse-repo-42.0-48PGDG.noarch
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a> Solution 2: break pgdg-suse-repo-42.0-48PGDG.noarch by ignoring some of its dependencies
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>Choose from above solutions by number or cancel [1/2/c/d/?] (c): 2
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>Suse Linux Enterprise Server</summary>
<p>On SUSE Linux Enterprise Server (SLES), ensure you are subscribed to the
"SUSE Package Hub extension" repository to access necessary dependency
packages required for the Official PostgreSQL installation. On SLES 15
you will also need the "Desktop Applications Module":</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># On SLES 16</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>suseconnect<span class="w"> </span>-p<span class="w"> </span>PackageHub/16.0/x86_64
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="c1"># On SLES 15</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>SUSEConnect<span class="w"> </span>-p<span class="w"> </span>sle-module-desktop-applications/15.7/x86_64
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>SUSEConnect<span class="w"> </span>-p<span class="w"> </span>PackageHub/15.7/x86_64
</span></code></pre></div>
</details>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># Import the repository signing key:</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>curl<span class="w"> </span>ca-certificates
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>sudo<span class="w"> </span>install<span class="w"> </span>-d<span class="w"> </span>/usr/share/postgresql-common/pgdg
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>sudo<span class="w"> </span>curl<span class="w"> </span>-o<span class="w"> </span>/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc<span class="w"> </span>--fail<span class="w"> </span>https://www.postgresql.org/media/keys/ACCC4CF8.asc
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="c1"># Create the repository configuration file:</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>sudo<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;echo &quot;deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list&#39;</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="c1"># Update the package lists:</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span></code></pre></div></p>
</div>
<hr />
<h5 id="installing-the-postgresql-server-and-client">Installing the PostgreSQL Server and Client</h5>
<p>With the PostgreSQL repositories configured, you are now ready to install the
PostgreSQL server and client packages. This will provide the necessary
components to run and manage your database.</p>
<div class="admonition info">
<p class="admonition-title">Install PostgreSQL from official repositories</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># Install Postgres server:</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>dnf<span class="w"> </span>install<span class="w"> </span>postgresql17<span class="w"> </span>postgresql17-server<span class="w"> </span>postgresql17-contrib
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>zypper<span class="w"> </span>install<span class="w"> </span>postgresql17<span class="w"> </span>postgresql17-server<span class="w"> </span>postgresql17-contrib
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>postgresql-17<span class="w"> </span>postgresql-client-17
</span></code></pre></div></p>
</div>
<p>This command will download and install both the server and client packages,
enabling you to set up, configure, and interact with your PostgreSQL database.</p>
<p>Next, before we can start the PostgreSQL server we need to initialize a new
empty database:</p>
<div class="admonition info">
<p class="admonition-title">Initialize empty PostgreSQL database</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
</span></code></pre></div>
</div>
<p>Once the installation is complete, you can proceed to the <a href="#starting-the-postgresql-database">Starting the
PostgreSQL Database</a> section.</p>
<hr />
<h4 id="starting-the-postgresql-database">Starting the PostgreSQL Database</h4>
<p>Now that PostgreSQL is installed, we need to enable the service to start
automatically upon boot as well as start it immediately. Use the following
command to accomplish this:</p>
<div class="admonition info">
<p class="admonition-title">Enable and start PostgreSQL service</p>
<p>for OS-provided packages
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>postgresql<span class="w"> </span>--now
</span></code></pre></div></p>
<p>for official PostgreSQL packages:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>postgresql-17<span class="w"> </span>--now
</span></code></pre></div></p>
</div>
<p>This command will both enable and start the PostgreSQL service. With the service
now up and running, you can verify that the installation was successful by
checking the version of PostgreSQL using the following command:</p>
<div class="admonition info">
<p class="admonition-title">Check PostgreSQL version</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>psql<span class="w"> </span>-V
</span></code></pre></div>
</div>
<p>The expected output should resemble this:</p>
<details class="example" open="open">
<summary>PostgreSQL version example</summary>
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="gp">localhost:~ $ </span>psql<span class="w"> </span>-V
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="go">psql (PostgreSQL) 17.7</span>
</span></code></pre></div>
</details>
<p>To ensure that the PostgreSQL service is running properly, you can check its
status with the following command:</p>
<div class="admonition info">
<p class="admonition-title">Get PostgreSQL status</p>
<p>for OS-provided packages
<div class="language-bash highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>postgresql
</span></code></pre></div></p>
<p>for official PostgreSQL packages:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>postgresql-17
</span></code></pre></div></p>
</div>
<p>You should see an output similar to this, indicating that the PostgreSQL service
is active and running:</p>
<details class="example" open="open">
<summary>PostgreSQL service status example</summary>
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="gp">localhost:~ $ </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>postgresql-17
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="go">● postgresql-17.service - PostgreSQL 17 database server</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="go">    Loaded: loaded (/usr/lib/systemd/system/postgresql-17.service; enabled; preset: disabled)</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="go">    Active: active (running) since Mon 2025-12-29 17:24:07 CET; 6s ago</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="go">Invocation: 43ba47dfee5b415db223e3452c3cfacc</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="go">    Docs: https://www.postgresql.org/docs/17/static/</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="go">    Process: 11131 ExecStartPre=/usr/pgsql-17/bin/postgresql-17-check-db-dir ${PGDATA} (code=exited, status=0/SUCCESS)</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="go">Main PID: 11137 (postgres)</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="go">    Tasks: 7 (limit: 4672)</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="go">        CPU: 471ms</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="go">    CGroup: /system.slice/postgresql-17.service</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="go">            ├─11137 /usr/pgsql-17/bin/postgres -D /var/lib/pgsql/17/data/</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="go">            ├─11138 &quot;postgres: logger &quot;</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="go">            ├─11139 &quot;postgres: checkpointer &quot;</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="go">            ├─11140 &quot;postgres: background writer &quot;</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="go">            ├─11142 &quot;postgres: walwriter &quot;</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="go">            ├─11143 &quot;postgres: autovacuum launcher &quot;</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="go">            └─11144 &quot;postgres: logical replication launcher &quot;</span>
</span><span id="__span-43-19"><a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a>
</span><span id="__span-43-20"><a id="__codelineno-43-20" name="__codelineno-43-20" href="#__codelineno-43-20"></a><span class="go">Dec 29 17:24:07 localhost.localdomain systemd[1]: Starting PostgreSQL 17 database server...</span>
</span><span id="__span-43-21"><a id="__codelineno-43-21" name="__codelineno-43-21" href="#__codelineno-43-21"></a><span class="go">Dec 29 17:24:07 localhost.localdomain postgres[11137]: 2025-12-29 17:24:07.650 CET [11137] LOG:  redirecting log output to logging co&gt;</span>
</span><span id="__span-43-22"><a id="__codelineno-43-22" name="__codelineno-43-22" href="#__codelineno-43-22"></a><span class="go">Dec 29 17:24:07 localhost.localdomain postgres[11137]: 2025-12-29 17:24:07.650 CET [11137] HINT:  Future log output will appear in di&gt;</span>
</span><span id="__span-43-23"><a id="__codelineno-43-23" name="__codelineno-43-23" href="#__codelineno-43-23"></a><span class="go">Dec 29 17:24:07 localhost.localdomain systemd[1]: Started PostgreSQL 17 database server.</span>
</span></code></pre></div>
</details>
<p>This confirms that your PostgreSQL server is up and running, ready for further
configuration.</p>
<hr />
<h4 id="securisation-de-la-base-de-donnees-postgresql">Sécurisation de la base de données PostgreSQL</h4>
<p>PostgreSQL handles access permissions differently from MySQL and MariaDB.
PostgreSQL relies on a file called <code>pg_hba.conf</code> to manage who can access the
database, from where, and what encryption method is allowed for authentication.</p>
<details class="note" open="open">
<summary>About pg_hba.conf</summary>
<p>Client authentication in PostgreSQL is configured through the <code>pg_hba.conf</code>
file, where "HBA" stands for Host-Based Authentication. This file specifies
which users can access the database, from which hosts, and how they are authenticated.
For further details, you can refer to the official PostgreSQL documentation."
<a href="https://www.postgresql.org/docs/current/auth-pg-hba-conf.html">https://www.postgresql.org/docs/current/auth-pg-hba-conf.html</a></p>
</details>
<p>Add the following lines, the order here is important.</p>
<div class="admonition info">
<p class="admonition-title">Edit the pg_hba file</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="c1"># for OS-provided packages</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>vi<span class="w"> </span>/var/lib/pgsql/data/pg_hba.conf
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="c1"># for official packages</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>vi<span class="w"> </span>/var/lib/pgsql/17/data/pg_hba.conf
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="c1"># for OS-provided packages</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/postgresql/current/main/pg_hba.conf
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="c1"># for official packages</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/postgresql/17/main/pg_hba.conf
</span></code></pre></div></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Location of pg_hba file</p>
<p>If you don't find the <code>pg_hba.conf</code> and <code>postgres.conf</code> files in the above 
mentioned location you can ask PostgreSQL itself for the location using
this command (provided that PostgreSQL is currently running):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>psql<span class="w"> </span>-t<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;show hba_file&#39;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>The resulting pg_hba file should look like :</p>
<div class="admonition example">
<p class="admonition-title">Pg_hba example</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a># &quot;local&quot; is for Unix domain socket connections only
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>local    zabbix     zabbix-srv                                 scram-sha-256
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>local    all        all                                        peer
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a># IPv4 local connections
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>host     zabbix         zabbix-srv      &lt;ip from zabbix server/24&gt;     scram-sha-256
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>host     zabbix         zabbix-web      &lt;ip from zabbix server/24&gt;     scram-sha-256
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>host     all            all             127.0.0.1/32                   scram-sha-256
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a># IPv6 local connections:
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>host    zabbix          zabbix-srv      ::1/128                 scram-sha-256
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>host    zabbix          zabbix-web      ::1/128                 scram-sha-256
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>host    all             all             ::1/128                 ident
</span></code></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Ensure to keep the order of the entries</p>
<p>The order of the entries in the <code>pg_hba.conf</code> file is crucial, as PostgreSQL
processes these rules sequentially. Ensure that the specific rules for the
<code>zabbix-srv</code> and <code>zabbix-web</code> users are placed before any broader rules like
the default <code>all</code> user rules that could potentially override them.</p>
</div>
<p>After we changed the <code>pg_hba.conf</code> file don't forget to restart postgres
otherwise the settings will not be applied. But before we restart, let us also
edit the file <code>postgresql.conf</code> and allow our database to listen on our network
interface for incoming connections from the Zabbix server. PostgreSQL will by
default only allow connections from a unix socket.</p>
<div class="admonition info">
<p class="admonition-title">Edit postgresql.conf file</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1"># for OS-provided packages</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>vi<span class="w"> </span>/var/lib/pgsql/data/postgresql.conf
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="c1"># for official packages</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>vi<span class="w"> </span>/var/lib/pgsql/17/data/postgresql.conf
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1"># for OS-provided packages</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/postgresql/current/main/postgresql.conf
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="c1"># for official packages</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/postgresql/17/main/postgresql.conf
</span></code></pre></div></p>
</div>
<p>Locate the following line:</p>
<div class="admonition info">
<div class="language-ini highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1">#listen_addresses = &#39;localhost&#39;</span>
</span></code></pre></div>
</div>
<p>and replace it with:</p>
<div class="admonition info">
<div class="language-ini highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="na">listen_addresses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#39;*&#39;</span>
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>This will enable PostgreSQL to accept connections from any network interface,
not just the local machine. In production it's probably a good idea to limit
who can connect to the DB.</p>
</details>
<p>After making this change, restart the PostgreSQL service to apply the new
settings:</p>
<div class="admonition info">
<p class="admonition-title">Restart the DB server</p>
<p>for OS-provided packages
<div class="language-bash highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>postgresql
</span></code></pre></div></p>
<p>for official packages
<div class="language-bash highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>postgresql-17
</span></code></pre></div></p>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>If the service fails to restart, review the <code>pg_hba.conf</code> file for any syntax errors,
as incorrect entries here may prevent PostgreSQL from starting.</p>
</details>
<hr />
<h4 id="creating-the-zabbix-database-instance_1">Creating the Zabbix database instance</h4>
<p>With the necessary packages installed, you are now ready to create the Zabbix
database and users for both the server and frontend.</p>
<p>The PostgreSQL packages automatically create a default <code>postgres</code> linux-user
during installation which has administrative privileges on the PostgreSQL
instance. To administer the database, you will need to execute commands as the
<code>postgres</code> user.</p>
<p>First, create the Zabbix server database user (also referred to as a "role" in
PostgreSQL):</p>
<div class="admonition info">
<p class="admonition-title">Create server users</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>createuser<span class="w"> </span>--pwprompt<span class="w"> </span>zabbix-srv
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>Enter<span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>new<span class="w"> </span>role:<span class="w"> </span>&lt;server-password&gt;
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>Enter<span class="w"> </span>it<span class="w"> </span>again:<span class="w"> </span>&lt;server-password&gt;
</span></code></pre></div>
</div>
<p>Next, create the Zabbix frontend user, which will be used to connect to the
database:</p>
<div class="admonition info">
<p class="admonition-title">Create front-end user</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>createuser<span class="w"> </span>--pwprompt<span class="w"> </span>zabbix-web
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>Enter<span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>new<span class="w"> </span>role:<span class="w"> </span>&lt;frontend-password&gt;
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>Enter<span class="w"> </span>it<span class="w"> </span>again:<span class="w"> </span>&lt;frontend-password&gt;
</span></code></pre></div>
</div>
<p>Now with the users created, the next step is to create the Zabbix database.
Execute the following command to create the database <code>zabbix</code> with the owner set
to <code>zabbix-srv</code> and the character encoding set to <code>Unicode</code> as required by
Zabbix:</p>
<div class="admonition info">
<p class="admonition-title">Create DB</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>createdb<span class="w"> </span>-E<span class="w"> </span>Unicode<span class="w"> </span>-T<span class="w"> </span>template0<span class="w"> </span>-O<span class="w"> </span>zabbix-srv<span class="w"> </span>zabbix
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>What is this 'template0'?</summary>
<p>In PostgreSQL, <code>template0</code> is a default database template that serves as a pristine
copy of the database system. When creating a new database using <code>template0</code>,
it ensures that the new database starts with a clean slate, without any
pre-existing objects or configurations that might be present in other templates.
This is particularly useful when you want to create a database with specific
settings or extensions without inheriting any unwanted elements from other templates.</p>
</details>
<p>Once the database is created, you should verify the connection and ensure that
the correct user session is active. To do this, log into the zabbix database
using the <code>zabbix-srv</code> user:</p>
<div class="admonition info">
<p class="admonition-title">Login as user zabbix-srv</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>psql<span class="w"> </span>-d<span class="w"> </span>zabbix<span class="w"> </span>-U<span class="w"> </span>zabbix-srv
</span></code></pre></div>
</div>
<p>After logging in, run the following SQL query to confirm that both the
<code>session_user</code> and <code>current_user</code> are set to <code>zabbix-srv</code>:</p>
<div class="admonition info">
<div class="language-psql highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">session_user</span><span class="p">,</span><span class="w"> </span><span class="k">current_user</span><span class="p">;</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="go"> session_user | current_user</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="go">--------------+--------------</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="go"> zabbix-srv   | zabbix-srv</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="go">(1 row)</span>
</span></code></pre></div>
</div>
<p>If the output matches, you are successfully connected to the database with the
correct user.</p>
<p>PostgreSQL differs significantly from MySQL or MariaDB in several aspects, and
one of the key features that sets it apart is its use of schemas. Unlike MySQL,
where databases are more standalone, PostgreSQL's schema system provides a
structured, multi-user environment within a single database.</p>
<p>Schemas act as logical containers within a database, enabling multiple users or
applications to access and manage data independently without conflicts. This
feature is especially valuable in environments where several users or
applications need to interact with the same database server concurrently. Each
user or application can have its own schema, preventing accidental interference
with each other's data.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>PostgreSQL comes with a default schema, typically called <code>public</code>, but in
general, it's a best practice to create custom schemas to better organize and separate
database objects, especially in complex or multi-user environments.</p>
<p>For more in-depth information, I recommend checking out the detailed guide at
this URI, <a href="https://hevodata.com/learn/postgresql-schema/#schema">https://hevodata.com/learn/postgresql-schema/#schema</a>
which explains the benefits and use cases for schemas in PostgreSQL.</p>
</details>
<p>To finalize the initial database setup for Zabbix, we need to configure schema
permissions for both the <code>zabbix-srv</code> and <code>zabbix-web</code> users.</p>
<p>First, we create a custom schema named <code>zabbix_server</code> and assign ownership to
the <code>zabbix-srv</code> user:</p>
<div class="admonition info">
<p class="admonition-title">Create the db schema</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">AUTHORIZATION</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-srv&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Next, we set the <code>search path</code> to <code>zabbix_server</code> schema so that it's the
default for the current session:</p>
<div class="admonition info">
<p class="admonition-title">Set search path</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">search_path</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix_server&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>If you prefer not to set the search path manually each time you log in as the
<code>zabbix-srv</code> user, you can configure PostgreSQL to automatically use the desired
search path. Run the following SQL command to set the default search path for
the <code>zabbix-srv</code> role:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="n">zabbix</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">ALTER</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="ss">&quot;zabbix-srv&quot;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">search_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zabbix_server</span><span class="p">;</span>
</span></code></pre></div>
<p>This command ensures that every time the <code>zabbix-srv</code> user connects to the
database, the <code>search_path</code> is automatically set to <code>zabbix_server</code>.</p>
</details>
<p>To confirm the schema setup, you can list the existing schemas:</p>
<div class="admonition example">
<p class="admonition-title">Verify schema access</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dn</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="go">          List of schemas</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="go">     Name      |       Owner</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="go">---------------+-------------------</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="go"> public        | pg_database_owner</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="go"> zabbix_server | zabbix-srv</span>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="go">(2 rows)</span>
</span></code></pre></div>
</div>
<p>At this point, the <code>zabbix-srv</code> user has full access to the schema, but the
<code>zabbix-web</code> user still needs appropriate permissions to connect and interact
with the database. First, we grant <code>USAGE</code> privileges on the schema to allow
<code>zabbix-web</code> to connect:</p>
<div class="admonition info">
<p class="admonition-title">Grant access to schema for user zabbix-web</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="n">USAGE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Now, the <code>zabbix-web</code> user has appropriate access to interact with the schema
while maintaining security by limiting permissions to essential operations.</p>
<p>If you are ready you can exit the database and return to your linux shell.</p>
<div class="admonition info">
<p class="admonition-title">Exit the database shell</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\q</span>
</span></code></pre></div>
</div>
<p>At this point, your Zabbix database is ready, but before it can actually be used
by Zabbix, we still need to populate the database with the necessary tables and
initial data, but that will be covered in the next section when we install the
Zabbix server.</p>
<p>If you intent to install Zabbix server on a different machine than the one
hosting the database you will need to open the host firewall to allow incoming
connections to the database server. By default, PostgreSQL listens on port 5432.</p>
<div class="admonition info">
<p class="admonition-title">Add firewall rules</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>postgresql<span class="w"> </span>--permanent
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">5432</span>/tcp
</span></code></pre></div></p>
</div>
<p>This concludes our installation of the PostgreSQL database.</p>
<hr />
<h2 id="preparing-the-server-for-zabbix">Preparing the server for Zabbix</h2>
<p>Before installing the Zabbix server and/or frontend, ensure that the server(s)
meet the configuration requirements outlined in the previous section: <a href="../../ch00-getting-started/Requirements/">System
Requirements</a>.</p>
<p>If you plan to install the Zabbix server and frontend on separate machines,
prepare each server individually according to the instructions provided here.</p>
<hr />
<h3 id="disable-selinux-on-rhel">Disable SELinux on RHEL</h3>
<p>Another critical step at this stage if you use Red Hat based systems is
disabling SELinux, which can interfere with the installation and operation of
Zabbix. We will revisit SELinux at the end of this chapter once our installation
is finished.</p>
<p>To check the current status of SELinux, you can use the following command:
`sestatus``</p>
<div class="admonition info">
<p class="admonition-title">Selinux status</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="go">~# sestatus</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="go">SELinux status:                 enabled</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="go">SELinuxfs mount:                /sys/fs/selinux</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="go">SELinux root directory:         /etc/selinux</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="go">Loaded policy name:             targeted</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="go">Current mode:                   enforcing</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="go">Mode from config file:          enforcing</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="go">Policy MLS status:              enabled</span>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="go">Policy deny_unknown status:     allowed</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="go">Memory protection checking:     actual (secure)</span>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a><span class="go">Max kernel policy version:      33</span>
</span></code></pre></div>
</div>
<p>As shown, the system is currently in enforcing mode. To temporarily disable
SELinux, you can run the following command: <code>setenforce 0</code></p>
<div class="admonition info">
<p class="admonition-title">Disable SeLinux</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="go">~# setenforce 0</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="go">~# sestatus</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="go">SELinux status:                 enabled</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a><span class="go">SELinuxfs mount:                /sys/fs/selinux</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a><span class="go">SELinux root directory:         /etc/selinux</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a><span class="go">Loaded policy name:             targeted</span>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="go">Current mode:                   permissive</span>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a><span class="go">Mode from config file:          enforcing</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a><span class="go">Policy MLS status:              enabled</span>
</span><span id="__span-68-10"><a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a><span class="go">Policy deny_unknown status:     allowed</span>
</span><span id="__span-68-11"><a id="__codelineno-68-11" name="__codelineno-68-11" href="#__codelineno-68-11"></a><span class="go">Memory protection checking:     actual (secure)</span>
</span><span id="__span-68-12"><a id="__codelineno-68-12" name="__codelineno-68-12" href="#__codelineno-68-12"></a><span class="go">Max kernel policy version:      33</span>
</span></code></pre></div>
</div>
<p>Now, as you can see, the mode is switched to permissive. However, this change is
not persistent across reboots. To make it permanent, you need to modify the
SELinux configuration file located at <code>/etc/selinux/config</code>. Open the file and
replace enforcing with <code>permissive</code>.</p>
<p>Alternatively, you can achieve the same result more easily by running the
following command:</p>
<div class="admonition info">
<p class="admonition-title">Disable SeLinux permanent</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;s/SELINUX=enforcing/SELINUX=permissive/g&#39;</span><span class="w"> </span>/etc/selinux/config
</span></code></pre></div></p>
</div>
<p>This line will alter the configuration file for you. So when we run <code>sestatus</code>
again we will see that we are in <code>permissive</code> mode and that our configuration
file is also in permissive mode.</p>
<div class="admonition info">
<p class="admonition-title">Verify selinux status again</p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="go">~# sestatus</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="go">SELinux status:                 enabled</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="go">SELinuxfs mount:                /sys/fs/selinux</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="go">SELinux root directory:         /etc/selinux</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="go">Loaded policy name:             targeted</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="go">Current mode:                   permissive</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="go">Mode from config file:          permissive</span>
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a><span class="go">Policy MLS status:              enabled</span>
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a><span class="go">Policy deny_unknown status:     allowed</span>
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a><span class="go">Memory protection checking:     actual (secure)</span>
</span><span id="__span-70-11"><a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a><span class="go">Max kernel policy version:      33</span>
</span></code></pre></div>
</div>
<hr />
<h3 id="install-the-zabbix-repository">Install the Zabbix repository</h3>
<p>From the Zabbix Download page
<a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a>, select the
appropriate Zabbix version you wish to install. In this case, we will be using
Zabbix 8.0 LTS. Additionally, ensure you choose the correct OS distribution for
your environment, which will be Rocky Linux 9, openSUSE Leap 16 or Ubuntu 24.04
in our case.</p>
<p>We will be installing the Zabbix Server along with NGINX as the web server for
the front-end. Make sure to download the relevant packages for your chosen
configuration.</p>
<p><img alt="Zabbix
Download" src="./basic-installation/ch01-basic-installation-zabbixdownload.png" /></p>
<p><em>1.2 Zabbix download</em></p>
<hr />
<h4 id="red-hat-specific-remarks">Red Hat specific remarks</h4>
<p>If you make use of a RHEL based system like Rocky then the first step is to
disable the Zabbix packages provided by the EPEL repository, if it's installed
on your system. To do this, edit the <code>/etc/yum.repos.d/epel.repo</code> file and add
the following statement to disable the EPEL repository by default:</p>
<div class="admonition info">
<p class="admonition-title">Exclude packages</p>
<p>Red Hat
<div class="language-ini highlight"><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="k">[epel]</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="na">...</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="na">excludepkgs</span><span class="o">=</span><span class="s">zabbix*</span>
</span></code></pre></div></p>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>It's considered bad practice to keep the EPEL repository enabled all the time,
as it may cause conflicts by unintentionally overwriting or installing unwanted
packages. Instead, it's safer to enable the repository only when needed, by using
the following command during installations: dnf install --enablerepo=epel <package-name>
This ensures that EPEL is only enabled when explicitly required.</p>
</details>
<hr />
<h4 id="opensuse-specific-remarks">OpenSUSE specific remarks</h4>
<p>On openSUSE, Zabbix packages are also available in the default <code>repo-oss</code>
repository. Unlike RHEL-based systems, openSUSE does not provide a built-in way
to exclude specific packages from individual repositories. However, the Zabbix
packages included in the default repositories are typically one to two LTS
versions behind the latest releases. As a result, they are unlikely to interfere
with your installation unless they are already installed.</p>
<p>In the next step, we will configure the official Zabbix repositories. As long as
you select a Zabbix repository version newer than the packages available in
<code>repo-oss</code>, zypper will automatically install the most recent version.</p>
<details class="tip" open="open">
<summary>Tip</summary>
<p>If you have already installed Zabbix packages from the default repositories, 
it is recommended to either:</p>
<ul>
<li>Remove them before proceeding, or</li>
<li>Upgrade them after adding the new Zabbix repositories, using the zypper 
  option <code>--allow-vendor-change</code>.</li>
</ul>
</details>
<details class="note" open="open">
<summary>Suse Linux Enterprise Server (SLES)</summary>
<p>If you are using SLES, the Zabbix packages are not included in the default
repositories. Therefore, you can proceed to add the official Zabbix repository
without any concerns about conflicts with existing packages.</p>
</details>
<hr />
<h4 id="adding-the-zabbix-repository">Adding the Zabbix repository</h4>
<p>Next, we will install the Zabbix repository on our operating system. After
adding the Zabbix repository, it is recommended to perform a repository cleanup
to remove old cache files and ensure the repository metadata is up to date. You
can do this by running:</p>
<div class="admonition info">
<p class="admonition-title">Add the zabbix repo</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>rpm<span class="w"> </span>-Uvh<span class="w"> </span>https://repo.zabbix.com/zabbix/8.0/release/rocky/9/noarch/zabbix-release-latest-8.0.el9.noarch.rpm
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>dnf<span class="w"> </span>clean<span class="w"> </span>all
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>rpm<span class="w"> </span>-Uvh<span class="w"> </span>--nosignature<span class="w"> </span>https://repo.zabbix.com/zabbix/8.0/release/sles/16/noarch/zabbix-release-latest-8.0.sles16.noarch.rpm
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a>zypper<span class="w"> </span>--gpg-auto-import-keys<span class="w"> </span>refresh<span class="w"> </span><span class="s1">&#39;Zabbix Official Repository&#39;</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="c1"># Set the repository to auto-refresh to ensure it&#39;s always up to date</span>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a>zypper<span class="w"> </span>modifyrepo<span class="w"> </span>--refresh<span class="w"> </span><span class="s1">&#39;Zabbix Official Repository&#39;</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>sudo<span class="w"> </span>wget<span class="w"> </span>https://repo.zabbix.com/zabbix/8.0/release/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_8.0+ubuntu24.04_all.deb
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>zabbix-release_latest_8.0+ubuntu24.04_all.deb
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</span></code></pre></div></p>
</div>
<p>This will refresh the repository metadata and prepare the system for Zabbix
installation.</p>
<details class="note" open="open">
<summary>What is a repository?</summary>
<p>A repository in Linux is a configuration that allows you to access and install
software packages. You can think of it like an "app store" where you find and
download software from a trusted source, in this case, the Zabbix repository.
Many repositories are available, but it's important to only add those you trust.
The safest practice is to stick to the repositories provided by your operating
system and only add additional ones when you're sure they are both trusted and necessary.</p>
<p>For our installation, the Zabbix repository is provided by the vendor itself,
making it a trusted source. Another popular and safe repository for
Red Hat-based systems is EPEL (Extra Packages for Enterprise Linux), which is
commonly used in enterprise environments.
However, always exercise caution when adding new repositories to ensure
system security and stability.</p>
</details>
<hr />
<h2 id="installation-and-configuration-of-zabbix-server">Installation and configuration of Zabbix server</h2>
<p>Now that we've added the Zabbix repository with the necessary software, we are
ready to install both the Zabbix server and the web server. Keep in mind that
the web server doesn't need to be installed on the same machine as the Zabbix
server; they can be hosted on separate systems if desired.</p>
<p>To install the Zabbix server components, run the following command:</p>
<div class="admonition info">
<p class="admonition-title">Install the zabbix server</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="c1"># For MySQL/MariaDB backend:</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>dnf<span class="w"> </span>install<span class="w"> </span>zabbix-server-mysql
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="c1"># For PostgreSQL backend:</span>
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>dnf<span class="w"> </span>install<span class="w"> </span>zabbix-server-pgsql
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="c1"># For MySQL/MariaDB backend:</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>zypper<span class="w"> </span>install<span class="w"> </span>zabbix-server-mysql
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="c1"># For PostgreSQL backend:</span>
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a>zypper<span class="w"> </span>install<span class="w"> </span>zabbix-server-pgsql
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="c1"># For MySQL/MariaDB backend:</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>zabbix-server-mysql
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="c1"># For PostgreSQL backend:</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>zabbix-server-pgsql
</span></code></pre></div></p>
</div>
<p>After successfully installing the Zabbix server package, we need to configure
the Zabbix server to connect to the database. This requires modifying the Zabbix
server configuration file.</p>
<p>The Zabbix server configuration file offers an option to include additional
configuration files for custom parameters. For a production environment, it's
often best to avoid altering the original configuration file directly. Instead,
you can create and include separate configuration files for any additional or
modified parameters. This approach ensures that your original configuration file
remains untouched, which is particularly useful when performing upgrades or
managing configurations with tools like Ansible, Puppet, or SaltStack.</p>
<p>On SUSE 16 and later, this feature is already enabled and configured by default.
(see also <a href="https://documentation.suse.com/sles/16.0/html/SLE-differences-faq/index.html#sle16-differences-faq-basesystem-etc">SUSE
documentation</a>).
Hence, on SUSE systems, the Zabbix server configuration file is located at
<code>/usr/etc/zabbix/zabbix_server.conf</code>, and it is set up to include all <code>.conf</code>
files from the <code>/etc/zabbix_server/zabbix_server.d/</code> directory.</p>
<p>On other distributions, you may need to enable it manually:</p>
<p>To enable this feature, ensure the next line exists and is not commented (with a
<code>#</code> in front of it) in <code>/etc/zabbix/zabbix_server.conf</code>:</p>
<div class="admonition info">
<div class="language-ini highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="c1"># Include=/usr/local/etc/zabbix_server.conf.d/*.conf</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="na">Include</span><span class="o">=</span><span class="s">/etc/zabbix/zabbix_server.d/*.conf</span>
</span></code></pre></div>
</div>
<p>The path <code>/etc/zabbix/zabbix_server.d/</code> should already be created by the
installed package, but ensure it really exists.</p>
<p>Now we will create a custom configuration file <code>database.conf</code> in the
<code>/etc/zabbix/zabbix_server.d/</code> directory that will hold our database connection
settings:</p>
<div class="admonition info">
<p class="admonition-title">Add Zabbix database connection settings</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>vi<span class="w"> </span>/etc/zabbix/zabbix_server.d/database.conf
</span></code></pre></div>
<p>Add the following lines in the configuration file to match your database setup:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="c1"># Zabbix database configuration</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="na">DBHost</span><span class="o">=</span><span class="s">&lt;database-host&gt;</span>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="na">DBName</span><span class="o">=</span><span class="s">&lt;database-name&gt;</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a><span class="na">DBSchema</span><span class="o">=</span><span class="s">&lt;database-schema&gt;</span><span class="w">  </span><span class="c1"># Only for PostgreSQL</span>
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="na">DBUser</span><span class="o">=</span><span class="s">&lt;database-user&gt;</span>
</span><span id="__span-80-6"><a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a><span class="na">DBPassword</span><span class="o">=</span><span class="s">&lt;database-password&gt;</span>
</span><span id="__span-80-7"><a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a><span class="na">DBPort</span><span class="o">=</span><span class="s">&lt;database-port&gt;</span>
</span></code></pre></div>
</div>
<p>Replace <code>&lt;database-host&gt;</code>, <code>&lt;database-name&gt;</code>, <code>&lt;database-schema&gt;</code>,
<code>&lt;database-user&gt;</code>, <code>&lt;database-password&gt;</code>, and <code>&lt;database-port&gt;</code> with the
appropriate values for your setup. This ensures that the Zabbix server can
communicate with your database.</p>
<p>Ensure that there is no <code>#</code> (comment symbol) in front of the configuration
parameters, as Zabbix will treat lines beginning with <code>#</code> as comments, ignoring
them during execution. Additionally, double-check for duplicate configuration
lines; if there are multiple lines with the same parameter, Zabbix will use the
value from the last occurrence.</p>
<p>For our setup, the configuration will look like this:</p>
<div class="admonition example">
<p class="admonition-title">Example database.conf</p>
<p>MariaDB/MySQL:
<div class="language-ini highlight"><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="c1"># MariaDB database configuration</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="na">DBHost</span><span class="o">=</span><span class="s">&lt;ip or dns of your MariaDB server&gt;</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="na">DBName</span><span class="o">=</span><span class="s">zabbix</span>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="na">DBUser</span><span class="o">=</span><span class="s">zabbix-srv</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="na">DBPassword</span><span class="o">=</span><span class="s">&lt;your super secret password&gt;</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="na">DBPort</span><span class="o">=</span><span class="s">3306</span>
</span></code></pre></div></p>
<p>PostgreSQL:
<div class="language-ini highlight"><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="c1"># PostgreSQL database configuration</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="na">DBHost</span><span class="o">=</span><span class="s">&lt;ip or dns of your PostgreSQL server&gt;</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="na">DBName</span><span class="o">=</span><span class="s">zabbix</span>
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="na">DBSchema</span><span class="o">=</span><span class="s">zabbix_server</span>
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a><span class="na">DBUser</span><span class="o">=</span><span class="s">zabbix-srv</span>
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a><span class="na">DBPassword</span><span class="o">=</span><span class="s">&lt;your super secret password&gt;</span>
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="na">DBPort</span><span class="o">=</span><span class="s">5432</span>
</span></code></pre></div></p>
</div>
<p>In this example:</p>
<ul>
<li>DBHost refers to the host where your database is running (use localhost if
  it's on the same machine).</li>
<li>DBName is the name of the Zabbix database.</li>
<li>DBSchema is the schema name used in PostgreSQL (only needed for PostgreSQL).</li>
<li>DBUser is the database user.</li>
<li>DBPassword is the password for the database user.</li>
<li>DBPort is the port number on which your database server is listening (default
  for MySQL/MariaDB is 3306 and PostgreSQL is 5432).</li>
</ul>
<p>Make sure the settings reflect your environment's database configuration.</p>
<hr />
<h3 id="populate-the-zabbix-database-instance">Populate the Zabbix database instance</h3>
<p>During the installation of the database software earlier, we created the
necessary users and database for Zabbix, however, Zabbix expects certain tables,
schemas, images, and other elements to be present in the database. To set up the
database correctly, we need to populate it with the required schema.</p>
<p>Execute next steps on the machine where the database is installed.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>If this is not the same machine as the Zabbix server, you will need to install 
the Zabbix repository on the database server to gain access to the necessary SQL
scripts.  Refer to <a href="#install-the-zabbix-repository">Install the Zabbix repository</a> for instructions on
adding the Zabbix repository also in this system.</p>
</details>
<p>When the repository is added we can install the package:</p>
<div class="admonition info">
<p class="admonition-title">Install SQL scripts</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>zabbix-sql-scripts
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>zypper<span class="w"> </span>install<span class="w"> </span>zabbix-sql-scripts
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>zabbix-sql-scripts
</span></code></pre></div></p>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>If you have already installed the Zabbix server package on this machine,
the SQL scripts package may already be installed as a dependency.
You can verify this by checking if the <code>/usr/share/zabbix/sql-scripts/</code>
directory exists on your system.</p>
</details>
<hr />
<h4 id="populate-mariadbmysql-database">Populate MariaDB/MySQL Database</h4>
<details class="warning" open="open">
<summary>Warning</summary>
<p>When using a recent version of MySQL or MariaDB as the database backend for 
Zabbix, you may encounter issues related to the creation of triggers during
the schema import process. This is particularly relevant if binary logging
is enabled on your database server. (Binary logging is often enabled by default)
To address this, you need to set the <code>log_bin_trust_function_creators</code> option to <code>1</code>
in the MySQL/MariaDB configuration file or temporarily at runtime.
This allows non-root users to create stored functions and triggers without requiring
<code>SUPER</code> privileges, which are restricted when binary logging is enabled.</p>
<p>Normally we won't need the setting after the initial import of the Zabbix schema is done,
so we will disable it again after the import is complete.</p>
<div class="admonition info">
<p class="admonition-title">Activate temporarily extra privileges for non root users</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>mariadb<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;SET GLOBAL log_bin_trust_function_creators = 1;&quot;</span>
</span></code></pre></div>
</div>
</details>
<p>Maintenant nous allons télécharger les données de zabbix (structure de la base
de données, images, utilisateur, ... ) pour cela nous utilisons l'utilisateur
<code>zabbix-srv</code> et nous téléchargeons le tout dans notre base de données <code>zabbix</code>.</p>
<div class="admonition info">
<p class="admonition-title">Remplir la base de données</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>sudo<span class="w"> </span>zcat<span class="w"> </span>/usr/share/zabbix/sql-scripts/mysql/server.sql.gz<span class="w"> </span><span class="p">|</span><span class="w"> </span>mariadb<span class="w"> </span>--default-character-set<span class="o">=</span>utf8mb4<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="w"> </span>zabbix
</span></code></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Depending on the speed of your hardware or virtual machine, the process may
take anywhere from a few seconds to several minutes without any visual feedback
after entering the root password.</p>
<p>Please be patient and avoid cancelling the operation; just wait for the linux 
prompt to reappear.</p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>Zabbix seems to like to change the locations of the script to populate the
DB every version or even in between versions. If you encounter an error take a
look at the Zabbix documentation, there is a good chance that some location was
changed.</p>
</details>
<p>Once the import of the Zabbix schema is complete, you should no longer need the
<code>log_bin_trust_function_creators</code> global parameter. It is a good practice to
remove it for security reasons.</p>
<p>To revert the global parameter back to 0, use the following command in the
MySQL/MariaDB shell:</p>
<div class="admonition info">
<p class="admonition-title">Désactiver à nouveau la fonction log_bin_trust</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>mariadb<span class="w"> </span>-uroot<span class="w"> </span>-p<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;SET GLOBAL log_bin_trust_function_creators = 0;&quot;</span>
</span></code></pre></div>
</div>
<p>Cette commande désactivera le paramètre, garantissant que la posture de sécurité
des serveurs reste robuste.</p>
<hr />
<h4 id="populate-the-postgresql-database">Populate the PostgreSQL Database</h4>
<p>First you need to prepare the database schema: unzip the necessary schema files
by running the following command:</p>
<div class="admonition info">
<p class="admonition-title">Unzip the DB patch</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>gzip<span class="w"> </span>-d<span class="w"> </span>/usr/share/zabbix/sql-scripts/postgresql/server.sql.gz
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a>sudo<span class="w"> </span>gzip<span class="w"> </span>-d<span class="w"> </span>/usr/share/zabbix/sql-scripts/postgresql/server.sql.gz
</span></code></pre></div></p>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>Zabbix seems to like to change the locations of the script to populate the
DB every version or even in between versions. If you encounter an error take a
look at the Zabbix documentation, there is a good chance that some location was
changed.</p>
</details>
<p>This will extract the database schema required for the Zabbix server.</p>
<p>Next we will execute the SQL file to populate the database. Open a <code>psql</code> shell:</p>
<div class="admonition info">
<p class="admonition-title">Open psql shell</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>psql<span class="w"> </span>-d<span class="w"> </span>zabbix<span class="w"> </span>-U<span class="w"> </span>zabbix-srv
</span></code></pre></div>
</div>
<details class="warning" open="open">
<summary>Ensure correct search_path is set</summary>
<p>Make sure you performed previous steps as outlined in <a href="#creating-the-zabbix-database-instance_1">Creating the Zabbix database instance with PostgreSQL</a>
carefully so that you have set the correct <code>search_path</code>.</p>
<p>If you did not set the default <code>search_path</code> for the <code>zabbix-srv</code> user,
ensure you set it manually in the current session before proceeding:
<div class="language-psql highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">search_path</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix_server&quot;</span><span class="p">;</span>
</span></code></pre></div></p>
</details>
<p>Now run the following commands:</p>
<div class="admonition info">
<p class="admonition-title">Upload the DB schema to db zabbix</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\i</span><span class="w"> </span><span class="ss">/usr/share/zabbix/sql-scripts/postgresql/server.sql</span>
</span></code></pre></div>
</div>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Depending on your hardware or VM performance, this process can take anywhere
from a few seconds to several minutes. Please be patient and avoid cancelling
the operation.</p>
</details>
<p>Monitor the progress as the script runs. You will see output similar to:</p>
<div class="admonition example">
<p class="admonition-title">Output example</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\i</span><span class="w"> </span><span class="ss">/usr/share/zabbix/sql-scripts/postgresql/server.sql</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="go">CREATE TABLE</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="go">CREATE INDEX</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="go">CREATE TABLE</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="go">CREATE INDEX</span>
</span><span id="__span-94-6"><a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a><span class="go">CREATE TABLE</span>
</span><span id="__span-94-7"><a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a><span class="go">...</span>
</span><span id="__span-94-8"><a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a><span class="go">...</span>
</span><span id="__span-94-9"><a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a><span class="go">...</span>
</span><span id="__span-94-10"><a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a><span class="go">INSERT 0 10444</span>
</span><span id="__span-94-11"><a id="__codelineno-94-11" name="__codelineno-94-11" href="#__codelineno-94-11"></a><span class="go">DELETE 90352</span>
</span><span id="__span-94-12"><a id="__codelineno-94-12" name="__codelineno-94-12" href="#__codelineno-94-12"></a><span class="go">COMMIT</span>
</span></code></pre></div>
</div>
<p>Once the script completes and you return to the <code>zabbix=&gt;</code> prompt, the database
should be successfully populated with all the required tables, schemas, images,
and other elements needed for Zabbix.</p>
<p>However, <code>zabbix-web</code> still cannot perform any operations on the tables or
sequences. To allow basic data interaction without giving too many privileges,
grant the following permissions:</p>
<ul>
<li>For tables: SELECT, INSERT, UPDATE, and DELETE.</li>
<li>For sequences: SELECT and UPDATE.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Grant rights on the schema to user zabbix-web</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">INSERT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="p">,</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="w"> </span><span class="k">UPDATE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">SEQUENCES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">zabbix_server</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s s-Name">&quot;zabbix-web&quot;</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>Verify if the rights are correct on the schema :</p>
<div class="admonition example">
<p class="admonition-title">Example schema rights</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dn+</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="go">                                           List of schemas</span>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a><span class="go">     Name      |       Owner       |           Access privileges            |      Description</span>
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a><span class="go">---------------+-------------------+----------------------------------------+------------------------</span>
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a><span class="go"> public        | pg_database_owner | pg_database_owner=UC/pg_database_owner+| standard public schema</span>
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a><span class="go">               |                   | =U/pg_database_owner                   |</span>
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a><span class="go"> zabbix_server | zabbix-srv        | &quot;zabbix-srv&quot;=UC/&quot;zabbix-srv&quot;          +|</span>
</span><span id="__span-96-8"><a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a><span class="go">               |                   | &quot;zabbix-web&quot;=U/&quot;zabbix-srv&quot;            |</span>
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>Note</summary>
<p>If you encounter the following error during the SQL import:
<code>vbnet psql:/usr/share/zabbix/sql-scripts/postgresql/server.sql:7: ERROR: no
    schema has been selected to create in</code> It indicates that the <code>search_path</code> setting
might not have been correctly applied. This setting is crucial because it specifies
the schema where the tables and other objects should be created. By correctly
setting the search path, you ensure that the SQL script will create tables
and other objects in the intended schema.</p>
</details>
<p>To ensure that the Zabbix tables were created successfully and have the correct
permissions, you can verify the table list and their ownership using the <code>psql</code>
command:</p>
<ul>
<li>List the Tables: Use the following command to list all tables in the
  <code>zabbix_server</code> schema:</li>
</ul>
<div class="admonition info">
<p class="admonition-title">List tables</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="gp">zabbix=#</span><span class="w"> </span><span class="kp">\dt</span>
</span></code></pre></div>
</div>
<p>You should see a list of tables with their schema, name, type, and owner. For
example:</p>
<details class="example" open="open">
<summary>List table with relations</summary>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dt</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="go">                        List of relations</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="go">    Schema     |            Name            | Type  |   Owner</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="go">---------------+----------------------------+-------+------------</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="go"> zabbix_server | acknowledges               | table | zabbix-srv</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="go"> zabbix_server | actions                    | table | zabbix-srv</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a><span class="go"> zabbix_server | alerts                     | table | zabbix-srv</span>
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a><span class="go"> zabbix_server | auditlog                   | table | zabbix-srv</span>
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a><span class="go"> zabbix_server | autoreg_host               | table | zabbix-srv</span>
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a><span class="go"> zabbix_server | changelog                  | table | zabbix-srv</span>
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a><span class="go"> zabbix_server | conditions                 | table | zabbix-srv</span>
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a><span class="go">...</span>
</span><span id="__span-98-13"><a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a><span class="go">...</span>
</span><span id="__span-98-14"><a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a><span class="go">...</span>
</span><span id="__span-98-15"><a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a><span class="go"> zabbix_server | valuemap                   | table | zabbix-srv</span>
</span><span id="__span-98-16"><a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a><span class="go"> zabbix_server | valuemap_mapping           | table | zabbix-srv</span>
</span><span id="__span-98-17"><a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a><span class="go"> zabbix_server | widget                     | table | zabbix-srv</span>
</span><span id="__span-98-18"><a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a><span class="go"> zabbix_server | widget_field               | table | zabbix-srv</span>
</span><span id="__span-98-19"><a id="__codelineno-98-19" name="__codelineno-98-19" href="#__codelineno-98-19"></a><span class="go">(203 rows)</span>
</span></code></pre></div>
</details>
<ul>
<li>Verify Permissions: Confirm that the zabbix-srv user owns the tables and has
  the necessary permissions. You can check permissions for specific tables using
  the \dp command:</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Verify table permissions</p>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dp</span><span class="w"> </span><span class="ss">zabbix_server.*</span>
</span></code></pre></div>
</div>
<details class="example" open="open">
<summary>Example output</summary>
<div class="language-psql highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="gp">zabbix=&gt;</span><span class="w"> </span><span class="kp">\dp</span><span class="w"> </span><span class="ss">zabbix_server.*</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a><span class="go">                                                     Access privileges</span>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a><span class="go">    Schema     |            Name            |   Type   |         Access privileges          | Column privileges | Policies</span>
</span><span id="__span-100-4"><a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="go">---------------+----------------------------+----------+------------------------------------+-------------------+----------</span>
</span><span id="__span-100-5"><a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a><span class="go"> zabbix_server | acknowledges               | table    | &quot;zabbix-srv&quot;=arwdDxtm/&quot;zabbix-srv&quot;+|                   |</span>
</span><span id="__span-100-6"><a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a><span class="go">               |                            |          | &quot;zabbix-web&quot;=arwd/&quot;zabbix-srv&quot;     |                   |</span>
</span><span id="__span-100-7"><a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a><span class="go"> zabbix_server | actions                    | table    | &quot;zabbix-srv&quot;=arwdDxtm/&quot;zabbix-srv&quot;+|                   |</span>
</span><span id="__span-100-8"><a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a><span class="go">               |                            |          | &quot;zabbix-web&quot;=arwd/&quot;zabbix-srv&quot;     |                   |</span>
</span><span id="__span-100-9"><a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a><span class="go"> zabbix_server | alerts                     | table    | &quot;zabbix-srv&quot;=arwdDxtm/&quot;zabbix-srv&quot;+|                   |</span>
</span><span id="__span-100-10"><a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a><span class="go">               |                            |          | &quot;zabbix-web&quot;=arwd/&quot;zabbix-srv&quot;     |                   |</span>
</span><span id="__span-100-11"><a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a><span class="go"> zabbix_server | auditlog                   | table    | &quot;zabbix-srv&quot;=arwdDxtm/&quot;zabbix-srv&quot;+|                   |</span>
</span></code></pre></div>
</details>
<p>This will display the access privileges for all tables in the <code>zabbix_server</code>
schema. Ensure that <code>zabbix-srv</code> has the required privileges.</p>
<p>If everything looks correct, your tables are properly created and the
<code>zabbix-srv</code> user has the appropriate ownership and permissions. If you need to
adjust any permissions, you can do so using the GRANT commands as needed.</p>
<hr />
<h3 id="configure-firewall-to-allow-zabbix-trapper-connections">Configure firewall to allow Zabbix trapper connections</h3>
<p>Back on your Zabbix server machine, we need to ensure that the firewall is
configured to allow incoming connections to the Zabbix server.</p>
<p>Your Zabbix server needs to accept incoming connections from Zabbix agents,
senders, and proxies. By default, Zabbix uses port <code>10051/tcp</code> for these
connections. To allow these connections, you need to open this port in your
firewall.</p>
<div class="admonition info">
<p class="admonition-title">Open firewall for zabbix-trapper</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>sudo<span class="w"> </span>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>zabbix-server<span class="w"> </span>--permanent
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>sudo<span class="w"> </span>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">10051</span>/tcp
</span></code></pre></div></p>
</div>
<p>If the service is not recognized using <code>firewall-cmd --add-service</code>, you can
manually specify the port:</p>
<div class="admonition info">
<p class="admonition-title">Add port instead of the service name</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>firewall-cmd<span class="w"> </span>--add-port<span class="o">=</span><span class="m">10051</span>/tcp<span class="w"> </span>--permanent
</span></code></pre></div>
</div>
<hr />
<h3 id="starting-the-zabbix-server">Starting the Zabbix server</h3>
<p>With the Zabbix server configuration updated to connect to your database, you
can now start and enable the Zabbix server service. Run the following command to
enable the Zabbix server and ensure it starts automatically on boot:</p>
<details class="note" open="open">
<summary>Note</summary>
<p>Before restarting the Zabbix server after modifying its configuration, it is
considered best practice to validate the configuration to prevent potential
issues. Running a configuration check ensures that any errors are detected
beforehand, avoiding downtime caused by an invalid configuration. This can
be accomplished using the following command: <code>zabbix-server -T</code></p>
</details>
<div class="admonition info">
<p class="admonition-title">Enable and start zabbix-server service</p>
<p>Red Hat, SUSE and Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>zabbix-server<span class="w"> </span>--now
</span></code></pre></div></p>
</div>
<p>This command will start the Zabbix server service immediately and configure it
to launch on system startup. To verify that the Zabbix server is running
correctly, check the log file for any messages. You can view the latest entries
in the <code>Zabbix server</code> log file using:</p>
<div class="admonition info">
<p class="admonition-title">Check the log file</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>tail<span class="w"> </span>/var/log/zabbix/zabbix_server.log
</span></code></pre></div>
</div>
<p>Look for messages indicating that the server has started successfully. If there
are any issues, the log file will provide details to help with troubleshooting.</p>
<div class="admonition example">
<p class="admonition-title">Example output</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a>12074:20250225:145333.529 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>12074:20250225:145333.530 ****** Enabled features ******
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>12074:20250225:145333.530 SNMP monitoring:           YES
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a>12074:20250225:145333.530 IPMI monitoring:           YES
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>12074:20250225:145333.530 Web monitoring:            YES
</span><span id="__span-106-6"><a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>12074:20250225:145333.530 VMware monitoring:         YES
</span><span id="__span-106-7"><a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>12074:20250225:145333.530 SMTP authentication:       YES
</span><span id="__span-106-8"><a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>12074:20250225:145333.530 ODBC:                      YES
</span><span id="__span-106-9"><a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a>12074:20250225:145333.530 SSH support:               YES
</span><span id="__span-106-10"><a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a>12074:20250225:145333.530 IPv6 support:              YES
</span><span id="__span-106-11"><a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a>12074:20250225:145333.530 TLS support:               YES
</span><span id="__span-106-12"><a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a>12074:20250225:145333.530 ******************************
</span><span id="__span-106-13"><a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a>12074:20250225:145333.530 using configuration file: /etc/zabbix/zabbix_server.conf
</span><span id="__span-106-14"><a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a>12074:20250225:145333.545 current database version (mandatory/optional): 07020000/07020000
</span><span id="__span-106-15"><a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a>12074:20250225:145333.545 required mandatory version: 07020000
</span><span id="__span-106-16"><a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a>12075:20250225:145333.557 starting HA manager
</span><span id="__span-106-17"><a id="__codelineno-106-17" name="__codelineno-106-17" href="#__codelineno-106-17"></a>12075:20250225:145333.566 HA manager started in active mode
</span><span id="__span-106-18"><a id="__codelineno-106-18" name="__codelineno-106-18" href="#__codelineno-106-18"></a>12074:20250225:145333.567 server #0 started [main process]
</span><span id="__span-106-19"><a id="__codelineno-106-19" name="__codelineno-106-19" href="#__codelineno-106-19"></a>12076:20250225:145333.567 server #1 started [service manager #1]
</span><span id="__span-106-20"><a id="__codelineno-106-20" name="__codelineno-106-20" href="#__codelineno-106-20"></a>12077:20250225:145333.567 server #2 started [configuration syncer #1]
</span><span id="__span-106-21"><a id="__codelineno-106-21" name="__codelineno-106-21" href="#__codelineno-106-21"></a>12078:20250225:145333.718 server #3 started [alert manager #1]
</span><span id="__span-106-22"><a id="__codelineno-106-22" name="__codelineno-106-22" href="#__codelineno-106-22"></a>12079:20250225:145333.719 server #4 started [alerter #1]
</span><span id="__span-106-23"><a id="__codelineno-106-23" name="__codelineno-106-23" href="#__codelineno-106-23"></a>12080:20250225:145333.719 server #5 started [alerter #2]
</span><span id="__span-106-24"><a id="__codelineno-106-24" name="__codelineno-106-24" href="#__codelineno-106-24"></a>12081:20250225:145333.719 server #6 started [alerter #3]
</span><span id="__span-106-25"><a id="__codelineno-106-25" name="__codelineno-106-25" href="#__codelineno-106-25"></a>12082:20250225:145333.719 server #7 started [preprocessing manager #1]
</span><span id="__span-106-26"><a id="__codelineno-106-26" name="__codelineno-106-26" href="#__codelineno-106-26"></a>12083:20250225:145333.719 server #8 started [lld manager #1]
</span></code></pre></div>
</div>
<p>If there was an error and the server was not able to connect to the database you
would see something like this in the server log file :</p>
<div class="admonition example">
<p class="admonition-title">Example log with errors</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>12068:20250225:145309.018 Starting Zabbix Server. Zabbix 7.2.4 (revision c34078a4563).
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>12068:20250225:145309.018 ****** Enabled features ******
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>12068:20250225:145309.018 SNMP monitoring:           YES
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a>12068:20250225:145309.018 IPMI monitoring:           YES
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a>12068:20250225:145309.018 Web monitoring:            YES
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a>12068:20250225:145309.018 VMware monitoring:         YES
</span><span id="__span-107-7"><a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a>12068:20250225:145309.018 SMTP authentication:       YES
</span><span id="__span-107-8"><a id="__codelineno-107-8" name="__codelineno-107-8" href="#__codelineno-107-8"></a>12068:20250225:145309.018 ODBC:                      YES
</span><span id="__span-107-9"><a id="__codelineno-107-9" name="__codelineno-107-9" href="#__codelineno-107-9"></a>12068:20250225:145309.018 SSH support:               YES
</span><span id="__span-107-10"><a id="__codelineno-107-10" name="__codelineno-107-10" href="#__codelineno-107-10"></a>12068:20250225:145309.018 IPv6 support:              YES
</span><span id="__span-107-11"><a id="__codelineno-107-11" name="__codelineno-107-11" href="#__codelineno-107-11"></a>12068:20250225:145309.018 TLS support:               YES
</span><span id="__span-107-12"><a id="__codelineno-107-12" name="__codelineno-107-12" href="#__codelineno-107-12"></a>12068:20250225:145309.018 ******************************
</span><span id="__span-107-13"><a id="__codelineno-107-13" name="__codelineno-107-13" href="#__codelineno-107-13"></a>12068:20250225:145309.018 using configuration file: /etc/zabbix/zabbix_server.conf
</span><span id="__span-107-14"><a id="__codelineno-107-14" name="__codelineno-107-14" href="#__codelineno-107-14"></a>12068:20250225:145309.027 [Z3005] query failed: [1146] Table &#39;zabbix.users&#39; doesn&#39;t exist [select userid from users limit 1]
</span><span id="__span-107-15"><a id="__codelineno-107-15" name="__codelineno-107-15" href="#__codelineno-107-15"></a>12068:20250225:145309.027 cannot use database &quot;zabbix&quot;: database is not a Zabbix database
</span></code></pre></div>
</div>
<p>If that is the case, double-check your database connection settings in the
<code>/etc/zabbix/zabbix_server.d/database.conf</code> file and ensure that the database is
properly populated as described in the previous steps. Also check firewall rules
and when using PostgreSQL make sure that <code>pg_hba.conf</code> is correctly configured
to allow connections from the Zabbix server.</p>
<p>Let's check the Zabbix server service to see if it's enabled so that it survives
a reboot</p>
<div class="admonition info">
<p class="admonition-title">check status of zabbix-server service</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>zabbix-server
</span></code></pre></div>
</div>
<p>???+ example "Example output" ```shell-session localhost:~&gt; sudo systemctl
status zabbix-server</p>
<div class="language-text highlight"><pre><span></span><code>● zabbix-server.service - Zabbix Server
     Loaded: loaded (/usr/lib/systemd/system/zabbix-server.service; enabled; preset: disabled)
     Active: active (running) since Tue 2025-02-25 14:53:33 CET; 26min ago
   Main PID: 12074 (zabbix_server)
      Tasks: 77 (limit: 24744)
     Memory: 71.5M
        CPU: 18.535s
     CGroup: /system.slice/zabbix-server.service
             ├─12074 /usr/sbin/zabbix_server -c /etc/zabbix/zabbix_server.conf
             ├─12075 &quot;/usr/sbin/zabbix_server: ha manager&quot;
             ├─12076 &quot;/usr/sbin/zabbix_server: service manager #1 [processed 0 events, updated 0 event tags, deleted 0 problems, synced 0 service updates, idle 5.027667 sec during 5.042628 sec]&quot;
             ├─12077 &quot;/usr/sbin/zabbix_server: configuration syncer [synced configuration in 0.051345 sec, idle 10 sec]&quot;
             ├─12078 &quot;/usr/sbin/zabbix_server: alert manager #1 [sent 0, failed 0 alerts, idle 5.030391 sec during 5.031944 sec]&quot;
             ├─12079 &quot;/usr/sbin/zabbix_server: alerter #1 started&quot;
             ├─12080 &quot;/usr/sbin/zabbix_server: alerter #2 started&quot;
             ├─12081 &quot;/usr/sbin/zabbix_server: alerter #3 started&quot;
             ├─12082 &quot;/usr/sbin/zabbix_server: preprocessing manager #1 [queued 0, processed 0 values, idle 5.023818 sec during 5.024830 sec]&quot;
             ├─12083 &quot;/usr/sbin/zabbix_server: lld manager #1 [processed 0 LLD rules, idle 5.017278sec during 5.017574 sec]&quot;
             ├─12084 &quot;/usr/sbin/zabbix_server: lld worker #1 [processed 1 LLD rules, idle 21.031209 sec during 21.063879 sec]&quot;
             ├─12085 &quot;/usr/sbin/zabbix_server: lld worker #2 [processed 1 LLD rules, idle 43.195541 sec during 43.227934 sec]&quot;
             ├─12086 &quot;/usr/sbin/zabbix_server: housekeeper [startup idle for 30 minutes]&quot;
             ├─12087 &quot;/usr/sbin/zabbix_server: timer #1 [updated 0 hosts, suppressed 0 events in 0.017595 sec, idle 59 sec]&quot;
             ├─12088 &quot;/usr/sbin/zabbix_server: http poller #1 [got 0 values in 0.000071 sec, idle 5 sec]&quot;
             ├─12089 &quot;/usr/sbin/zabbix_server: browser poller #1 [got 0 values in 0.000066 sec, idle 5 sec]&quot;
             ├─12090 &quot;/usr/sbin/zabbix_server: discovery manager #1 [processing 0 rules, 0 unsaved checks]&quot;
             ├─12091 &quot;/usr/sbin/zabbix_server: history syncer #1 [processed 4 values, 3 triggers in 0.027382 sec, idle 1 sec]&quot;
             ├─12092 &quot;/usr/sbin/zabbix_server: history syncer #2 [processed 0 values, 0 triggers in 0.000077 sec, idle 1 sec]&quot;
             ├─12093 &quot;/usr/sbin/zabbix_server: history syncer #3 [processed 0 values, 0 triggers in 0.000076 sec, idle 1 sec]&quot;
             ├─12094 &quot;/usr/sbin/zabbix_server: history syncer #4 [processed 0 values, 0 triggers in 0.000020 sec, idle 1 sec]&quot;
             ├─12095 &quot;/usr/sbin/zabbix_server: escalator #1 [processed 0 escalations in 0.011627 sec, idle 3 sec]&quot;
             ├─12096 &quot;/usr/sbin/zabbix_server: proxy poller #1 [exchanged data with 0 proxies in 0.000081 sec, idle 5 sec]&quot;
             ├─12097 &quot;/usr/sbin/zabbix_server: self-monitoring [processed data in 0.000068 sec, idle 1 sec]&quot;
```
</code></pre></div>
<p>This concludes our chapter on installing and configuring the Zabbix server.</p>
<hr />
<h2 id="installation-du-frontend">Installation du frontend</h2>
<p>Before configuring the Zabbix frontend, ensure the required packages are
installed on your chosen frontend server. This server can be the same one where
the Zabbix server packages were previously installed, or it can be a separate
machine. Make sure the frontend machine is prepared as outlined in <a href="#preparing-the-server-for-zabbix">Preparing
the server for Zabbix</a>, and perform all
subsequent steps on the server designated for the frontend.</p>
<hr />
<h3 id="installing-the-frontend-with-nginx">Installing the frontend with NGINX</h3>
<div class="admonition info">
<p class="admonition-title">install frontend packages</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="c1"># When using MySQL/MariaDB</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>dnf<span class="w"> </span>install<span class="w"> </span>zabbix-nginx-conf<span class="w"> </span>zabbix-web-mysql
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a><span class="c1"># or when using PostgreSQL</span>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a>dnf<span class="w"> </span>install<span class="w"> </span>zabbix-nginx-conf<span class="w"> </span>zabbix-web-pgsql
</span></code></pre></div>
SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="c1"># When using MySQL/MariaDB</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>zypper<span class="w"> </span>install<span class="w"> </span>zabbix-nginx-conf<span class="w"> </span>zabbix-web-mysql<span class="w"> </span>php8-openssl<span class="w"> </span>php8-xmlreader<span class="w"> </span>php8-xmlwriter
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a><span class="c1"># or when using PostgreSQL</span>
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>zypper<span class="w"> </span>install<span class="w"> </span>zabbix-nginx-conf<span class="w"> </span>zabbix-web-pgsql<span class="w"> </span>php8-openssl<span class="w"> </span>php8-xmlreader<span class="w"> </span>php8-xmlwriter
</span></code></pre></div></p>
<details class="note" open="open">
<summary>Suse Linux Enterprise Server</summary>
<p>On SUSE Linux Enterprise Server (SLES), ensure you are subscribed to the
"SUSE Linux Enterprise Module Web and Scripting" repository to access
the necessary PHP 8 packages required for the Zabbix frontend installation:
(on SLES versions &lt; 16, the command is "<code>SUSEConnect</code>" instead of "<code>suseconnect</code>")</p>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>suseconnect<span class="w"> </span>-p<span class="w"> </span>sle-module-web-scripting/16/x86_64
</span></code></pre></div>
The actual URL for web scripting module may be different depending on particular service pack. Use the following command to determine the right one.
<div class="language-bash highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>suseconnect<span class="w"> </span>--list-extensions
</span></code></pre></div></p>
</details>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="c1"># When using MySQL/MariaDB</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>zabbix-frontend-php<span class="w"> </span>php8.3-mysql<span class="w"> </span>zabbix-nginx-conf
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a><span class="c1"># or when using PostgreSQL</span>
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>zabbix-frontend-php<span class="w"> </span>php8.3-pgsql<span class="w"> </span>zabbix-nginx-conf
</span></code></pre></div></p>
</div>
<p>This command will install the front-end packages along with the required
dependencies for Nginx.</p>
<p>As of SUSE 16 SELinux is now the default security module instead of AppArmor. By
default PHP-FPM is not allowed by SELinux on SUSE to
- map exec memory required for PHP JIT compilation,
- connect to Zabbix server or
- connect to the database server over TCP. We need to tell SELinux to allow all
  this:</p>
<div class="admonition info">
<p class="admonition-title">SELinux: Allow PHP-FPM to map exec memory</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a>setsebool<span class="w"> </span>-P<span class="w"> </span>httpd_execmem<span class="w"> </span><span class="m">1</span>
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>setsebool<span class="w"> </span>-P<span class="w"> </span>httpd_can_connect_zabbix<span class="w"> </span><span class="m">1</span>
</span><span id="__span-114-3"><a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a>setsebool<span class="w"> </span>-P<span class="w"> </span>httpd_can_network_connect_db<span class="w"> </span><span class="m">1</span>
</span></code></pre></div>
</div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>To troubleshoot SELinux issues, it is recommended to install the <code>setroubleshoot</code>
package which will log any SELinux denials in the system log and provide
suggestions on how to resolve them.</p>
</details>
<p>Depending on your Linux distribution defaults, PHP-FPM may by default not be
allowed by SystemD to write to the <code>/etc/zabbix/web</code> directory required for the
Zabbix frontend setup. To enable this we need to create a drop-in file to allow
this:</p>
<div class="admonition info">
<p class="admonition-title">SystemD: Allow PHP-FPM to write to /etc/zabbix/web</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>systemctl<span class="w"> </span>edit<span class="w"> </span>php-fpm
</span></code></pre></div>
<p>This will open an editor to create a drop-in file <code>/etc/systemd/system/php-fpm.service.d/override.conf</code>
which will override or extend the existing service file.</p>
<p>Add the following lines to the file:</p>
<div class="language-ini highlight"><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="k">[Service]</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="na">ReadWritePaths</span><span class="o">=</span><span class="s">/etc/zabbix/web</span>
</span></code></pre></div>
<p>Then exit the editor and reload the SystemD configuration:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>systemctl<span class="w"> </span>daemon-reload
</span></code></pre></div>
</div>
<details class="note" open="open">
<summary>How is SystemD preventing PHP-FPM from writing to /etc/zabbix/web?</summary>
<p>On many modern Linux distributions, SystemD employs a security feature known as
sandboxing to restrict the capabilities of services. This is done to enhance
security by limiting the access of services to only the resources they need to function.
By default, PHP-FPM may be restricted from writing to certain directories,
including <code>/etc/zabbix/web</code>, to prevent potential security vulnerabilities.
This is enforced through SystemD's <code>ProtectSystem</code> and <code>ReadWritePaths</code> directives, which
control the file system access of services.</p>
</details>
<details class="tip" open="open">
<summary>Tip</summary>
<p>Normally write access to <code>/etc/zabbix/web</code> is only needed during the initial setup
of the Zabbix frontend. After the setup is complete you can remove the drop-in
file again to further harden the security of your system.</p>
</details>
<p>First thing we have to do is alter the Nginx configuration file so that we don't
use the standard config and serve the Zabbix frontend on port 80.</p>
<div class="admonition info">
<p class="admonition-title">Edit nginx config for Red Hat</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>vi<span class="w"> </span>/etc/nginx/nginx.conf
</span></code></pre></div>
</div>
<p>In this configuration file look for the following block that starts with <code>server
{</code>:</p>
<div class="admonition example">
<p class="admonition-title">Original config</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="k">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>
</span><span id="__span-119-3"><a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="s">[::]:80</span><span class="p">;</span>
</span><span id="__span-119-4"><a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a><span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">*</span><span class="p">;</span>
</span><span id="__span-119-5"><a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a><span class="kn">...</span>
</span></code></pre></div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>This block may be different depending on your distribution and Nginx version.</p>
</details>
</div>
<p>Then, comment out the any <code>listen</code> and <code>server_name</code> directives to disable the
default http server configuration. You can do this by adding a <code>#</code> at the
beginning of each line, like in the example below:</p>
<div class="admonition example">
<p class="admonition-title">Config after edit</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="k">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a><span class="w">    </span><span class="c1">#listen 80;</span>
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a><span class="w">    </span><span class="c1">#listen [::]:80;</span>
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a><span class="w">    </span><span class="c1">#server_name *;</span>
</span><span id="__span-120-5"><a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a><span class="kn">...</span>
</span></code></pre></div>
</div>
<p>The Zabbix configuration file must now be modified to take over the default
service on port 80 we just disabled. Open the following file for editing:</p>
<div class="admonition info">
<p class="admonition-title">Edit Zabbix config for nginx</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>sudo<span class="w"> </span>vi<span class="w"> </span>/etc/nginx/conf.d/zabbix.conf
</span></code></pre></div>
</div>
<p>And alter the following lines:</p>
<div class="admonition example">
<p class="admonition-title">Original config</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="k">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a><span class="c1">#       listen          8080;</span>
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a><span class="c1">#       server_name     example.com;</span>
</span><span id="__span-122-4"><a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a>
</span><span id="__span-122-5"><a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a><span class="w">        </span><span class="kn">root</span><span class="w">    </span><span class="s">/usr/share/zabbix</span><span class="p">;</span>
</span><span id="__span-122-6"><a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>
</span><span id="__span-122-7"><a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a><span class="w">        </span><span class="kn">index</span><span class="w">   </span><span class="s">index.php</span><span class="p">;</span>
</span><span id="__span-122-8"><a id="__codelineno-122-8" name="__codelineno-122-8" href="#__codelineno-122-8"></a><span class="kn">...</span>
</span></code></pre></div>
</div>
<p>Remove the <code>#</code> in front of the first 2 lines and modify them with the correct
port and domain for your front-end.</p>
<details class="tip" open="open">
<summary>Tip</summary>
<p>In case you don't have a domain you can replace <code>servername</code> with <code>_</code> 
like in the example below:</p>
</details>
<div class="admonition example">
<p class="admonition-title">Config after the edit</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="k">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-123-2"><a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a><span class="w">        </span><span class="kn">listen</span><span class="w">          </span><span class="mi">80</span><span class="p">;</span>
</span><span id="__span-123-3"><a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a><span class="w">        </span><span class="kn">server_name</span><span class="w">     </span><span class="s">_</span><span class="p">;</span>
</span><span id="__span-123-4"><a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a>
</span><span id="__span-123-5"><a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a><span class="w">         </span><span class="kn">root</span><span class="w">    </span><span class="s">/usr/share/zabbix</span><span class="p">;</span>
</span><span id="__span-123-6"><a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a>
</span><span id="__span-123-7"><a id="__codelineno-123-7" name="__codelineno-123-7" href="#__codelineno-123-7"></a><span class="w">         </span><span class="kn">index</span><span class="w">   </span><span class="s">index.php</span><span class="p">;</span>
</span></code></pre></div>
</div>
<p>The web server and PHP-FPM service are now ready for activation and persistent
startup. Execute the following commands to enable and start them immediately:</p>
<div class="admonition info">
<p class="admonition-title">Restart the front-end services</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>nginx<span class="w"> </span>php-fpm<span class="w"> </span>--now
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>nginx<span class="w"> </span>php8.3-fpm<span class="w"> </span>--now
</span></code></pre></div></p>
</div>
<p>Let's verify if the service is properly started and enabled so that it survives
our reboot next time.</p>
<div class="admonition info">
<p class="admonition-title">Check if the service is running</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>nginx
</span></code></pre></div>
</div>
<details class="example" open="open">
<summary>Example output</summary>
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="go">localhost:~&gt; sudo systemctl status nginx</span>
</span><span id="__span-127-2"><a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a><span class="go">● nginx.service - The nginx HTTP and reverse proxy server</span>
</span><span id="__span-127-3"><a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a><span class="go">      Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: disabled)</span>
</span><span id="__span-127-4"><a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a><span class="go">     Drop-In: /usr/lib/systemd/system/nginx.service.d</span>
</span><span id="__span-127-5"><a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a><span class="go">              └─php-fpm.conf</span>
</span><span id="__span-127-6"><a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a><span class="go">      Active: active (running) since Mon 2023-11-20 11:42:18 CET; 30min ago</span>
</span><span id="__span-127-7"><a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a><span class="go">    Main PID: 1206 (nginx)</span>
</span><span id="__span-127-8"><a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a><span class="go">       Tasks: 2 (limit: 12344)</span>
</span><span id="__span-127-9"><a id="__codelineno-127-9" name="__codelineno-127-9" href="#__codelineno-127-9"></a><span class="go">      Memory: 4.8M</span>
</span><span id="__span-127-10"><a id="__codelineno-127-10" name="__codelineno-127-10" href="#__codelineno-127-10"></a><span class="go">         CPU: 38ms</span>
</span><span id="__span-127-11"><a id="__codelineno-127-11" name="__codelineno-127-11" href="#__codelineno-127-11"></a><span class="go">      CGroup: /system.slice/nginx.service</span>
</span><span id="__span-127-12"><a id="__codelineno-127-12" name="__codelineno-127-12" href="#__codelineno-127-12"></a><span class="go">              ├─1206 &quot;nginx: master process /usr/sbin/nginx&quot;</span>
</span><span id="__span-127-13"><a id="__codelineno-127-13" name="__codelineno-127-13" href="#__codelineno-127-13"></a><span class="go">              └─1207 &quot;nginx: worker process&quot;</span>
</span><span id="__span-127-14"><a id="__codelineno-127-14" name="__codelineno-127-14" href="#__codelineno-127-14"></a>
</span><span id="__span-127-15"><a id="__codelineno-127-15" name="__codelineno-127-15" href="#__codelineno-127-15"></a><span class="go">Nov 20 11:42:18 zabbix-srv systemd[1]: Starting The nginx HTTP and reverse proxy server...</span>
</span><span id="__span-127-16"><a id="__codelineno-127-16" name="__codelineno-127-16" href="#__codelineno-127-16"></a><span class="go">Nov 20 11:42:18 zabbix-srv nginx[1204]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span>
</span><span id="__span-127-17"><a id="__codelineno-127-17" name="__codelineno-127-17" href="#__codelineno-127-17"></a><span class="go">Nov 20 11:42:18 zabbix-srv nginx[1204]: nginx: configuration file /etc/nginx/nginx.conf test is successful</span>
</span><span id="__span-127-18"><a id="__codelineno-127-18" name="__codelineno-127-18" href="#__codelineno-127-18"></a><span class="go">Nov 20 11:42:18 zabbix-srv systemd[1]: Started The nginx HTTP and reverse proxy server.</span>
</span></code></pre></div>
</details>
<p>With the service operational and configured for automatic startup, the final
preparatory step involves adjusting the firewall to permit inbound HTTP traffic.
Execute the following commands:</p>
<div class="admonition info">
<p class="admonition-title">Configure the firewall</p>
<p>Red Hat / SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>http<span class="w"> </span>--permanent
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a>sudo<span class="w"> </span>ufw<span class="w"> </span>allow<span class="w"> </span><span class="m">80</span>/tcp
</span></code></pre></div></p>
</div>
<p>Open your browser and go to the url or ip of your front-end :</p>
<div class="admonition info">
<p class="admonition-title">Front-end configuration</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>http://&lt;ip or dns of the zabbix frontend server&gt;/
</span></code></pre></div>
</div>
<p>If all goes well you should be greeted with a Zabbix welcome page. In case you
have an error check the configuration again or have a look at the nginx log file
<code>/var/log/nginx/error.log</code> or run the following command :</p>
<div class="admonition info">
<div class="language-bash highlight"><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>journalctl<span class="w"> </span>-xeu<span class="w"> </span>nginx
</span></code></pre></div>
</div>
<p>This should help you in locating the errors you made.</p>
<p>Upon accessing the appropriate URL, a page resembling the one illustrated below
should appear:</p>
<p><img align="left" alt="overview" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-setup.png" /></p>
<p><em>1.4 Zabbix welcome</em></p>
<p>The Zabbix frontend presents a limited array of available localizations, as
shown.</p>
<p><img align="left" alt="overview language" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-setuplanguage.png" /></p>
<p><em>!.5 Zabbix welcome language choice</em></p>
<p>What if we want to install Chinese as language or another language from the
list? Run the next command to get a list of all locales available for your OS.</p>
<div class="admonition info">
<p class="admonition-title">Install language packs</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>dnf<span class="w"> </span>list<span class="w"> </span>glibc-langpack-*
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>localectl<span class="w"> </span>list-locales
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>apt-cache<span class="w"> </span>search<span class="w"> </span>language-pack
</span></code></pre></div></p>
</div>
<p>Users on Ubuntu will probably notice following error `"Locale for language
"en_US" is not found on the web server."``</p>
<div class="admonition info">
<p class="admonition-title">This can be solved easy with the following commands.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a>sudo<span class="w"> </span>locale-gen<span class="w"> </span>en_US.UTF-8
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a>sudo<span class="w"> </span>update-locale
</span><span id="__span-135-3"><a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx<span class="w"> </span>php8.3-fpm
</span></code></pre></div>
</div>
<p>This will give you a list like:</p>
<details class="example" open="open">
<summary>Example output</summary>
<p>Red Hat
<div class="language-text highlight"><pre><span></span><code><span id="__span-136-1"><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a>Installed Packages
</span><span id="__span-136-2"><a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a>glibc-langpack-en.x86_64
</span><span id="__span-136-3"><a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a>Available Packages
</span><span id="__span-136-4"><a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a>glibc-langpack-aa.x86_64
</span><span id="__span-136-5"><a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a>---
</span><span id="__span-136-6"><a id="__codelineno-136-6" name="__codelineno-136-6" href="#__codelineno-136-6"></a>glibc-langpack-zu.x86_64
</span></code></pre></div></p>
<p>SUSE
<div class="language-text highlight"><pre><span></span><code><span id="__span-137-1"><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a>C.UTF-8
</span><span id="__span-137-2"><a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a>aa_DJ.UTF-8
</span><span id="__span-137-3"><a id="__codelineno-137-3" name="__codelineno-137-3" href="#__codelineno-137-3"></a>af_ZA.UTF-8
</span><span id="__span-137-4"><a id="__codelineno-137-4" name="__codelineno-137-4" href="#__codelineno-137-4"></a>an_ES.UTF-8
</span><span id="__span-137-5"><a id="__codelineno-137-5" name="__codelineno-137-5" href="#__codelineno-137-5"></a>---
</span><span id="__span-137-6"><a id="__codelineno-137-6" name="__codelineno-137-6" href="#__codelineno-137-6"></a>zh_SG.UTF-8
</span><span id="__span-137-7"><a id="__codelineno-137-7" name="__codelineno-137-7" href="#__codelineno-137-7"></a>zh_TW.UTF-8
</span><span id="__span-137-8"><a id="__codelineno-137-8" name="__codelineno-137-8" href="#__codelineno-137-8"></a>zu_ZA.UTF-8
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-138-1"><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>language-pack-kab - translation updates for language Kabyle
</span><span id="__span-138-2"><a id="__codelineno-138-2" name="__codelineno-138-2" href="#__codelineno-138-2"></a>language-pack-kab-base - translations for language Kabyle
</span><span id="__span-138-3"><a id="__codelineno-138-3" name="__codelineno-138-3" href="#__codelineno-138-3"></a>language-pack-kn - translation updates for language Kannada
</span><span id="__span-138-4"><a id="__codelineno-138-4" name="__codelineno-138-4" href="#__codelineno-138-4"></a>language-pack-kn-base - translations for language Kannada
</span><span id="__span-138-5"><a id="__codelineno-138-5" name="__codelineno-138-5" href="#__codelineno-138-5"></a>---
</span><span id="__span-138-6"><a id="__codelineno-138-6" name="__codelineno-138-6" href="#__codelineno-138-6"></a>language-pack-ko - translation updates for language Korean
</span><span id="__span-138-7"><a id="__codelineno-138-7" name="__codelineno-138-7" href="#__codelineno-138-7"></a>language-pack-ko-base - translations for language Korean
</span><span id="__span-138-8"><a id="__codelineno-138-8" name="__codelineno-138-8" href="#__codelineno-138-8"></a>language-pack-ku - translation updates for language Kurdish
</span><span id="__span-138-9"><a id="__codelineno-138-9" name="__codelineno-138-9" href="#__codelineno-138-9"></a>language-pack-ku-base - translations for language Kurdish
</span><span id="__span-138-10"><a id="__codelineno-138-10" name="__codelineno-138-10" href="#__codelineno-138-10"></a>language-pack-lt - translation updates for language Lithuanian
</span></code></pre></div></p>
</details>
<p>Let's search for our Chinese locale to see if it is available. As you can see
the code starts with zh.</p>
<div class="admonition info">
<p class="admonition-title">search for language pack</p>
<p>Red Hat
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-139-1"><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a><span class="go">~# dnf list glibc-langpack-* | grep zh</span>
</span><span id="__span-139-2"><a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a><span class="go">glibc-langpack-zh.x86_64</span>
</span><span id="__span-139-3"><a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a><span class="go">glibc-langpack-lzh.x86_64</span>
</span></code></pre></div></p>
<p>SUSE
<div class="language-shell-session highlight"><pre><span></span><code><span id="__span-140-1"><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a><span class="go">~&gt; localectl list-locales | grep zh</span>
</span><span id="__span-140-2"><a id="__codelineno-140-2" name="__codelineno-140-2" href="#__codelineno-140-2"></a><span class="go">zh_CN.UTF-8</span>
</span><span id="__span-140-3"><a id="__codelineno-140-3" name="__codelineno-140-3" href="#__codelineno-140-3"></a><span class="go">zh_HK.UTF-8</span>
</span><span id="__span-140-4"><a id="__codelineno-140-4" name="__codelineno-140-4" href="#__codelineno-140-4"></a><span class="go">zh_SG.UTF-8</span>
</span><span id="__span-140-5"><a id="__codelineno-140-5" name="__codelineno-140-5" href="#__codelineno-140-5"></a><span class="go">zh_TW.UTF-8</span>
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-141-1"><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a>sudo<span class="w"> </span>apt-cache<span class="w"> </span>search<span class="w"> </span>language-pack<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>zh
</span></code></pre></div></p>
</div>
<p>On RedHat and Ubuntu, the command outputs two lines; however, given the
identified language code, 'zh_CN,' only the first package requires installation.
on SUSE either only locales <code>C.UTF-8</code> and <code>en_US.UTF-8</code> are install or all
available locales are installed, depending on whether the package <code>glibc-locale</code>
is installed or not.</p>
<div class="admonition info">
<p class="admonition-title">Install the locale package</p>
<p>Red Hat
<div class="language-bash highlight"><pre><span></span><code><span id="__span-142-1"><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>glibc-langpack-zh.x86_64
</span><span id="__span-142-2"><a id="__codelineno-142-2" name="__codelineno-142-2" href="#__codelineno-142-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx<span class="w"> </span>php-fpm
</span></code></pre></div></p>
<p>SUSE
<div class="language-bash highlight"><pre><span></span><code><span id="__span-143-1"><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a>zypper<span class="w"> </span>install<span class="w"> </span>glibc-locale
</span><span id="__span-143-2"><a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx<span class="w"> </span>php-fpm
</span></code></pre></div></p>
<p>Ubuntu
<div class="language-bash highlight"><pre><span></span><code><span id="__span-144-1"><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>language-pack-zh-hans
</span><span id="__span-144-2"><a id="__codelineno-144-2" name="__codelineno-144-2" href="#__codelineno-144-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx<span class="w"> </span>php8.3-fpm
</span></code></pre></div></p>
</div>
<p>When we return now to our front-end we are able to select the Chinese language,
after a reload of our browser.</p>
<p><img align="left" alt="select language" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-selectlanguage.png" /></p>
<p><em>1.6 Zabbix select language</em></p>
<details class="note" open="open">
<summary>Note</summary>
<p>If your preferred language is not available in the Zabbix front-end, don't
worry, it simply means that the translation is either incomplete or not yet
available. Zabbix is an open-source project that relies on community contributions
for translations, so you can help improve it by contributing your own translations.</p>
</details>
<p>Visit the translation page at
<a href="https://translate.zabbix.com/">https://translate.zabbix.com/</a> to assist with
the translation efforts. Once your translation is complete and reviewed, it will
be included in the next minor patch version of Zabbix. Your contributions help
make Zabbix more accessible and improve the overall user experience for
everyone.</p>
<p>When you're satisfied with the available translations, click <code>Next</code>. You will
then be taken to a screen to verify that all prerequisites are satisfied. If any
prerequisites are not fulfilled, address those issues first. However, if
everything is in order, you should be able to proceed by clicking <code>Next</code>.</p>
<p><img align="left" alt="pre-requisites" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-prerequisites.png" /></p>
<p><em>1.7 Zabbix pre-requisites</em></p>
<p>On the next page, you'll configure the database connection parameters:</p>
<ol>
<li><code>Select the Database Type</code>: Choose either MySQL or PostgreSQL depending on
   your setup.</li>
<li><code>Enter the Database Host</code>: Provide the IP address or DNS name of your
   database server. Use port 3306 for MariaDB/MySQL or 5432 for PostgreSQL.</li>
<li><code>Enter the Database Name</code>: Specify the name of your database. In our case, it
   is zabbix. If you are using PostgreSQL, you will also need to provide the
   schema name, which is zabbix_server in our case.</li>
<li><code>Enther the Database Schema</code>: Only for PostgreSQL users, enter the schema
   name created for Zabbix server, which is <code>zabbix_server</code> in our case.</li>
<li><code>Enter the Database User</code>: Input the database user created for the web
   front-end, remember in our basic installation guide we created 2 users
   <code>zabbix-web</code> and <code>zabbix-srv</code>. One for the frontend and the other one for our
   zabbix server so here we will use the user <code>zabbix-web</code>. Enter the
   corresponding password for this user.</li>
</ol>
<p>Ensure that the <code>Database TLS encryption</code> option is not selected, and then click
<code>Next step</code> to proceed.</p>
<p><img align="left" alt="dbconnection" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-dbconnection.png" /></p>
<p><em>1.8 Zabbix connections</em></p>
<p>You're almost finished with the setup! The final steps involve:</p>
<ol>
<li><code>Assigning an Instance Name</code>: Choose a descriptive name for your Zabbix
   instance.</li>
<li><code>Selecting the Timezone</code>: Choose the timezone that matches your location or
   your preferred time zone for the Zabbix interface.</li>
<li><code>Setting the Default Time Format</code>: Select the default time format you prefer
   to use.</li>
<li><strong>Encrypt connections from Web interface</strong>: I marked this box but you should
   not. This box is to encrypt communications between Zabbix frontend and your
   browser. We will cover this later. Once these settings are configured, you
   can complete the setup and proceed with any final configuration steps as
   needed.</li>
</ol>
<details class="note" open="open">
<summary>Note</summary>
<p>It's a good practice to set your Zabbix server to the UTC timezone, especially
when managing systems across multiple timezones. Using UTC helps ensure consistency
in time-sensitive actions and events, as the server’s timezone is often used for
calculating and displaying time-related information.</p>
</details>
<p><img align="left" alt="settings" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-settings.png" /></p>
<p><em>1.9 Zabbix summary</em></p>
<p>After clicking <code>Next step</code> again, you'll be taken to a page confirming that the
configuration was successful. Click <code>Finish</code> to complete the setup process.</p>
<p><img align="left" alt="settings" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-final.png" /></p>
<p><em>1.10 Zabbix install</em></p>
<p>We are now ready to login :</p>
<p><img alt="settings" src="../../../ch01-zabbix-components/basic-installation/ch01-basic-installation-login.png" /></p>
<p><em>1.11 Zabbix login</em></p>
<ul>
<li>Login : Admin</li>
<li>Password : zabbix</li>
</ul>
<p>This concludes our topic on setting up the Zabbix server. If you're interested
in securing your front-end, I recommend checking out the topic Securing Zabbix
for additional guidance and best practices.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>If you are not able to safe your configuration at the end make sure SeLinux
is disabled. It is possible that it will block access to certain files or even
the database.</p>
</details>
<h2 id="conclusion">Conclusion</h2>
<p>With this, we conclude our journey through setting up Zabbix and configuring it
with MySQL or PostgreSQL on RHEL or SUSE-based systems or Ubuntu. We have walked
through the essential steps of preparing the environment, installing the
necessary components, and ensuring a fully functional Zabbix server. From
database selection to web frontend configuration with Nginx, each decision has
been aimed at creating a robust and efficient monitoring solution.</p>
<p>At this stage, your Zabbix instance is operational, providing the foundation for
advanced monitoring and alerting. In the upcoming chapters, we will delve into
fine-tuning Zabbix, optimizing performance, and exploring key features that
transform it into a powerful observability platform.</p>
<p>Now that your Zabbix environment is up and running, let’s take it to the next
level.</p>
<h2 id="questions">Questions</h2>
<ol>
<li>Should I choose MySQL or PostgreSQL as the database back-end? Why?</li>
<li>What version of Zabbix should I install for compatibility and stability?</li>
<li>What port does my DB use ?</li>
<li>What Zabbix logs should I check for troubleshooting common issues?</li>
</ol>
<h2 id="url-utiles">URL utiles</h2>
<ul>
<li><a href="https://en.opensuse.org/SDB:PostgreSQL">https://en.opensuse.org/SDB:PostgreSQL</a></li>
<li><a href="https://help.ubuntu.com/community/PostgreSQL">https://help.ubuntu.com/community/PostgreSQL</a></li>
<li><a href="https://www.postgresql.org/docs/current/ddl-priv.html">https://www.postgresql.org/docs/current/ddl-priv.html</a></li>
<li><a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual">https://www.zabbix.com/documentation/current/en/manual</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/installation/requirements">https://www.zabbix.com/documentation/current/en/manual/installation/requirements</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/installation/install_from_packages">https://www.zabbix.com/documentation/current/en/manual/installation/install_from_packages</a></li>
</ul>







  
  






                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Stichting The Monitoring Penmasters
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.tags", "navigation.expand", "navigation.prune", "navigation.path", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.view", "content.tags"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": {"index": "tags.md"}, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/tags-data-attr.js?v=514f4d1ef40cb7c1bed03bcbf9a447d4f11fa141"></script>
      
    
    
        
		
		
    

  </body>
</html>