
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Secure your Zabbix frontend with HTTPS using self-signed SSL certificates on
Nginx or Apache. Step-by-step guide to generating certificates, configuring,
and protecting your monitoring data with encrypted connections.
">
      
      
        <meta name="author" content="The Monitoring Penmasters">
      
      
        <link rel="canonical" href="https://thezabbixbook.com/ru/ch13-advanced-security/securing-frontend/">
      
      
        <link rel="prev" href="../selinux-zabbix/">
      
      
        <link rel="next" href="../agent-security/">
      
      
        
          <link rel="alternate" href="../../../fr/ch13-advanced-security/securing-frontend/" hreflang="fr">
        
          <link rel="alternate" href="../../../nl/ch13-advanced-security/securing-frontend/" hreflang="nl">
        
          <link rel="alternate" href="../../../pt_BR/ch13-advanced-security/securing-frontend/" hreflang="pt_BR">
        
          <link rel="alternate" href="./" hreflang="ru">
        
          <link rel="alternate" href="../../../ch13-advanced-security/securing-frontend/" hreflang="en">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Securing the frontend - Zabbix Book</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css?v=514f4d1ef40cb7c1bed03bcbf9a447d4f11fa141">
    
      <link rel="stylesheet" href="../../../stylesheets/linewrap.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    
    

    <meta property="og:title" content="Securing the frontend">
    <meta property="og:description" content="Secure your Zabbix frontend with HTTPS using self-signed SSL certificates on Nginx or Apache. Step-by-step guide to generating certificates, configuring, and protecting your monitoring data with encrypted connections.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thezabbixbook.com/ru/ch13-advanced-security/securing-frontend/">
    <meta property="og:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Securing the frontend">
    <meta name="twitter:description" content="Secure your Zabbix frontend with HTTPS using self-signed SSL certificates on Nginx or Apache. Step-by-step guide to generating certificates, configuring, and protecting your monitoring data with encrypted connections.">
    <meta name="twitter:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="627">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#securing-the-frontend" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    
    
    
        <div class="gmc-announce">
            Эта страница еще не переведена на ЯЗЫК, поэтому она отображается на английском языке.
            <a href="/gmc/ru/contribute/#translations">Поддержите нас и переведите!</a>
        </div>
    
    
    <script>
        const gGMC_SELECT_VERSION = "Выберите версию";
        const gGMC_TRANSLATE_CTA = "Поддержите нас и переведите!";
        const gGMC_PAGE_LOCALE = "ru";
        const gGMC_FILE_LOCALE = "en";
        const gGMC_TRANSLATE_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2 0 .37-.03.73-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.59 0 1.16-.06 1.72-.16A5.9 5.9 0 0 1 13 19c0-.29.03-.57.07-.85-.32.63-.67 1.24-1.07 1.81-.83-1.2-1.5-2.53-1.91-3.96h3.72a5.95 5.95 0 0 1 2.59-2.4c.06-.53.1-1.06.1-1.6M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m6.34 6H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25-9.56c1.84.63 3.37 1.9 4.33 3.56h-2.95a15.7 15.7 0 0 0-1.38-3.56M23 18v2h-3v3h-2v-3h-3v-2h3v-3h2v3z"/></svg>';
    </script>
    
    

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../../" title="Zabbix Book" class="md-header__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zabbix Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Securing the frontend
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../fr/ch13-advanced-security/securing-frontend/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../nl/ch13-advanced-security/securing-frontend/" hreflang="nl" class="md-select__link">
              Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../pt_BR/ch13-advanced-security/securing-frontend/" hreflang="pt_BR" class="md-select__link">
              Brazillian Portugese
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ch13-advanced-security/securing-frontend/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Поделиться" aria-label="Поделиться" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/penmasters/zabbix-book" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Zabbix Book" class="md-nav__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Zabbix Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/penmasters/zabbix-book" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Book Tags
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Supporters-Contributors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supporters and contributors
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch00-getting-started/initial-steps/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch01-zabbix-components/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 01 : Zabbix components and installation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch02-zabbix-installation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 02 : Zabbix Frontend
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch03-zabbix-proxies/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 03 : Proxies and Webcomponents
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch04-zabbix-collecting-data/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 04 : Collecting data 
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch05-zabbix-triggers/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 05 : Triggers
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch06-zabbix-templates/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 06 : Templates
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch07-zabbix-alerts/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 07 : Alerting
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch08-zabbix-lld/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 08 : LLD
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch09-zabbix-extending/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 09 : Extending Zabbix
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch10-zabbix-discovery/network-host-discovery/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 10 : Discovery
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch11-zabbix-visualisation/graphs/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 11 : Visualisation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch12-zabbix-api/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 12 : Zabbix API
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" checked>
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Chapter 13 : Advanced set up and security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    Chapter 13 : Advanced set up and security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced set-up and security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../selinux-zabbix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SELinux
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Securing the frontend
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Securing the frontend
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#understanding-the-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding the concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding the concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-create-an-ssl-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to create an SSL certificate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-ssl-works-client-server-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        How SSL works - Client - Server flow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-frontend-with-self-signed-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the frontend with self signed Certificates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing the frontend with self signed Certificates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-a-private-key-for-the-ca" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate a private key for the CA
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-a-root-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate a Root Certificate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-ca-authenticated-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generating CA-Authenticated Certificates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-a-certificate-signing-request-csr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate a Certificate Signing Request (CSR)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-an-x509-v3-certificate-extension-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate an X509 V3 certificate extension configuration file.
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-the-certificate-using-our-csr-the-ca-private-key-the-ca-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate the certificate using our CSR, the CA private key, the CA certificate,
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-the-ssl-certificates-to-our-virtual-host" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy the SSL certificates to our Virtual Host
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Copy the SSL certificates to our Virtual Host">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-the-ca-in-linux-rhel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import the CA in Linux (RHEL)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-the-ca-in-osx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import the CA in OSX
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-the-ca-in-windows" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import the CA in Windows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-your-nginx-zabbix-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adapt your Nginx Zabbix config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-your-apache-zabbix-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adapt your Apache Zabbix config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart-all-services-and-allow-https-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Restart all services and allow https traffic
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-frontend-with-lets-encrypt-on-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the Frontend with Let's Encrypt on Nginx
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing the Frontend with Let&#39;s Encrypt on Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-lets-encrypt-with-a-dns-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup Let's Encrypt with a DNS server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-lets-encrypt-without-local-a-dns-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup Let;s encrypt without local a DNS server
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-frontend-with-lets-encrypt-on-nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the Frontend with Let's Encrypt on Nginx
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../agent-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Securing the Zabbix agent with encryption
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-vault/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storing secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partitioning-database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Partitioning MariaDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partitioning-postgresql-database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Partitioning PostgreSQL with TimescaleDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch14-zabbix-maintenance/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 14 : Maintenance
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch15-zabbix-real-world-examples/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 15 : Real world examples
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Print Site
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#understanding-the-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding the concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding the concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-create-an-ssl-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      
        How to create an SSL certificate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-ssl-works-client-server-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        How SSL works - Client - Server flow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-frontend-with-self-signed-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the frontend with self signed Certificates
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing the frontend with self signed Certificates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-a-private-key-for-the-ca" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate a private key for the CA
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-a-root-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate a Root Certificate
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-ca-authenticated-certificates" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generating CA-Authenticated Certificates
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-a-certificate-signing-request-csr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate a Certificate Signing Request (CSR)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-an-x509-v3-certificate-extension-configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate an X509 V3 certificate extension configuration file.
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-the-certificate-using-our-csr-the-ca-private-key-the-ca-certificate" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate the certificate using our CSR, the CA private key, the CA certificate,
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-the-ssl-certificates-to-our-virtual-host" class="md-nav__link">
    <span class="md-ellipsis">
      
        Copy the SSL certificates to our Virtual Host
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Copy the SSL certificates to our Virtual Host">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-the-ca-in-linux-rhel" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import the CA in Linux (RHEL)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-the-ca-in-osx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import the CA in OSX
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-the-ca-in-windows" class="md-nav__link">
    <span class="md-ellipsis">
      
        Import the CA in Windows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-your-nginx-zabbix-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adapt your Nginx Zabbix config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-your-apache-zabbix-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adapt your Apache Zabbix config
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restart-all-services-and-allow-https-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Restart all services and allow https traffic
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-frontend-with-lets-encrypt-on-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the Frontend with Let's Encrypt on Nginx
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Securing the Frontend with Let&#39;s Encrypt on Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-lets-encrypt-with-a-dns-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup Let's Encrypt with a DNS server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-lets-encrypt-without-local-a-dns-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setup Let;s encrypt without local a DNS server
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-frontend-with-lets-encrypt-on-nginx_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the Frontend with Let's Encrypt on Nginx
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Навигация" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../" class="md-path__link">
        
  <span class="md-ellipsis">
    Welcome
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../chapter/" class="md-path__link">
          
  <span class="md-ellipsis">
    Chapter 13 : Advanced set up and security
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                


    <a href="../../../print_page/" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3"/></svg>
    </a>



                  









  
  
    
      
    
    <a href="https://github.com/penmasters/zabbix-book/raw/main/docs/ch13-advanced-security/securing-frontend.md" title="Посмотреть исходный код страницы" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="securing-the-frontend">Securing the frontend</h1>
<p>The frontend is what we use to login into our system. The Zabbix frontend will
connect to our Zabbix server and our database.
But we also send information from our laptop to the frontend. It's important that
when we enter our credentials that we can do this in a safe way.
So it makes sense to make use of certificates and one way to do this is by making
use of Self-Signed certificates.</p>
<p>To give you a better understanding of why your browser will warn you when using
self signed certificates, we have to know that when we request an SSL certificate
from an official Certificate Authority (CA) that you submit a Certificate Signing
request (CSR) to them. They in return provide you with a Signed SSL certificate.
For this they make use of their root certificate and private key.
Our browser comes with a copy of the root certificate (CA) from various authorities
or it can access it from the OS. This is why our self signed certificates are not
trusted by our browser, we don't have any CA validation. Our only workaround is to
create our own root certificate and private key.</p>
<h2 id="understanding-the-concepts">Understanding the concepts</h2>
<h3 id="how-to-create-an-ssl-certificate">How to create an SSL certificate</h3>
<p><br /></p>
<p><img alt="SSL Ok" src="../../../ch13-advanced-security/securing-frontend/ssl-ca.png" /></p>
<h2 id="how-ssl-works-client-server-flow">How SSL works - Client - Server flow</h2>
<p><img alt="SSL Ok" src="../../../ch13-advanced-security/securing-frontend/ssl-workflow.png" />
<br /></p>
<details class="note" open="open">
<summary>Note</summary>
<p>Borrowed the designs from https://www.youtube.com/watch?v=WqgzYuHtnIM
this video explains well how SSL works.</p>
</details>
<h2 id="securing-the-frontend-with-self-signed-certificates">Securing the frontend with self signed Certificates</h2>
<p>To configure this there are a few steps that we need to follow:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>- Generate a private key for the CA ( Certificate Authority )
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>- Generate a root certificate
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>- Generating CA-Authenticated Certificates
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>- Generate a Certificate Signing Request (CSR)
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>- Generate an X509 V3 certificate extension configuration file
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>- Generate the certificate using our CSR, the CA private key, the CA certificate,
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  and the config file
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>- Copy the SSL certificates to our Virtual Host
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>- Adapt your Nginx Zabbix config
</span></code></pre></div>
<h3 id="generate-a-private-key-for-the-ca">Generate a private key for the CA</h3>
<p>First step is to make a folder named SSL so we can create our certificates and safe them:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>&gt;- mkdir ~/ssl
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>&gt;- cd ~/ssl
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>&gt;- openssl ecparam -out myCA.key -name prime256v1 -genkey
</span></code></pre></div>
<p>Let's explain all the options;</p>
<blockquote>
<ul>
<li>openssl : The tool to use the OpenSSL library, this library provides us with
   cryptographic functions and utilities.</li>
<li>out myCA.key : This part of the command specifies the output file name for the
   generated private key. </li>
<li>name prime256v1: Name of the elliptic curve; X9.62/SECG curve over a 256 bit
   prime field</li>
<li>ecparam: This command is used to manipulate or generate EC parameter files.</li>
<li>genkey: This option will generate a EC private key using the specified parameters.</li>
</ul>
</blockquote>
<h3 id="generate-a-root-certificate">Generate a Root Certificate</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>openssl<span class="w"> </span>req<span class="w"> </span>-x509<span class="w"> </span>-new<span class="w"> </span>-nodes<span class="w"> </span>-key<span class="w"> </span>myCA.key<span class="w"> </span>-sha256<span class="w"> </span>-days<span class="w"> </span><span class="m">1825</span><span class="w"> </span>-out<span class="w"> </span>myCA.pem
</span></code></pre></div>
<p>Let's explain all the options;</p>
<blockquote>
<ul>
<li>openssl: The command-line tool for OpenSSL.</li>
<li>req: This command is used for X.509 certificate signing request (CSR) management.</li>
<li>x509: This option specifies that a self-signed certificate should be created.</li>
<li>new: This option is used to generate a new certificate.</li>
<li>nodes: This option indicates that the private key should not be encrypted.
   It will generates a private key without a passphrase, making it more convenient
   but potentially less secure.</li>
<li>key myCA.key: This specifies the private key file (myCA.key) to be used in
   generating the certificate.</li>
<li>sha256: This option specifies the hash algorithm to be used for the certificate.
   In this case, SHA-256 is chosen for stronger security.</li>
<li>days 1825: This sets the validity period of the certificate in days. Here, it’s
   set to 1825 days (5 years).</li>
<li>out myCA.pem: This specifies the output file name for the generated certificate.
   In this case, “myCA.pem.”</li>
</ul>
</blockquote>
<p>The information you enter is not so important but it's best to fill it in as good
as possible. Just make sure you enter for CN you IP or DNS.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>You are about to be asked to enter information that will be incorporated
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>into your certificate request.
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>What you are about to enter is what is called a Distinguished Name or a DN.
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>There are quite a few fields but you can leave some blank
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>For some fields there will be a default value,
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>If you enter &#39;.&#39;, the field will be left blank.
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>-----
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>Country Name (2 letter code) [XX]:BE
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>State or Province Name (full name) []:vlaams-brabant
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>Locality Name (eg, city) [Default City]:leuven
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>Organization Name (eg, company) [Default Company Ltd]:
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>Organizational Unit Name (eg, section) []:
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>Common Name (eg, your name or your server&#39;s hostname) []:192.168.0.134
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>Email Address []:
</span></code></pre></div>
<h3 id="generating-ca-authenticated-certificates">Generating CA-Authenticated Certificates</h3>
<p>It's probably good practice to use de dns name of your website in the name of
the private key. As we use in this case no DNS but an IP address I will use
the fictive dns zabbix.mycompany.internal.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>zabbix.mycompany.internal.key<span class="w"> </span><span class="m">2048</span>
</span></code></pre></div>
<h3 id="generate-a-certificate-signing-request-csr">Generate a Certificate Signing Request (CSR)</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>zabbix.mycompany.internal.key<span class="w"> </span>-out<span class="w"> </span>zabbix.mycompany.internal.csr
</span></code></pre></div>
<p>You will be asked the same set of questions as above. Once again your answers hold
minimal significance and in our case no one will inspect the certificate so they
matter even less.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>You are about to be asked to enter information that will be incorporated
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>into your certificate request.
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>What you are about to enter is what is called a Distinguished Name or a DN.
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>There are quite a few fields but you can leave some blank
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>For some fields there will be a default value,
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>If you enter &#39;.&#39;, the field will be left blank.
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>-----
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>Country Name (2 letter code) [XX]:BE
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>State or Province Name (full name) []:vlaams-brabant
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>Locality Name (eg, city) [Default City]:leuven
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>Organization Name (eg, company) [Default Company Ltd]:
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>Organizational Unit Name (eg, section) []:
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>Common Name (eg, your name or your server&#39;s hostname) []:192.168.0.134
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>Email Address []:
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>Please enter the following &#39;extra&#39; attributes
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>to be sent with your certificate request
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>A challenge password []:
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>An optional company name []:
</span></code></pre></div>
<h3 id="generate-an-x509-v3-certificate-extension-configuration-file">Generate an X509 V3 certificate extension configuration file.</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># vi zabbix.mycompany.internal.ext</span>
</span></code></pre></div>
<p>Add the following lines in your certificate extension file. Replace IP or DNS
with your own values.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nv">authorityKeyIdentifier</span><span class="o">=</span>keyid,issuer
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nv">basicConstraints</span><span class="o">=</span>CA:FALSE
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nv">keyUsage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>digitalSignature,<span class="w"> </span>nonRepudiation,<span class="w"> </span>keyEncipherment,<span class="w"> </span>dataEncipherment
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nv">subjectAltName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>@alt_names
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="o">[</span>alt_names<span class="o">]</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>IP.1<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">192</span>.168.0.133
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="c1">#DNS.1 = MYDNS (You can use DNS if you have a dns name if you use IP then use the</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>above<span class="w"> </span>line<span class="o">)</span>
</span></code></pre></div>
<h3 id="generate-the-certificate-using-our-csr-the-ca-private-key-the-ca-certificate">Generate the certificate using our CSR, the CA private key, the CA certificate,</h3>
<p>and the config file</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-in<span class="w"> </span>zabbix.mycompany.internal.csr<span class="w"> </span>-CA<span class="w"> </span>myCA.pem<span class="w"> </span>-CAkey<span class="w"> </span>myCA.key<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>-CAcreateserial<span class="w"> </span>-out<span class="w"> </span>zabbix.mycompany.internal.crt<span class="w"> </span>-days<span class="w"> </span><span class="m">825</span><span class="w"> </span>-sha256<span class="w"> </span>-extfile<span class="w"> </span>zabbix.mycompany.internal.ext
</span></code></pre></div>
<h3 id="copy-the-ssl-certificates-to-our-virtual-host">Copy the SSL certificates to our Virtual Host</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>cp<span class="w"> </span>zabbix.mycompany.internal.crt<span class="w"> </span>/etc/pki/tls/certs/.<span class="w"> </span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>cp<span class="w"> </span>zabbix.mycompany.internal.key<span class="w"> </span>/etc/pki/tls/private/.
</span></code></pre></div>
<h4 id="import-the-ca-in-linux-rhel">Import the CA in Linux (RHEL)</h4>
<p>We need to update the CA certificate’s, run the below command to update the CA certs.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>cp myCA.pem /etc/pki/ca-trust/source/anchors/myCA.crt
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>update-ca-trust extract
</span></code></pre></div>
<h4 id="import-the-ca-in-osx">Import the CA in OSX</h4>
<ul>
<li>Open the macOS Keychain app.</li>
<li>Navigate to File &gt; Import Items</li>
<li>Choose your private key file (i.e., myCA.pem)</li>
<li>Search for the “Common Name” you provided earlier.</li>
<li>Double-click on your root certificate in the list.</li>
<li>Expand the Trust section.</li>
<li>Modify the “When using this certificate:” dropdown to “Always Trust”.</li>
<li>Close the certificate window.</li>
</ul>
<h4 id="import-the-ca-in-windows">Import the CA in Windows</h4>
<ul>
<li>Open the “Microsoft Management Console” by pressing Windows + R, typing mmc, and
  clicking Open.</li>
<li>Navigate to File &gt; Add/Remove Snap-in.</li>
<li>Select Certificates and click Add.</li>
<li>Choose Computer Account and proceed by clicking Next.</li>
<li>Select Local Computer and click Finish.</li>
<li>Click OK to return to the MMC window.</li>
<li>Expand the view by double-clicking Certificates (local computer).</li>
<li>Right-click on Certificates under “Object Type” in the middle column, select
  All Tasks, and then Import.</li>
<li>Click Next, followed by Browse. Change the certificate extension dropdown next
  to the filename field to All Files (<em>.</em>) and locate the myCA.pem file.</li>
<li>Click Open, then Next.</li>
<li>Choose “Place all certificates in the following store.” with “Trusted Root
  Certification Authorities store” as the default. Proceed by clicking Next, then
  Finish, to finalize the wizard.</li>
<li>If all went well you should find your certificate under Trusted Root Certification
  Authorities &gt; Certificates</li>
</ul>
<details class="warning" open="open">
<summary>Warning</summary>
<p>You also need to import the myCA.crt file in your OS we are not an official
CA so we have to import it in our OS and tell it to trust this Certificate.
This action depends on the OS you use.</p>
</details>
<p>As you are using OpenSSL, you should also create a strong Diffie-Hellman group,
which is used in negotiating Perfect Forward Secrecy with clients.
You can do this by typing:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048
</span></code></pre></div>
<h4 id="adapt-your-nginx-zabbix-config">Adapt your Nginx Zabbix config</h4>
<p>Add the following lines to your Nginx configuration, modifying the file paths as needed.
Replace the the already existing lines with port 80 with this configuration. This
will enable SSL and HTTP2.</p>
<div class="admonition info">
<p class="admonition-title">Adapt the Nginx config</p>
<p>Red Hat
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># vi /etc/nginx/conf.d/zabbix.conf
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>server {
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>        listen          443 http2 ssl;
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>        listen          [::]:443 http2 ssl;
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>        server_name     &lt;ip qddress&gt;;
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>        ssl_certificate /etc/ssl/certs/zabbix.mycompany.internal.crt;
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>        ssl_certificate_key /etc/pki/tls/private/zabbix.mycompany.internal.key;
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>        ssl_dhparam /etc/ssl/certs/dhparam.pem;
</span></code></pre></div></p>
<p>To redirect traffic from port 80 to 443 we can add the following lines above our
https block:</p>
<p><div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>server {
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>       listen         80;
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>       server_name    _; #dns or ip is also possible
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>       return         301 https://$host$request_uri;
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>}
</span></code></pre></div>
Ubuntu
<div class="language-text highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>ToDo
</span></code></pre></div></p>
</div>
<h4 id="adapt-your-apache-zabbix-config">Adapt your Apache Zabbix config</h4>
<h4 id="restart-all-services-and-allow-https-traffic">Restart all services and allow https traffic</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>php-fpm.service
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>https<span class="w"> </span>--permanent
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div>
<p>When we go to our url <code>http://&lt;IP or DNS&gt;/</code> we get redirected to our <code>https://</code> page and when we check we can see that our site is secure:</p>
<p><img alt="SSL Ok" src="../../../ch13-advanced-security/securing-frontend/cert-ok.png" /></p>
<details class="note" open="open">
<summary>Note</summary>
<ul>
<li>To be even more secure have a loot at https://cipherlist.eu/ this page maintains a list of strong ciphers that you can use so secure your Nginx even more.<br /></li>
<li>You can test your nginx config with 'nginx -t' before you restart.<br /></li>
<li>For HTTP/2 to work you need at least nginx 1.9.5 or later</li>
</ul>
</details>
<h2 id="securing-the-frontend-with-lets-encrypt-on-nginx">Securing the Frontend with Let's Encrypt on Nginx</h2>
<p>Creating a certificate with Let's Encrypt is quite easy the only thing you need
is a domain. With a valid dns record set. Once this is in place you can with a
few command in place add SSL to your website.</p>
<h3 id="setup-lets-encrypt-with-a-dns-server">Setup Let's Encrypt with a DNS server</h3>
<p>You have a DNS server and everything is properly configured, configuration this
is going to be easy.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>dnf<span class="w"> </span>install<span class="w"> </span>epel-release
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>dnf<span class="w"> </span>install<span class="w"> </span>certbot<span class="w"> </span>python3-certbot-nginx
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1"># Make sure you have added your domain in the file /etc/nginx/conf.d/zabbix.com</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="c1"># rename the file</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>mv<span class="w"> </span>/etc/nginx/conf.d/zabix.conf<span class="w"> </span>/etc/nginx/conf.d/&lt;yourdomain.com&gt;
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="c1"># run certbot replace yourdomain.com with your own domain </span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>certbot<span class="w"> </span>--nginx<span class="w"> </span>-d<span class="w"> </span>yourdomain.com<span class="w"> </span>-d<span class="w"> </span>www.yourdomain.com
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># add firewall config</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>firewall-cmd<span class="w"> </span>--permanent<span class="w"> </span>--add-service<span class="o">=</span>https
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Obtain the SSL certificate</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>sudo<span class="w"> </span>certbot<span class="w"> </span>--nginx<span class="w"> </span>-d<span class="w"> </span>yourdomain.com<span class="w"> </span>-d<span class="w"> </span>www.yourdomain.com
</span></code></pre></div>
<p>This will install the certificates automatic in your configuration file. In case
you had not renamed your file with the domain name you have alter the config
file yourself.
You can take a look for an example to the next topic.</p>
<h3 id="setup-lets-encrypt-without-local-a-dns-server">Setup Let;s encrypt without local a DNS server</h3>
<p>In case you like to test this at home it's a bit more complex if you don't have a
DNS server at home but still possible with DNS-01 if you have bought a domain and
are able to configure the TXT records for this domain. In this case we can use
get.acme.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Install the needed packages</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>epel-release
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>certbot<span class="w"> </span>python3-certbot-nginx
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>tar<span class="w"> </span>gzip<span class="w"> </span>openssl<span class="w"> </span>cronie
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>bind-utils<span class="w"> </span><span class="c1"># gives `dig`</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="c1"># Install the acme script and add it to you path</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>curl<span class="w"> </span>https://get.acme.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="nb">exec</span><span class="w"> </span>bash
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>acme.sh<span class="w"> </span>--version
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="c1"># Activate crond and setup the certificate.</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>crond
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>acme.sh<span class="w"> </span>--set-default-ca<span class="w"> </span>--server<span class="w"> </span>letsencrypt
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>acme.sh<span class="w"> </span>--issue<span class="w"> </span>-d<span class="w"> </span>&lt;mydomain.com&gt;<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;*.&lt;mydomain.com&gt;&#39;</span><span class="w"> </span>--dns<span class="w"> </span>--yes-I-know-dns-manual-mode-enough-go-ahead-please
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="c1"># The script had provided you with 2 TXT records add them to your domain and</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="c1"># check if they are properly configured. It can take a few minutes before other</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="c1"># DNS servers pickup the config change.</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>dig<span class="w"> </span>+short<span class="w"> </span>TXT<span class="w"> </span>_acme-challenge.&lt;mydomain.com&gt;<span class="w"> </span>@8.8.8.8
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="c1"># Try to renew the certificate and copy it to your webserver</span>
</span><span id="__span-21-23"><a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>acme.sh<span class="w"> </span>--renew<span class="w"> </span>-d<span class="w"> </span>&lt;mydomain.com&gt;<span class="w"> </span>--ecc<span class="w"> </span>--dns<span class="w"> </span>--yes-I-know-dns-manual-mode-enough-go-ahead-please
</span><span id="__span-21-24"><a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/ssl/&lt;mydomain&gt;
</span><span id="__span-21-25"><a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>acme.sh<span class="w"> </span>--install-cert<span class="w"> </span>-d<span class="w"> </span>&lt;mydomain.com&gt;<span class="w"> </span>--ecc<span class="w"> </span>--key-file<span class="w"> </span>/etc/ssl/&lt;mydomain&gt;/site.key<span class="w"> </span>--fullchain-file<span class="w"> </span>/etc/ssl/&lt;mydomain&gt;/site.fullchain.pem<span class="w">  </span>--reloadcmd
</span></code></pre></div>
<p>Next step is to alter your NGINX config and open the firewall on port 443</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># Configure the firewall</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>firewall-cmd<span class="w"> </span>--add-service<span class="o">=</span>https<span class="w"> </span>--permanent
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>firewall-cmd<span class="w"> </span>--reload
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># Add to your hosts file the domain zabbix.&lt;mydomain.com&gt;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>vi<span class="w"> </span>/etc/hosts
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># Alter your NGINX config</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>vi<span class="w"> </span>/etc/nginx/conf.d/zabbix.conf
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>server<span class="w"> </span><span class="o">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">        </span>listen<span class="w">          </span><span class="m">443</span><span class="w"> </span>ssl<span class="p">;</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">        </span>server_name<span class="w">     </span>zabbix.mydoamin.com<span class="p">;</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">        </span>ssl_certificate<span class="w">     </span>/etc/ssl/mydomain/site.fullchain.pem<span class="p">;</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">        </span>ssl_certificate_key<span class="w"> </span>/etc/ssl/mydomain/site.key<span class="p">;</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">        </span>ssl_protocols<span class="w">       </span>TLSv1.2<span class="w"> </span>TLSv1.3<span class="p">;</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">        </span>ssl_ciphers<span class="w">         </span>HIGH:!aNULL:!MD5<span class="p">;</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># Add a forward from port 80 to 443</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>vi<span class="w"> </span>/etc/nginx/conf.d/no-ssl-zabbix.conf
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>server<span class="o">{</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">    </span>listen<span class="w">  </span><span class="m">80</span><span class="p">;</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">301</span><span class="w"> </span>https://<span class="nv">$host$request_uri</span>?<span class="p">;</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="o">}</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># restart the NGINX webserver</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</span></code></pre></div>
<p>You can now browse to the url zabbix.mydomain.com and you should have a working
certificate.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>You should probably add a bit more security to your webserver this is only
the bare minimum to make ssl working, A good place to start is probably
https://cipherlist.eu/</p>
</details>
<h2 id="securing-the-frontend-with-lets-encrypt-on-nginx_1">Securing the Frontend with Let's Encrypt on Nginx</h2>







  
  






                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  К началу
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Stichting The Monitoring Penmasters
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.tags", "navigation.expand", "navigation.prune", "navigation.path", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.view", "content.tags"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": {"index": "tags.md"}, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/tags-data-attr.js?v=514f4d1ef40cb7c1bed03bcbf9a447d4f11fa141"></script>
      
    
    
        
		
		
    

  </body>
</html>