
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Extend monitoring flexibility with Zabbix item scripts. Run custom scripts to
collect unique metrics and automate complex data gathering tasks.
">
      
      
        <meta name="author" content="The Monitoring Penmasters">
      
      
        <link rel="canonical" href="https://thezabbixbook.com/ru/ch04-zabbix-collecting-data/script/">
      
      
        <link rel="prev" href="../ssh-telnet/">
      
      
        <link rel="next" href="../jmx/">
      
      
        
          <link rel="alternate" href="../../../fr/ch04-zabbix-collecting-data/script/" hreflang="fr">
        
          <link rel="alternate" href="../../../nl/ch04-zabbix-collecting-data/script/" hreflang="nl">
        
          <link rel="alternate" href="../../../pt_BR/ch04-zabbix-collecting-data/script/" hreflang="pt_BR">
        
          <link rel="alternate" href="./" hreflang="ru">
        
          <link rel="alternate" href="../../../ch04-zabbix-collecting-data/script/" hreflang="en">
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Script item - Zabbix Book</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css?v=514f4d1ef40cb7c1bed03bcbf9a447d4f11fa141">
    
      <link rel="stylesheet" href="../../../stylesheets/linewrap.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    
    

    <meta property="og:title" content="Script item">
    <meta property="og:description" content="Extend monitoring flexibility with Zabbix item scripts. Run custom scripts to collect unique metrics and automate complex data gathering tasks.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thezabbixbook.com/ru/ch04-zabbix-collecting-data/script/">
    <meta property="og:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Script item">
    <meta name="twitter:description" content="Extend monitoring flexibility with Zabbix item scripts. Run custom scripts to collect unique metrics and automate complex data gathering tasks.">
    <meta name="twitter:image" content="https://www.thezabbixbook.com/assets/social-card.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="627">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#script-item" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
    
    
    
        <div class="gmc-announce">
            Эта страница еще не переведена на ЯЗЫК, поэтому она отображается на английском языке.
            <a href="/gmc/ru/contribute/#translations">Поддержите нас и переведите!</a>
        </div>
    
    
    <script>
        const gGMC_SELECT_VERSION = "Выберите версию";
        const gGMC_TRANSLATE_CTA = "Поддержите нас и переведите!";
        const gGMC_PAGE_LOCALE = "ru";
        const gGMC_FILE_LOCALE = "en";
        const gGMC_TRANSLATE_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 12c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2 0 .37-.03.73-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10C6.47 2 2 6.5 2 12s4.5 10 10 10c.59 0 1.16-.06 1.72-.16A5.9 5.9 0 0 1 13 19c0-.29.03-.57.07-.85-.32.63-.67 1.24-1.07 1.81-.83-1.2-1.5-2.53-1.91-3.96h3.72a5.95 5.95 0 0 1 2.59-2.4c.06-.53.1-1.06.1-1.6M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m6.34 6H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25-9.56c1.84.63 3.37 1.9 4.33 3.56h-2.95a15.7 15.7 0 0 0-1.38-3.56M23 18v2h-3v3h-2v-3h-3v-2h3v-3h2v3z"/></svg>';
    </script>
    
    

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../../" title="Zabbix Book" class="md-header__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zabbix Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Script item
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../fr/ch04-zabbix-collecting-data/script/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../nl/ch04-zabbix-collecting-data/script/" hreflang="nl" class="md-select__link">
              Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../pt_BR/ch04-zabbix-collecting-data/script/" hreflang="pt_BR" class="md-select__link">
              Brazillian Portugese
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ch04-zabbix-collecting-data/script/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Поделиться" aria-label="Поделиться" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/penmasters/zabbix-book" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="Zabbix Book" class="md-nav__button md-logo" aria-label="Zabbix Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Zabbix Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/penmasters/zabbix-book" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    penmasters
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Book Tags
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Supporters-Contributors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supporters and contributors
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch00-getting-started/initial-steps/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch01-zabbix-components/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 01 : Zabbix components and installation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch02-zabbix-installation/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 02 : Zabbix Frontend
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch03-zabbix-proxies/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 03 : Proxies and Webcomponents
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Chapter 04 : Collecting data 
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Chapter 04 : Collecting data 
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Collecting data with your Zabbix environment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hosts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hosts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simple-checks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Simple checks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../host-interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Host Interfaces
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zabbix-agent-passive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zabbix Agent installation and Passive monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zabbix-agent-active/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zabbix Agent Active monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../snmp-polling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SNMP Polling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../snmp-trapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SNMP Trapping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP Items
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dependent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dependent items
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ssh-telnet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SSH / Telnet
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Script item
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Script item
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#understanding-script-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Script items
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding Script items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-javascript-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common JavaScript objects
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-1-query-a-public-api-github-repository-stars" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1 – Query a public API (GitHub repository stars)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 1 – Query a public API (GitHub repository stars)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#item-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Item setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example trigger
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-2-public-weather" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2 - Public weather
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 2 - Public weather">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#item-setup_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Item setup
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-and-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best practices and troubleshooting
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-to-use-script-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to use Script items
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expert-techniques-for-script-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expert techniques for Script items
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expert techniques for Script items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-debugging-things" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Debugging things
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-using-macros-and-secret-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Using macros and secret parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-error-handling-and-fallback-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Error handling and fallback logic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-caching-between-executions" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Caching between executions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-parallelization-and-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Parallelization and performance considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-returning-structured-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Returning structured data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-combining-script-items-with-preprocessing-javascript" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Combining script items with preprocessing JavaScript
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-controlling-execution-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Controlling execution context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-best-practice-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Best practice checklist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Summary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Questions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-urls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful URLs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jmx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring Java Applications with JMX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ipmi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IPMI Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database-odbc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database checks via odbc
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../database-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database checks via agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../zabbix-trapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zabbix trapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../external-checks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External checks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../browser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Browser item
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calculated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Calculated items
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch05-zabbix-triggers/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 05 : Triggers
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch06-zabbix-templates/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 06 : Templates
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch07-zabbix-alerts/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 07 : Alerting
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch08-zabbix-lld/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 08 : LLD
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch09-zabbix-extending/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 09 : Extending Zabbix
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch10-zabbix-discovery/network-host-discovery/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 10 : Discovery
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch11-zabbix-visualisation/graphs/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 11 : Visualisation
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch12-zabbix-api/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 12 : Zabbix API
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch13-advanced-security/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 13 : Advanced set up and security
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch14-zabbix-maintenance/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 14 : Maintenance
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../ch15-zabbix-real-world-examples/chapter/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Chapter 15 : Real world examples
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../print_page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Print Site
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#understanding-script-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Script items
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Understanding Script items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-javascript-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common JavaScript objects
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-1-query-a-public-api-github-repository-stars" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 1 – Query a public API (GitHub repository stars)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 1 – Query a public API (GitHub repository stars)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#item-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Item setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example trigger
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-2-public-weather" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example 2 - Public weather
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example 2 - Public weather">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#item-setup_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Item setup
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-and-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best practices and troubleshooting
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#when-to-use-script-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        When to use Script items
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expert-techniques-for-script-items" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expert techniques for Script items
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expert techniques for Script items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-debugging-things" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Debugging things
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-using-macros-and-secret-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Using macros and secret parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-error-handling-and-fallback-logic" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Error handling and fallback logic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-caching-between-executions" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Caching between executions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-parallelization-and-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Parallelization and performance considerations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-returning-structured-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Returning structured data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-combining-script-items-with-preprocessing-javascript" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Combining script items with preprocessing JavaScript
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-controlling-execution-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Controlling execution context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-best-practice-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Best practice checklist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Summary
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Questions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useful-urls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Useful URLs
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Навигация" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../../" class="md-path__link">
        
  <span class="md-ellipsis">
    Welcome
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../chapter/" class="md-path__link">
          
  <span class="md-ellipsis">
    Chapter 04 : Collecting data 
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                


    <a href="../../../print_page/" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3"/></svg>
    </a>



                  







<nav class="md-tags">
  
    
    <span class="md-tag md-tag-icon" data-tag="expert">
      expert
    </span>
  
</nav>



  
  
    
      
    
    <a href="https://github.com/penmasters/zabbix-book/raw/main/docs/ch04-zabbix-collecting-data/script.md" title="Посмотреть исходный код страницы" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="script-item">Script item</h1>
<p>Zabbix offers several item types for gathering data, but sometimes you need logic,
multiple API calls, or data manipulation that's too complex for simple preprocessing.
<strong>Script items</strong> fill that gap, they run JavaScript directly on the Zabbix Server
or Proxy and can fetch, process, and return data exactly how you need it.</p>
<p>In this chapter, we'll explore what script items can do through <strong>two working examples</strong>:</p>
<ol>
<li>Checking GitHub repository stars via public API</li>
<li>Querying the public weather page Open-Meteo</li>
</ol>
<h2 id="understanding-script-items">Understanding Script items</h2>
<p>Script items execute JavaScript in the Zabbix backend using the built-in Duktape
engine.</p>
<p>They're ideal when you need:</p>
<ul>
<li>HTTP or API calls that return JSON/XML data</li>
<li>Conditional logic or loops</li>
<li>Chained API requests (login + data fetch)</li>
<li>Monitoring without deploying an agent</li>
</ul>
<h3 id="common-javascript-objects">Common JavaScript objects</h3>
<p>Zabbix provides several JavaScript objects for script items:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Object</th>
<th style="text-align: left;">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>HttpRequest</code></td>
<td style="text-align: left;">Perform HTTP(S) requests</td>
</tr>
<tr>
<td style="text-align: left;"><code>Zabbix.log(level, message)</code></td>
<td style="text-align: left;">Log messages (level 4=debug, 3=info, etc.)</td>
</tr>
<tr>
<td style="text-align: left;"><code>JSON.parse()</code> / <code>JSON.stringify()</code></td>
<td style="text-align: left;">Handle JSON data</td>
</tr>
<tr>
<td style="text-align: left;"><code>parameters.&lt;name&gt;</code></td>
<td style="text-align: left;">Access item parameters defined in the UI</td>
</tr>
</tbody>
</table>
<p><strong>Limits:</strong> up to 10 <code>HttpRequest</code> objects per run; typical timeout ≤ 30 seconds
(depending on item settings).</p>
<p>The complete list of objects can be found in the official Zabbix documentation:
<a href="https://www.zabbix.com/documentation/current/en/manual/config/items/preprocessing/javascript/javascript_objects">https://www.zabbix.com/documentation/current/en/manual/config/items/preprocessing/javascript/javascript_objects</a></p>
<p>Let's create some example scripts so that you get a better understanding of how
it works.</p>
<p>Create a new host in <code>Data collection</code> -&gt; <code>Hosts</code>.</p>
<ul>
<li><strong>Host name:</strong> javascript</li>
<li><strong>Host groups:</strong> JS Servers</li>
</ul>
<p>Actually name and group are not important at all in this case :) When done
create an item on the host.</p>
<hr />
<h2 id="example-1-query-a-public-api-github-repository-stars">Example 1 – Query a public API (GitHub repository stars)</h2>
<p>This item will return the current number of <strong>stars</strong> for a given GitHub repository
using the REST API.</p>
<h3 id="item-setup">Item setup</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Query Github Repository</td>
</tr>
<tr>
<td style="text-align: left;">Type</td>
<td style="text-align: left;">Script</td>
</tr>
<tr>
<td style="text-align: left;">Key</td>
<td style="text-align: left;">github.repo.stars</td>
</tr>
<tr>
<td style="text-align: left;">Type of information</td>
<td style="text-align: left;">Numeric (unsigned)</td>
</tr>
<tr>
<td style="text-align: left;">Unit</td>
<td style="text-align: left;">Stars</td>
</tr>
<tr>
<td style="text-align: left;">Update interval</td>
<td style="text-align: left;">1h</td>
</tr>
<tr>
<td style="text-align: left;">Timeout</td>
<td style="text-align: left;">5s</td>
</tr>
<tr>
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;">owner = <code>zabbix</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">repo = <code>zabbix</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">token = <code>&lt;optional Github token&gt;</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> GitHub’s API enforces rate limits for unauthenticated requests (≈60/hour per IP).
Add a personal access token for higher limits.</p>
</blockquote>
<p>Add the following code in the script box of the item.</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">// Parameters (item → Parameters):</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="c1">//   owner = zabbix</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">//   repo  = zabbix</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1">//   token = &lt;optional PAT&gt;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1">// Parse parameters from `value` (JSON string)</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">  </span><span class="nx">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span><span class="w">   </span><span class="c1">// { owner, repo, token }</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="s2">&quot;Parameter JSON parse failed: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="p">}</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="kd">var</span><span class="w"> </span><span class="nx">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">owner</span><span class="p">;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="kd">var</span><span class="w"> </span><span class="nx">repo</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">repo</span><span class="p">;</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="kd">var</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">token</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">owner</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">repo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="s2">&quot;Missing &#39;owner&#39; or &#39;repo&#39; parameter&quot;</span><span class="p">;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="p">}</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="kd">var</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://api.github.com/repos/&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">owner</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;/&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">repo</span><span class="p">;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="kd">var</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpRequest</span><span class="p">();</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="nx">req</span><span class="p">.</span><span class="nx">addHeader</span><span class="p">(</span><span class="s2">&quot;User-Agent: zabbix-script-item&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// required by GitHub</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="nx">req</span><span class="p">.</span><span class="nx">addHeader</span><span class="p">(</span><span class="s2">&quot;Accept: application/vnd.github+json&quot;</span><span class="p">);</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">token</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">  </span><span class="nx">req</span><span class="p">.</span><span class="nx">addHeader</span><span class="p">(</span><span class="s2">&quot;Authorization: Bearer &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">token</span><span class="p">);</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="p">}</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="kd">var</span><span class="w"> </span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="kd">var</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">getStatus</span><span class="p">();</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">code</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="s2">&quot;GitHub API HTTP &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot; body=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">body</span><span class="p">;</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="p">}</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="kd">var</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">stargazers_count</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="s2">&quot;Unexpected response: missing stargazers_count&quot;</span><span class="p">;</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="p">}</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="k">return</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">stargazers_count</span><span class="p">;</span>
</span></code></pre></div>
<p><img alt="Script/ch04.40-script-example1.png" src="../../../ch04-zabbix-collecting-data/Script/ch04.40-script-example1.png" /></p>
<h3 id="example-trigger">Example trigger</h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>last(/javascript/github.repo.stars)=0
</span></code></pre></div>
<p>In this case we get an alert if the script returns 0</p>
<hr />
<h2 id="example-2-public-weather">Example 2 - Public weather</h2>
<p>In this script we call Open-Meteo and ask for for information like temperature,
windspeed, direction based on our longitude / latitude.</p>
<h3 id="item-setup_1">Item setup</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;">Query Weather Open Meteo</td>
</tr>
<tr>
<td style="text-align: left;">Type</td>
<td style="text-align: left;">Script</td>
</tr>
<tr>
<td style="text-align: left;">Key</td>
<td style="text-align: left;">weather.openmeteo.json</td>
</tr>
<tr>
<td style="text-align: left;">Type of information</td>
<td style="text-align: left;">Text</td>
</tr>
<tr>
<td style="text-align: left;">Update interval</td>
<td style="text-align: left;">1h</td>
</tr>
<tr>
<td style="text-align: left;">Parameters</td>
<td style="text-align: left;">latitude = <code>50.85</code>, longitude = <code>4.7</code></td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">temperature_unit = <code>celsius</code> (celsius / fahrenheit)</td>
</tr>
<tr>
<td style="text-align: left;"></td>
<td style="text-align: left;">windspeed_unit = <code>kmh</code>   (kmh / ms / mph / kn)</td>
</tr>
</tbody>
</table>
<p>Add the following code in the script box.</p>
<p><div class="language-js highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// Parameters (item → Parameters):</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1">//   latitude = 50.85</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">//   temperaature_unit  = 4.7</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1">//   windspeed_unit = kmh / ms / mph / kn</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kd">function</span><span class="w"> </span><span class="nx">toNumberFixLocale</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="nx">s</span><span class="o">==</span><span class="kc">null</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="kc">NaN</span><span class="p">;</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nx">t</span><span class="o">=</span><span class="nb">String</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="s2">&quot;.&quot;</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="kd">var</span><span class="w"> </span><span class="nx">p</span><span class="o">=</span><span class="p">{};</span><span class="w"> </span><span class="k">try</span><span class="p">{</span><span class="w"> </span><span class="nx">p</span><span class="o">=</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="w"> </span><span class="k">throw</span><span class="w"> </span><span class="s2">&quot;Param JSON parse failed: &quot;</span><span class="o">+</span><span class="nx">e</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="kd">var</span><span class="w"> </span><span class="nx">lat</span><span class="o">=</span><span class="nx">toNumberFixLocale</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">latitude</span><span class="p">),</span><span class="w"> </span><span class="nx">lon</span><span class="o">=</span><span class="nx">toNumberFixLocale</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">longitude</span><span class="p">);</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="k">if</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">lat</span><span class="p">)</span><span class="o">||</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">lon</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">ok</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="nx">status</span><span class="o">:</span><span class="s2">&quot;BAD_COORDS&quot;</span><span class="p">,</span><span class="nx">note</span><span class="o">:</span><span class="s2">&quot;Use dots, e.g. 50.85 and 4.35&quot;</span><span class="p">});</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="k">if</span><span class="p">(</span><span class="nx">lat</span><span class="o">&lt;-</span><span class="mf">90</span><span class="o">||</span><span class="nx">lat</span><span class="o">&gt;</span><span class="mf">90</span><span class="o">||</span><span class="nx">lon</span><span class="o">&lt;-</span><span class="mf">180</span><span class="o">||</span><span class="nx">lon</span><span class="o">&gt;</span><span class="mf">180</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">ok</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="nx">status</span><span class="o">:</span><span class="s2">&quot;RANGE_ERROR&quot;</span><span class="p">});</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="kd">var</span><span class="w"> </span><span class="nx">tUnit</span><span class="o">=</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">temperature_unit</span><span class="o">||</span><span class="s2">&quot;celsius&quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="kd">var</span><span class="w"> </span><span class="nx">wUnit</span><span class="o">=</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">windspeed_unit</span><span class="o">||</span><span class="s2">&quot;kmh&quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="kd">var</span><span class="w"> </span><span class="nx">url</span><span class="o">=</span><span class="s2">&quot;https://api.open-meteo.com/v1/forecast?latitude=&quot;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">lat</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&amp;longitude=&quot;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">lon</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&amp;current_weather=true&amp;temperature_unit=&quot;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">tUnit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&amp;windspeed_unit=&quot;</span><span class="o">+</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">wUnit</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;&amp;timezone=auto&quot;</span><span class="p">;</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="kd">var</span><span class="w"> </span><span class="nx">req</span><span class="o">=</span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpRequest</span><span class="p">();</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">addHeader</span><span class="p">(</span><span class="s2">&quot;User-Agent: zabbix-script-item&quot;</span><span class="p">);</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="kd">var</span><span class="w"> </span><span class="nx">body</span><span class="o">=</span><span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nx">code</span><span class="o">=</span><span class="nx">req</span><span class="p">.</span><span class="nx">getStatus</span><span class="p">();</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="k">if</span><span class="p">(</span><span class="nx">code</span><span class="o">!==</span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">ok</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="nx">status</span><span class="o">:</span><span class="s2">&quot;HTTP&quot;</span><span class="p">,</span><span class="nx">http</span><span class="o">:</span><span class="nx">code</span><span class="p">,</span><span class="nx">url</span><span class="o">:</span><span class="nx">url</span><span class="p">,</span><span class="nx">body</span><span class="o">:</span><span class="nb">String</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="mf">180</span><span class="p">)});</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="kd">var</span><span class="w"> </span><span class="nx">j</span><span class="p">;</span><span class="w"> </span><span class="k">try</span><span class="p">{</span><span class="w"> </span><span class="nx">j</span><span class="o">=</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">body</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">ok</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="nx">status</span><span class="o">:</span><span class="s2">&quot;BAD_JSON&quot;</span><span class="p">});</span><span class="w"> </span><span class="p">}</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="kd">var</span><span class="w"> </span><span class="nx">cw</span><span class="o">=</span><span class="nx">j</span><span class="p">.</span><span class="nx">current_weather</span><span class="o">||</span><span class="nx">j</span><span class="p">.</span><span class="nx">current</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">cw</span><span class="o">||</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">cw</span><span class="p">.</span><span class="nx">temperature</span><span class="o">!==</span><span class="s2">&quot;number&quot;</span><span class="o">||</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">cw</span><span class="p">.</span><span class="nx">windspeed</span><span class="o">!==</span><span class="s2">&quot;number&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">ok</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="nx">status</span><span class="o">:</span><span class="s2">&quot;NO_CURRENT&quot;</span><span class="p">});</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="nx">ok</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="nx">status</span><span class="o">:</span><span class="s2">&quot;OK&quot;</span><span class="p">,</span><span class="nx">temperature</span><span class="o">:</span><span class="nx">cw</span><span class="p">.</span><span class="nx">temperature</span><span class="p">,</span><span class="nx">windspeed</span><span class="o">:</span><span class="nx">cw</span><span class="p">.</span><span class="nx">windspeed</span><span class="p">,</span><span class="nx">winddirection</span><span class="o">:</span><span class="nx">cw</span><span class="p">.</span><span class="nx">winddirection</span><span class="p">,</span><span class="nx">is_day</span><span class="o">:</span><span class="nx">cw</span><span class="p">.</span><span class="nx">is_day</span><span class="p">,</span><span class="nx">time</span><span class="o">:</span><span class="nx">cw</span><span class="p">.</span><span class="nx">time</span><span class="o">||</span><span class="s2">&quot;&quot;</span><span class="p">});</span>
</span></code></pre></div>
<img alt="Script/ch04.42-script-example2.png" src="../../../ch04-zabbix-collecting-data/Script/ch04.42-script-example2.png" /></p>
<p>Next create a few dependent items that use this script as master item.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Name:</strong></td>
<td style="text-align: left;">Temperature</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Key:</strong></td>
<td style="text-align: left;">weather.temp</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Type of information:</strong></td>
<td style="text-align: left;">Float</td>
</tr>
<tr>
<td style="text-align: left;">Preprocessing</td>
<td style="text-align: left;">JSONPath: -&gt; $.temperature</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Name:</strong></td>
<td style="text-align: left;">Windspeed</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Key:</strong></td>
<td style="text-align: left;">weather.windspeed</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Type of information:</strong></td>
<td style="text-align: left;">Float</td>
</tr>
<tr>
<td style="text-align: left;">Preprocessing</td>
<td style="text-align: left;">JSONPath: -&gt; $.windspeed</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Name:</strong></td>
<td style="text-align: left;">Wind direction</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Key:</strong></td>
<td style="text-align: left;">weather.winddir</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Type of information:</strong></td>
<td style="text-align: left;">Unsigned</td>
</tr>
<tr>
<td style="text-align: left;">Preprocessing</td>
<td style="text-align: left;">JSONPath: -&gt; $.winddirection</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Name:</strong></td>
<td style="text-align: left;">Is day</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Key:</strong></td>
<td style="text-align: left;">weather.is_day</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Type of information:</strong></td>
<td style="text-align: left;">Unsigned</td>
</tr>
<tr>
<td style="text-align: left;">Preprocessing</td>
<td style="text-align: left;">JSONPath: -&gt; $.is_day</td>
</tr>
</tbody>
</table>
<p><img alt="Script/ch04.41-script-example2.png" src="../../../ch04-zabbix-collecting-data/Script/ch04.41-script-example2.png" /></p>
<hr />
<h2 id="best-practices-and-troubleshooting">Best practices and troubleshooting</h2>
<ul>
<li><strong>Timeouts:</strong> Keep script execution short; APIs may delay.</li>
<li><strong>Testing:</strong> Use <em>“Check now”</em> in the item to see raw output.</li>
<li><strong>Logging:</strong> Use <code>Zabbix.log(3, "message")</code> for debug output (appears in server
  or proxy log).</li>
<li><strong>Error handling:</strong> Always <code>throw</code> errors instead of returning strings; Zabbix
  will mark the item as unsupported automatically.</li>
<li><strong>Object reuse:</strong> Each script can create up to 10 <code>HttpRequest</code> objects reuse
  one when chaining API calls.</li>
<li><strong>Security:</strong> Never hard-code passwords or tokens; use macros or item parameters.</li>
</ul>
<hr />
<h2 id="when-to-use-script-items">When to use Script items</h2>
<p>Use Script items when:</p>
<ul>
<li>You need <strong>logic, loops, or multiple API calls</strong>.</li>
<li>You monitor <strong>remote services</strong> where agents aren't available.</li>
<li>You want to prototype an integration before writing a custom plugin.</li>
</ul>
<p>For simple JSON transformations, preprocessing JavaScript might be enough, but
Script items shine when you need full control.</p>
<hr />
<h2 id="expert-techniques-for-script-items">Expert techniques for Script items</h2>
<h3 id="1-debugging-things">1. Debugging things</h3>
<p>During development, use the internal logging API to trace script behavior:</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nx">Zabbix</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Debug: response body = &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">body</span><span class="p">);</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nx">Zabbix</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Info: token received successfully&quot;</span><span class="p">);</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nx">Zabbix</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Warning: unexpected API reply&quot;</span><span class="p">);</span>
</span></code></pre></div>
<details class="tip" open="open">
<summary>Tip</summary>
<ul>
<li>Log level <code>4</code> = debug, visible only if the server log level ≥4.</li>
<li>Log level <code>3</code> = informational.</li>
<li>The log lines are written to the Zabbix server or proxy log, not the frontend.</li>
</ul>
</details>
<p>When a script throws an error, Zabbix automatically marks the item as <em>unsupported</em>.</p>
<h3 id="2-using-macros-and-secret-parameters">2. Using macros and secret parameters</h3>
<p>Always move credentials, tokens, and sensitive values to <strong>item parameters</strong> or
<strong>macros</strong> rather than hard coding them.</p>
<p>For example:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>token</code></td>
<td style="text-align: left;"><code>{$GITHUB_TOKEN}</code></td>
</tr>
</tbody>
</table>
<p>Then define <code>{$GITHUB_TOKEN}</code> in your host or template with <strong>secret visibility</strong>.
This allows you to reuse the same script safely across environments.</p>
<details class="tip" open="open">
<summary>Tip</summary>
<p>Manage secrets via <em>template macros</em> so that they are portable if you
export the template. Store secrets in a vault instead of the DB.</p>
</details>
<h3 id="3-error-handling-and-fallback-logic">3. Error handling and fallback logic</h3>
<p>Production scripts should degrade gracefully.
You can catch and handle network failures, retry, or return a fallback value:</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpRequest</span><span class="p">();</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">parameters</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">getStatus</span><span class="p">()</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="s2">&quot;HTTP &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">getStatus</span><span class="p">();</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="p">}</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">  </span><span class="nx">Zabbix</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Request failed: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">);</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// Fallback value for triggers</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="p">}</span>
</span></code></pre></div>
<p>This script catches any errors (network failure, bad JSON, missing .value, etc.):
Logs the error at severity level 2 (Warning) into the Zabbix server log.
It returns a numeric 0 instead of throwing errors, so the item remains
supported.</p>
<h3 id="4-caching-between-executions">4. Caching between executions</h3>
<p>Script items don't keep memory between runs, but you can reuse data efficiently
by combining one master Script or trapper item that stores the full JSON response
with several dependent items that extract individual fields. This isn't true caching
inside JavaScript. It's data reuse via Zabbix history, avoiding repeated API calls.</p>
<h3 id="5-parallelization-and-performance-considerations">5. Parallelization and performance considerations</h3>
<p>Each Script item consumes one poller slot.
If you have dozens of Script items that do API calls, consider:</p>
<ul>
<li>Running them on a <strong>proxy</strong> close to the data source (reduces latency).</li>
<li>Adjusting <code>StartPollers</code> and <code>Timeout</code> in <code>zabbix_server.conf</code>.</li>
<li>Avoiding heavy JSON parsing or unnecessary loops.</li>
<li>Using asynchronous APIs only when truly needed. Duktape executes synchronously.</li>
</ul>
<p>A single bad Script item can block a poller for its entire timeout period, so always
test and tune.</p>
<h3 id="6-returning-structured-data">6. Returning structured data</h3>
<p>Script items can return <strong>JSON strings</strong> which can then be used in <strong>dependent items</strong>.
Example: returning a JSON object containing multiple metrics.</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="nx">cpu_usage</span><span class="o">:</span><span class="w"> </span><span class="mf">25</span><span class="p">,</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nx">mem_usage</span><span class="o">:</span><span class="w"> </span><span class="mf">67</span><span class="p">,</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span><span class="nx">disk_free</span><span class="o">:</span><span class="w"> </span><span class="mf">18234</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">});</span>
</span></code></pre></div>
<p>Then create dependent items with JSONPath like:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="err">$.cpu_usage</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="err">$.mem_usage</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="err">$.disk_</span><span class="kc">free</span>
</span></code></pre></div>
<p>This allows one Script item to feed many dependent metrics. A professional optimization
pattern.</p>
<h3 id="7-combining-script-items-with-preprocessing-javascript">7. Combining script items with preprocessing JavaScript</h3>
<p>Advanced users often pair a Script item that performs heavy retrieval with preprocessing
JavaScript that performs lightweight normalization.</p>
<p>Example:</p>
<ul>
<li>Script item fetches a full JSON payload from an API.</li>
<li>Dependent item extracts a numeric value using preprocessing JavaScript:</li>
</ul>
<div class="language-js highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">var</span><span class="w"> </span><span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">return</span><span class="w"> </span><span class="nx">obj</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">cpu</span><span class="p">;</span>
</span></code></pre></div>
<p>This separates responsibilities and makes troubleshooting easier.</p>
<h3 id="8-controlling-execution-context">8. Controlling execution context</h3>
<p>Script items always run <strong>on the poller process</strong> of either the Zabbix server or
proxy. Understanding this helps when debugging:</p>
<ul>
<li>If an item runs on a <strong>proxy</strong>, it has network access only from the proxy’s location.</li>
<li>You can <strong>force</strong> execution on a proxy by assigning the host to that proxy.</li>
<li>Logs for script execution appear in the respective poller’s log file.</li>
</ul>
<details class="info" open="open">
<summary>Info</summary>
<p>There is a small exception when it comes to the use of the poller process.
If you make use of the test button to test the item then the check will not
user the poller but the task manager process.</p>
</details>
<h3 id="9-best-practice-checklist">9. Best practice checklist</h3>
<ul>
<li>✅ Keep scripts short (&lt;200 lines).</li>
<li>✅ Always handle HTTP status codes and JSON errors.</li>
<li>✅ Use parameters or macros for configuration.</li>
<li>✅ Log at <code>Zabbix.log(3, ...)</code> for operations and <code>Zabbix.log(4, ...)</code> for debugging.</li>
<li>✅ Reuse a single <code>HttpRequest</code> object per script.</li>
<li>✅ Test interactively in the frontend with <em>“Check now”</em>.</li>
<li>✅ Document the purpose and return type at the top of each script.</li>
</ul>
<h3 id="12-summary">12. Summary</h3>
<p>By mastering Script items, you've reached the <strong>expert level of Zabbix data collection</strong>.
You now understand not just how to fetch and return data, but how to:</p>
<ul>
<li>Debug effectively</li>
<li>Secure your credentials</li>
<li>Handle API errors gracefully</li>
<li>Optimize poller usage</li>
<li>Reuse scripts for multiple metrics</li>
</ul>
<p>These skills let you integrate Zabbix with virtually any system.</p>
<details class="note" open="open">
<summary>Note</summary>
<p>When a Script item is executed, Zabbix starts a Duktape JavaScript interpreter
inside the server or proxy process. For each check run, Zabbix injects a few
built-in variables into the script’s environment the most important one is
<code>value</code>.</p>
<p><code>value</code> is a JSON string that contains all item parameters you defined under
Parameters → Name / Value.</p>
<p>Inside the script, you must parse it first:</p>
<p><code>var p = JSON.parse(value);</code></p>
<p>You can then access the parameters by name:</p>
<p><code>var host = p.host;</code>
<code>var port = p.port;</code></p>
<p>If you try to reference a <code>parameters</code> object (as seen in some very old examples),
you will get : <code>ReferenceError: identifier 'parameters' undefined</code> because the
Duktape runtime does not inject such a variable anymore. All parameters are
passed inside the value JSON string.</p>
</details>
<h2 id="conclusion">Conclusion</h2>
<p>Script items make Zabbix remarkably flexible — they let you collect data from any
API or service with just a few lines of JavaScript.
While the built-in Duktape engine is synchronous and minimal, meaning no true
parallelism or advanced JS features, it’s more than enough for lightweight
automation and integrations.</p>
<p>The key to using Script items effectively is efficiency: fetch once, reuse results
through dependent items, and keep scripts small and predictable. When heavier or
high-frequency polling is needed, move it closer to the data source with proxies
or external collectors.</p>
<p>With those principles in mind, Script items become your gateway between Zabbix
and the modern API world — simple, powerful, and entirely scriptable.</p>
<h2 id="questions">Questions</h2>
<ul>
<li>What makes Script items different from external checks or user parameters in Zabbix?</li>
<li>How are Script item parameters passed to the JavaScript environment in modern
  Zabbix versions?</li>
<li>Why does using JSON.parse(value) make your scripts more portable?</li>
<li>How can you avoid making multiple API calls when several metrics come from the
  same endpoint?</li>
<li>Why are global macros usually not a good choice for secrets in exported templates?</li>
</ul>
<h2 id="useful-urls">Useful URLs</h2>
<ul>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/config/items/preprocessing/javascript/javascript_objects">https://www.zabbix.com/documentation/current/en/manual/config/items/preprocessing/javascript/javascript_objects</a></li>
<li><a href="https://www.zabbix.com/documentation/current/en/manual/config/items/itemtypes/script">https://www.zabbix.com/documentation/current/en/manual/config/items/itemtypes/script</a></li>
</ul>







  
  






                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  К началу
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Stichting The Monitoring Penmasters
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.tags", "navigation.expand", "navigation.prune", "navigation.path", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.view", "content.tags"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": {"index": "tags.md"}, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../assets/external/cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/tags-data-attr.js?v=514f4d1ef40cb7c1bed03bcbf9a447d4f11fa141"></script>
      
    
    
        
		
		
    

  </body>
</html>